<html>
<title>PubLink Test</title>

<head>
</head>

<body>
    <h1>PubCID + PubLink Test</h1>
    <form name="myForm" method="GET">
        <label for="fname">Name:</label><br>
        <input type="text" id="name" name="name" value="test"><br>
        <label for="email">E-mail:</label><br>
        <input type="text" id="email" name="email" value="test@test.com"><br>
    </form>
    <input type="submit" value="Submit" onClick="submitForm()">
    <input type="submit" value="Clear Cookies" onClick="clearCookies()">
    <hr>
    <b>MD5 Hashed Email:</b><br>
    b642b4217b34b1e8d3bd915fc65c4452
    <p><input type="submit" value="Submit Pre-Hashed Email" onClick="submitHash()"></p>
    <!-- Clear Cookie Button -->
    <script>
    function clearCookies() {
        console.log("Clearing local storage");
        localStorage.clear();
        var cookies = document.cookie.split(";");
        console.log("Clearing Cookies" + cookies)
        for (var i = 0; i < cookies.length; i++) {
            eraseCookie(cookies[i].split("=")[0]);
        }
    }

    function eraseCookie(name) {
        document.cookie = name + '=;path=/;expires=Thu, 21 Sep 1979 00:00:01 UTC;';
    }
    </script>
    <!-- Launcher tag -->
    <script type="text/javascript">
    var cnvr_launcher_options = { lid: 390 };
    </script>
    <script type="text/javascript" src="https://secure.cdn.fastclick.net/js/cnvr-launcher/latest/launcher-stub.min.js" async></script>
    <!--Script to Call PubLink Start API from Submit-->
    <script type="text/javascript">
    function submitForm() {
        //Print the e-mail value entered in the form
        console.log("Form submit with e-mail:" + email.value);
        //Print all cookies stored on browser
        console.log("Cookies on site: " + document.cookie)
        //Prints PubCID stored in local storage - change getItem value it pubcid is named something different
        console.log("PubCID Local Storage:" + localStorage.getItem('_pubcid'));
        window.conversant.launch('publink', 'start', {
            siteId: "108060",
            email: email.value,
            logging: "debug"
        });
    }
    </script>
    <!--Script to Call PubLink Start API from Submit-Pre-Hashed Email -->
    <script type="text/javascript">
    function submitHash() {
        window.conversant.launch('publink', 'start', {
            //Change this to the SID being used in the Launcher ID Config
            siteId: "108060",
            emailHashes: ["b642b4217b34b1e8d3bd915fc65c4452"],
            logging: "debug"
        });
    }
    </script>
</body>

</html>
<html>
<title>ATS URL Detection Test</title>

<head>
    <script src="https://ats.rlcdn.com/ats.js" async></script>
</head>

<body>
    <h1>ATS URL Detection Test</h1>
    <p>This page uses URL detection to fire off the ATS script. Please include a non-hashed email in the URL parameter <b>email</b>.
        <br> <em>Example: https://{domain}.com/{path}?<b>email=test@test.com</b></em>
    </p>
    <p>During continuous testing, please hit 'Clear Cookies' before submitting ATS request in order to clear IDL Envelope.</p>
    <form name="myForm" method="GET">
        <label for="fname" >Name:</label><br>
        <input type="text" id="name" name="name" disabled="disabled"><br>
        <label for="email">E-mail:</label><br>
        <input type="text" id="email" name="email" disabled="disabled"><br>
    </form>
    <input type="submit" value="Submit" onClick="submitForm()" disabled="disabled">
    <input type="submit" value="Clear Cookies" onClick="clearCookies()">
    <!-- Script to Clear Cookies -->
    <script>
    function clearCookies() {
        console.log("Clearing local storage");
        localStorage.clear();
        var cookies = document.cookie.split(";");
        console.log("Clearing Cookies" + cookies)
        for (var i = 0; i < cookies.length; i++) {
            eraseCookie(cookies[i].split("=")[0]);
        }
    }

    function eraseCookie(name) {
        document.cookie = name + '=; Max-Age=-99999999;';
    }
    </script>
    <!--Script to Call ATS on page load using URL -->
    <script>
    var atsScript = document.createElement('script');
    atsScript.onload = function() {
        window.ats.start({
            placementID: 125,
            detectionType: "url",
            urlParameter: "email",
            logging: "debug"
        });
    };
    atsScript.src = 'https://ats.rlcdn.com/ats.js';
    document.body.appendChild(atsScript);
    </script>
    <hr>
</body>

</html>
<html>
<title>PubCID + PubLink URL Detection Test</title>
<head>
</head>

<body>
    <h1>PubLink URL Detection Test</h1>
        <p>This page uses URL detection to fire off the PubLink script. Please include a non-hashed email in the URL parameter <b>email</b>.
        <br> <em>Example: https://{domain}.com/{path}?<b>email=test@test.com</b></em>
    </p>
    <form name="myForm" method="GET">
        <label for="fname" >Name:</label><br>
        <input type="text" id="name" name="name" disabled="disabled"><br>
        <label for="email">E-mail:</label><br>
        <input type="text" id="email" name="email" disabled="disabled"><br>
    </form>
    <input type="submit" value="Submit" onClick="submitForm()" disabled="disabled">
    <input type="submit" value="Clear Cookies" onClick="clearCookies()">
    <!-- Script to Clear Cookies -->
    <script>
    function clearCookies() {
        console.log("Clearing local storage");
        localStorage.clear();
        var cookies = document.cookie.split(";");
        console.log("Clearing Cookies" + cookies)
        for (var i = 0; i < cookies.length; i++) {
            eraseCookie(cookies[i].split("=")[0]);
        }
    }

    function eraseCookie(name) {
        document.cookie = name + '=; Max-Age=-99999999;';
    }
    </script>
    <!-- Launcher tag -->
    <script type="text/javascript">
    var cnvr_launcher_options = { lid: 390 };
    </script>
    <script type="text/javascript" src="http://secure.cdn.fastclick.net/js/cnvr-launcher/latest/launcher-stub.min.js"></script>
    <!--Script to Call PubLink Start API -->
    <script type="text/javascript">
        //Print the e-mail value entered in the form
        console.log("Form submit with e-mail:" + email.value);
        //Print all cookies stored on browser
        console.log("Cookies on site: " + document.cookie)
        //Prints PubCID stored in local storage - change getItem value it pubcid is named something different
        console.log("PubCID Local Storage:" + localStorage.getItem('_pubcid'));
        window.conversant.launch('publink', 'start', {
            siteId: 108060,
            urlParameter: "email",
            //placementID:2,
            //"detectDynamicNodes": true,
            //"storageType" : "cookie",
            logging : "debug",
            //"detectionType" : "scrapeAndUrl"
        });
    </script> 
<hr>
</body>
</html>
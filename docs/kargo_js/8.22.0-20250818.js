/*! Kargo AdTag - v8.22.0 [20250818] */(() => { var __webpack_modules__ = { 2052: () => { }, 731: () => { }, 5425: () => { }, 7344: (t, e, r) => { "use strict"; var n = r(2052); r.o(n, "KrakenEventType") && r.d(e, { KrakenEventType: function () { return n.KrakenEventType } }); var i = r(731); r.o(i, "KrakenEventType") && r.d(e, { KrakenEventType: function () { return i.KrakenEventType } }); var o = r(5425); r.o(o, "KrakenEventType") && r.d(e, { KrakenEventType: function () { return o.KrakenEventType } }); var a = r(1533); r.o(a, "KrakenEventType") && r.d(e, { KrakenEventType: function () { return a.KrakenEventType } }) }, 1533: () => { }, 9043: () => { }, 7117: () => { }, 608: () => { }, 8187: () => { }, 9175: () => { }, 5198: (t, e, r) => { "use strict"; r.d(e, { KrakenEventType: () => n }); var n; r(9043), r(608), r(7117), r(8187), r(9175); !function (t) { t.Render = "render", t.AdTagReady = "adtag_ready" }(n || (n = {})) }, 3112: (t, e, r) => { "use strict"; r.d(e, { KrakenEventType: () => i.KrakenEventType }); var n = r(7344); r.o(n, "KrakenEventType") && r.d(e, { KrakenEventType: function () { return n.KrakenEventType } }); var i = r(5198) }, 6496: (t, e, r) => { (e = r(1364)(!1)).push([t.id, "@supports(width:100vw){@media(max-width:320px){.kargo-ad-VAR_LOCAL_ID{left:50%;position:relative;transform:translateX(-50%);width:100vw}}}.kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner{line-height:0;position:relative;text-align:center}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.vast{height:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.vpaid{text-align:left}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-created,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-kargo,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-advertisement,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-created,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-kargo{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-advertisement{display:inline-block!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-created .kargo-banner-optout.kargo-branding-advertisement,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-created .kargo-banner-optout.kargo-branding-kargo{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-created .kargo-banner-optout.kargo-branding-created{display:block!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout{left:0;position:absolute;text-decoration:none;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-kargo{border-right:19px solid transparent;border-top:19px solid hsla(0,0%,100%,.85);display:inline-block;z-index:10004}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-kargo .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-created{display:none!important;margin:0 auto;padding-top:15px;position:relative;top:-10px;z-index:2}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-created .by-kargo-svg-grey{height:10px;width:60px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement{background-color:#585858;border:none;border-radius:50%;display:none!important;height:15px;width:15px;z-index:10004}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement .kargo-svg-advertisement{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement .kargo-svg-opt-out{fill:#fff;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above{background-color:transparent;padding-top:10px;position:relative;top:-5px;width:100px;z-index:2}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above .kargo-svg-advertisement{display:block}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.vpaid{z-index:10000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.show{visibility:visible}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.hide{visibility:hidden}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast{height:100%;left:50%;opacity:1;position:absolute;transform:translate(-50%);width:300px;z-index:1000000000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast.fade{opacity:0;transition:opacity .6s ease-in;z-index:1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast .kargo-overlay-bolt{fill:#5e5e5e;display:none;height:58px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast .kargo-overlay-bolt.kargo{display:block}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-interscroller{width:100vw}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content{display:inline-block;line-height:0;min-width:300px;position:relative}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.desktop{min-width:VAR_DESKTOP_WIDTHpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader{left:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader.fade{transition:background-color .4s ease-in}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader .svg-loader{height:39px;left:50%;padding:1px;position:absolute;top:50%;transform:translate3d(-20px,-50%,0);width:39px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.vpaid{display:block;margin:0 auto;text-align:center}@supports(width:100vw){.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.kargo-banner-width{display:block;left:50%;position:relative;transform:translateX(-50%);width:100vw}}@supports not (width:100vw){.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.kargo-banner-width{width:100%}}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.unfaded{opacity:.1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.fade{opacity:1;transition:opacity .4s ease-in .2s}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.vast{display:block;height:auto;z-index:1000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.center-vertical{margin:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader{background-color:transparent;left:50%;position:absolute;transform:translate(-50%);visibility:hidden}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader.fade{background-color:#000;visibility:visible}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader.hide{background-color:#000;transition:visibility .4s ease-in;visibility:hidden}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader svg{height:39px;left:50%;padding:1px;position:absolute;top:50%;transform:translate3d(-20px,-50%,0);width:39px}", ""]), t.exports = e }, 8960: (t, e, r) => { (e = r(1364)(!1)).push([t.id, ".kargo-ad-VAR_LOCAL_ID .kargo-ad-content,.kargo-ad-VAR_LOCAL_ID .kargo-creative{width:100%}", ""]), t.exports = e }, 5264: (t, e, r) => { (e = r(1364)(!1)).push([t.id, ".kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{animation:slideUp 1.7s ease-in 1 forwards;left:0;margin-bottom:VAR_HEIGHT_OFFSETpx;position:fixed;right:0;text-align:center;visibility:visible;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content{max-height:50px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .kargo-ad-content{bottom:0;left:50%;position:absolute;transform:translate3d(-50%,0,0)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .new-template{max-height:120px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .new-template-after-click{animation:swipeUp .65s ease-in 1 forwards;max-height:460px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-hover-content{max-width:428px;width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-ad-content{width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill{background-color:rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content{box-sizing:content-box!important;padding:5px 0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-close.filled{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top{animation:slideUpTop 1.7s ease-in 1 forwards;margin-top:VAR_HEIGHT_OFFSETpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-close{bottom:-16px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--wrapper-fill .kargo-hover-close{bottom:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-content{float:left;left:50%;min-height:50px;min-width:320px;position:relative;transform:translate(-50%);z-index:2147483642}@keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translate3d(0,300px,0)}80%{bottom:0;padding-bottom:4px;transform:translateZ(0)}83%{bottom:0;padding-bottom:0;transform:translate3d(0,7px,0)}90%{bottom:0;padding-bottom:1px;transform:translateZ(0)}95%{bottom:-2px;padding-bottom:0;transform:translate3d(0,1px,0)}to{bottom:-1px;padding-bottom:0;transform:translateZ(0)}}@keyframes swipeUp{0%{bottom:0;max-height:120px}10%{bottom:0;max-height:154px}20%{bottom:0;max-height:188px}30%{bottom:0;max-height:222px}40%{bottom:0;max-height:256px}50%{bottom:0;max-height:290px}60%{bottom:0;max-height:324px}70%{bottom:0;max-height:392px}80%{bottom:-2px;max-height:426px}90%{bottom:0;max-height:450px}to{bottom:-1px;max-height:460px}}@keyframes slideUpTop{0%{padding-top:0;top:0;transform:translate3d(0,-300px,0)}80%{padding-top:4px;top:0;transform:translateZ(0)}83%{padding-top:0;top:0;transform:translate3d(0,-7px,0)}90%{padding-top:1px;top:0;transform:translateZ(0)}95%{padding-top:0;top:-2px;transform:translate3d(0,-1px,0)}to{padding-top:0;top:-1px;transform:translateZ(0)}}", ""]), t.exports = e }, 5322: (t, e, r) => { (e = r(1364)(!1)).push([t.id, "@supports(width:100vw){@media(max-width:320px){.kargo-ad-VAR_LOCAL_ID{left:auto!important;transform:none!important}}}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-uptick-close{background-color:#585858;border-radius:50%;display:block;height:24px;position:relative;right:-148px;top:1px;width:24px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-uptick-close svg{fill:#fff;height:24px;left:0;position:absolute;width:24px;z-index:2147483642}.no-padding{padding-top:0!important}.uptick-ad-content{display:flex!important;height:100px!important;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;position:fixed!important;right:0!important;top:0!important;width:175px!important;z-index:2147483642}.uptick-reset{height:100%;position:relative;top:0;width:100%}.tempBanner{background-color:transparent;background-position:50%;background-repeat:no-repeat;background-size:contain;display:block;margin-left:auto;margin-right:auto;max-height:350px;max-width:428px;min-height:350px;min-width:300px;width:100%}.hide{display:none!important}.show{display:block!important}", ""]), t.exports = e }, 7080: (t, e, r) => { (e = r(1364)(!1)).push([t.id, ".kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID.kargo-ad-preload{display:block}.kargo-ad-VAR_LOCAL_ID.kargo-ad-preload .kargo-ad-hover{animation:none!important;left:-999px;right:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover-slide-up-fast{animation:slideUpFast .9s ease-in 1 forwards!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover-slide-down-fast{animation:slideDownFast .9s ease-in 1 forwards!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{animation:slideUp 1.7s ease-in 1 forwards;left:0;margin-bottom:VAR_HEIGHT_OFFSETpx;position:fixed;right:0;text-align:center;visibility:visible;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement.kargo-desktop-hover .kargo-svg-advertisement{opacity:1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link{width:68px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .by-kargo-svg-white{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover:not(.kargo-hover--branding-advertisement) .kargo-hover-link .kargo-svg-advertisement{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-none .kargo-hover-link{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-hover-content{width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill{background-color:rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content{box-sizing:content-box!important;padding:5px 0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content.kargo-desktop-hover{width:728px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content.kargo-desktop-hover-responsive{width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content.kargo-desktop-hover-responsive .kargo-ad-content{margin:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-link.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-close.filled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-link.filled{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top{animation:slideUpTop 1.7s ease-in 1 forwards;margin-top:VAR_HEIGHT_OFFSETpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-close{bottom:-16px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--wrapper-fill .kargo-hover-close{bottom:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link{bottom:-13px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-bolt{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-ad,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-kargo{bottom:0;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-advertisement{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--videoanchor{z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout .kargo-hover-content{max-height:50px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout .kargo-hover-content .kargo-ad-content{bottom:0;left:50%;position:absolute;transform:translate(-50%)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout.kargo-hover--wrapper-fill .kargo-ad-content{bottom:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout .kargo-hover-content .kargo-ad-content{min-width:100%!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout .kargo-hover-content .kargo-hover-close{bottom:77px;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout .kargo-hover-content .kargo-hover-close.kargo-desktop-runway-close{bottom:108px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout .kargo-hover-content .kargo-hover-link{border-left:13px solid transparent!important;border-right:13px solid transparent!important;bottom:0;left:auto;right:5px;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout .kargo-hover-content .kargo-hover-link svg.by-kargo-svg-white{height:8px;left:1.5px;top:2.3px;width:48px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--desktop-breakout.kargo-hover--wrapper-fill .kargo-ad-content{bottom:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-triplex-execution{bottom:0;max-width:428px;position:fixed;width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-triplex-execution .kargo-hover-close{top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right{pointer-events:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left.kargo-hover--align-right .kargo-hover-content,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right.kargo-hover--align-right .kargo-hover-content{float:right}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-content,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right .kargo-hover-content{left:auto;min-width:VAR_SIDEKICK_WIDTHpx;pointer-events:auto;right:auto;transform:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left.kargo-hover--top .kargo-hover-link,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right.kargo-hover--top .kargo-hover-link{bottom:auto!important;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-desktop-sidekick .kargo-hover-content{min-height:VAR_SIDEKICK_HEIGHTpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--one-sec-interstitial{animation:none;opacity:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--one-sec-interstitial.is-loaded{animation:slideUp 1.7s ease-in 1 forwards;opacity:1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--prevent-close .kargo-hover-close{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky{animation:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky.kargo-hover--wrapper-fill{background-color:#fff}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content{padding:9px 0 5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout{border-right:19px solid transparent;border-top:19px solid hsla(0,0%,100%,.85);display:inline-block;left:0;position:absolute;text-decoration:none;top:9px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement{background-color:#585858;border:none;border-radius:50%;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-bolt{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-opt-out{fill:#fff;display:block;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover:not(.kargo-hover--amp-sticky) .kargo-hover-optout{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-content{float:left;left:50%;min-height:50px;min-width:320px;position:relative;transform:translate(-50%);z-index:2147483641}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link{border-bottom:13px solid rgba(0,0,0,.65);border-right:13px solid transparent;box-sizing:content-box!important;left:0;position:absolute;top:-13px;width:52px;z-index:2147483641}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding{border-left:13px solid transparent!important;border-right:13px solid transparent!important;margin:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding .by-kargo-svg-white{height:8px;left:0;top:2px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding.kargo-breakaway-branding{right:26px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding:not(.kargo-breakaway-branding){left:0!important;right:0!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding.breakaway-left-align{left:26px!important;margin:initial!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-triplex-execution{border-bottom:13px solid rgba(0,0,0,.65);border-left:13px solid transparent;border-right:13px solid transparent;bottom:0;left:auto;position:absolute;right:26px;top:auto;width:58px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-triplex-execution .by-kargo-svg-white{top:2px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.hide{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.desktop-format{width:52px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg{display:inline-block;position:absolute}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-bolt{fill:#ff7500;height:7px;left:4px;top:3px;width:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-kargo{fill:#fff;height:14px;left:12px;width:26px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-ad{fill:#ff7500;height:14px;left:39px;width:11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-advertisement{fill:#aaa;height:7px;left:-1px;opacity:.75;top:4px;width:71px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.by-kargo-svg-white{height:9px;left:2px;top:4px;width:52px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close{background-color:#585858;border-radius:50%;height:24px;position:absolute;right:5px;top:-13px;width:24px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.expanded{right:10px;top:10px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.hide{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.left-align{left:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close-no-border{fill:#fff;height:24px;left:0;position:absolute;width:24px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.runway-close-position{top:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close-no-border{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.kargo-hover-filled{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close-progress{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right:not(.kargo-hover--videoanchor) .kargo-hover-link{border-left:13px solid transparent;border-right:none;bottom:0;left:auto;right:0;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right:not(.kargo-hover--videoanchor).kargo-sidekick-branding{border-right:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-close{left:5px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-link{bottom:0;left:0;right:auto;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--branding-advertisement .kargo-hover-link .kargo-advertisement{top:-8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link{border-bottom:none;border-right:13px solid transparent;border-top:13px solid rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link.kargo-sidekick-branding{border-left:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-bolt{top:-10px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-kargo{left:11px;top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-ad{left:38px;top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link{border-right:none;left:auto;right:0;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link.kargo-sidekick-branding{border-right:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link .kargo-advertisement{top:-8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-left .kargo-hover-link{left:0;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-left .kargo-advertisement{top:-8px}@keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translateY(300px)}80%{bottom:0;padding-bottom:4px;transform:translate(0)}83%{bottom:0;padding-bottom:0;transform:translateY(7px)}90%{bottom:0;padding-bottom:1px;transform:translate(0)}95%{bottom:-2px;padding-bottom:0;transform:translateY(1px)}to{bottom:-1px;padding-bottom:0;transform:translate(0)}}@keyframes slideUpFast{0%{bottom:0;padding-bottom:0;transform:translateY(300px)}to{bottom:-1px;padding-bottom:0;transform:translate(0)}}@keyframes slideDownFast{0%{bottom:-1px;padding-bottom:0;transform:translate(0)}to{bottom:0;padding-bottom:0;transform:translateY(300px)}}@keyframes slideUpTop{0%{padding-top:0;top:0;transform:translateY(-300px)}80%{padding-top:4px;top:0;transform:translate(0)}83%{padding-top:0;top:0;transform:translateY(-7px)}90%{padding-top:1px;top:0;transform:translate(0)}95%{padding-top:0;top:-2px;transform:translateY(-1px)}to{padding-top:0;top:-1px;transform:translate(0)}}", ""]), t.exports = e }, 3392: (t, e, r) => { (e = r(1364)(!1)).push([t.id, ".kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{position:relative;text-align:center}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content{display:inline-block;line-height:0;position:relative}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout{border-right:19px solid transparent;border-top:19px solid hsla(0,0%,100%,.85);display:inline-block;left:0;position:absolute;text-decoration:none;top:0;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement{background-color:#585858;border:none;border-radius:50%;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-bolt{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-opt-out{fill:#fff;display:block;height:15px;width:15px}", ""]), t.exports = e }, 4162: (t, e, r) => { t.exports = '<div class="kargo-ad-banner VAR_VAST VAR_BRANDING VAR_FLOURISH_BANNER"> <div class="kargo-overlay VAR_VAST VAR_BOLT"></div> <a class="kargo-banner-optout kargo-branding-created VAR_VAST" href=https://www.kargo.com/privacy target=_blank> ' + r(5822) + ' </a> <div class="kargo-ad-content VAR_VAST VAR_FADE VAR_WIDTH VAR_FLOURISH_CONTENT"> <a class="kargo-banner-optout kargo-branding-kargo VAR_VAST" href=https://www.kargo.com/privacy target=_blank> ' + r(9475) + ' </a> <a class="kargo-banner-optout kargo-branding-advertisement VAR_ABOVE VAR_VAST" href=https://www.kargo.com/privacy target=_blank> ' + r(9262) + " " + r(81) + ' </a> <div class="kargo-loader VAR_SHOW"> ' + r(2019) + " </div> </div> </div> " }, 4490: (t, e, r) => { t.exports = '<div class="kargo-ad-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE VAR_TRIPLEX"> <div class=kargo-hover-content> <a class="kargo-hover-link desktop-format unfilled" href=https://www.kargo.com/privacy target=_blank> ' + r(3742) + " " + r(81) + ' </a> <a class="kargo-hover-close unfilled VAR_RUNWAY"> ' + r(86) + " " + r(9525) + ' </a> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-ad-content> </div> </div> </div>' }, 2164: (t, e, r) => { t.exports = '<div class="kargo-ad-hover kargo-desktop-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE VAR_TRIPLEX"> <a class="kargo-hover-link filled desktop-format" href=https://www.kargo.com/privacy target=_blank> ' + r(3742) + " " + r(81) + ' </a> <a class="kargo-hover-close filled"> ' + r(86) + " " + r(9525) + ' </a> <div class="kargo-hover-content VAR_DESKTOP_HOVER"> <div class=kargo-ad-content> </div> </div> </div>' }, 9246: t => { t.exports = '<div class="kargo-ad-hover kargo-hover--swipeup VAR_HUG_SIDE VAR_WRAPPER_FILL VAR_HORIZONTAL_ALIGN VAR_BRANDING VAR_WIDTH"> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-hover-content> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-ad-content></div> </div> </div> ' }, 1712: (t, e, r) => { t.exports = '<div class="kargo-ad-banner VAR_VAST VAR_BRANDING"> <div class=kargo-ad-content> <a class="kargo-uptick-close VAR_CLOSEBUTTON hide"> ' + r(7217) + ' </a> <a class="kargo-banner-optout kargo-branding-kargo VAR_VAST" href=https://www.kargo.com/privacy target=_blank> ' + r(9475) + ' </a> <a class="kargo-banner-optout kargo-branding-advertisement VAR_ABOVE VAR_VAST" href=https://www.kargo.com/privacy target=_blank> ' + r(9262) + " " + r(81) + " </a> </div> </div> " }, 3930: t => { t.exports = '<div class="kargo-ad-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE"> <div class=kargo-hover-content> <div class=kargo-ad-content> </div> </div> </div> ' }, 5966: (t, e, r) => { t.exports = '<div class="kargo-ad-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE VAR_TRIPLEX"> <a class="kargo-hover-link filled" href=https://www.kargo.com/privacy target=_blank> ' + r(81) + " " + r(3742) + ' </a> <a class="kargo-hover-close filled"> ' + r(86) + " " + r(9525) + ' </a> <div class="kargo-hover-close-progress filled"></div> <div class="kargo-hover-content VAR_DESKTOP_HOVER"> <a class="kargo-hover-link unfilled VAR_SIDEKICK_BRANDING VAR_TRIPLEX" href=https://www.kargo.com/privacy target=_blank> ' + r(81) + " " + r(3742) + ' </a> <a class="kargo-hover-close unfilled VAR_RUNWAY VAR_LEFT_ALIGN"> ' + r(86) + " " + r(9525) + ' </a> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-ad-content> <a class="kargo-hover-optout VAR_BRANDING" href=https://www.kargo.com/privacy target=_blank> ' + r(9475) + " " + r(9262) + " </a> </div> </div> </div> " }, 9452: (t, e, r) => { t.exports = '<div class="kargo-ad-hover VAR_BRANDING"> <div class=kargo-ad-content> <a class="kargo-hover-optout VAR_BRANDING" href=https://www.kargo.com/privacy target=_blank> ' + r(9475) + " " + r(9262) + " </a> </div> </div> " }, 81: t => { t.exports = '<svg class=kargo-svg-advertisement xmlns=http://www.w3.org/2000/svg viewBox="0 0 108.96143 12.34375"> <text transform="translate(0 8.58)" font-size=10 fill=#AAAAAA font-family="Arial-BoldMT, Arial" font-weight=700 letter-spacing=.18em>ADVERTISEMENT</text> </svg> ' }, 9475: t => { t.exports = '<svg class=kargo-svg-bolt xmlns=http://www.w3.org/2000/svg viewBox="0 0 12.93951 18.88957"> <path d="M12.94 7.948H7.682L10.589 0 0 10.941h5.257L2.35 18.89 12.94 7.948z"/> </svg> ' }, 5822: t => { t.exports = '<?xml version="1.0" encoding="UTF-8"?> <svg class=by-kargo-svg-grey id=Layer_2 data-name="Layer 2" xmlns=http://www.w3.org/2000/svg viewBox="0 0 60.01 9.98"> <g id=Layer_1-2 data-name="Layer 1"> <g> <g fill=#abacab> <path d=m15.5,6.55c0,1.11-.76,1.93-2.31,1.93h-2.94V1.5h2.56c1.51,0,2.32.59,2.32,1.7,0,.63-.29,1.27-1.07,1.56h0c.92.24,1.44.86,1.44,1.79Zm-3.87-2.19h1.01c.56,0,1.07-.26,1.07-.83,0-.49-.34-.81-1.16-.81h-.92v1.64Zm2.4,2.02c0-.55-.41-.9-1.25-.9h-1.15v1.79h1.14c.75,0,1.26-.29,1.26-.89Z /> <path d=m22.01,1.5l-2.37,3.91v3.07h-1.42v-3.07l-2.35-3.91h1.61l1.45,2.55h.02l1.43-2.55h1.63Z /> <path d=m27.62,5.68l-.7.82v1.98h-1.4V1.5h1.4v3.08h0l2.46-3.08h1.78l-2.62,3.08,2.7,3.9h-1.73l-1.89-2.8h0Z /> <path d=m36.28,7.09h-2.73l-.48,1.4h-1.47l2.63-6.98h1.35l2.65,6.98h-1.47l-.48-1.4Zm-.41-1.18l-.95-2.74h-.02l-.94,2.74h1.91Z /> <path d=m42.98,8.48l-1.59-2.39h-.82v2.39h-1.39V1.5h2.69c1.71,0,2.47.98,2.47,2.32,0,1.12-.55,1.81-1.46,2.1l1.76,2.56h-1.66Zm-2.41-3.61h.98c.87,0,1.34-.43,1.34-1.08s-.46-1.06-1.28-1.06h-1.04v2.14Z /> <path d=m45.23,5c0-2.04,1.35-3.59,3.57-3.59,1,0,2.09.38,2.82,1.2l-1,.83c-.44-.41-1.04-.72-1.82-.72-1.17,0-2.1.85-2.1,2.28,0,1.28.82,2.28,2.16,2.28.51,0,.98-.12,1.44-.39v-1.03h-1.6v-1.18h2.95v3.01c-.64.51-1.7.86-2.79.86-2.05,0-3.63-1.31-3.63-3.55Z /> <path d=m52.77,4.99c0-2.07,1.47-3.58,3.62-3.58s3.61,1.45,3.61,3.58-1.52,3.57-3.61,3.57-3.62-1.5-3.62-3.57Zm5.77,0c0-1.32-.92-2.28-2.14-2.28-1.28,0-2.17,1.01-2.17,2.28s.89,2.28,2.17,2.28,2.14-.97,2.14-2.28Z /> </g> <g fill=#ff7500> <path d=m2.89,5.82s0,0,0,0c-.01.03-.03.07-.04.1-.08.23-.17.45-.25.68-.06.17-.13.33-.19.5-.07.19-.14.38-.21.58-.06.16-.12.32-.18.48-.06.16-.12.33-.18.49-.06.16-.12.32-.18.48-.07.19-.14.38-.21.57-.03.09-.07.19-.1.28,0,0,0,0,0,0,1.95-1.94,3.9-3.87,5.87-5.82h-.08c-.92,0-1.84,0-2.76,0-.02,0-.04,0-.06,0,0,0,0,0,0,0,0,0,0-.02,0-.02.07-.19.15-.38.22-.58.05-.13.1-.27.15-.4.05-.13.1-.26.15-.38.05-.14.11-.28.16-.42.06-.15.12-.31.18-.46.07-.18.14-.36.21-.54.07-.19.15-.38.22-.57.07-.19.15-.37.22-.56.03-.07.05-.15.08-.22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0-.01.01-.03.02-.04.04-.71.7-1.42,1.39-2.13,2.09C2.52,3.35,1.28,4.56.05,5.78c-.01.01-.03.03-.05.05h.07c.92,0,1.84,0,2.76,0,.02,0,.04,0,.06,0Z /> <path d=m5.93,0c-.02.07-.05.15-.08.22-.07.19-.14.37-.22.56-.07.19-.15.38-.22.57-.07.18-.14.36-.21.54-.06.15-.12.31-.18.46-.05.14-.11.28-.16.42-.05.13-.1.26-.15.38-.05.13-.1.27-.15.4-.07.19-.15.38-.22.58,0,0,0,.02,0,.02,0,0,0,0,0,0,.02,0,.04,0,.06,0,.92,0,1.84,0,2.76,0h.08c-1.96,1.95-3.91,3.88-5.87,5.82,0,0,0,0,0,0,.04-.09.07-.19.1-.28.07-.19.14-.38.21-.57.06-.16.12-.32.18-.48.06-.16.12-.33.18-.49.06-.16.12-.32.18-.48.07-.19.14-.38.21-.58.06-.17.13-.33.19-.5.08-.23.17-.45.25-.68.01-.03.03-.07.04-.1,0,0,0,0,0,0-.02,0-.04,0-.06,0-.92,0-1.84,0-2.76,0h-.07s.03-.03.05-.05c1.24-1.22,2.48-2.43,3.71-3.65.71-.7,1.42-1.39,2.13-2.09.01-.01.03-.02.04-.04h0Z /> <polygon points="5.93 0 5.93 0 5.93 0 5.93 0 5.93 0"/> <path d=m4.34,4.16s0,0,0,0c0,0,0,0,0,0Z /> <path d=m2.89,5.82s0,0,0,0c0,0,0,0,0,0Z /> </g> </g> </g> </svg>' }, 3742: t => { t.exports = '<?xml version="1.0" encoding="UTF-8"?> <svg class=by-kargo-svg-white id=Layer_2 data-name="Layer 2" xmlns=http://www.w3.org/2000/svg viewBox="0 0 60.01 9.98"> <g id=Layer_1-2 data-name="Layer 1"> <g> <g fill=#fff> <path d=m15.5,6.55c0,1.11-.76,1.93-2.31,1.93h-2.94V1.5h2.56c1.51,0,2.32.59,2.32,1.7,0,.63-.29,1.27-1.07,1.56h0c.92.24,1.44.86,1.44,1.79Zm-3.87-2.19h1.01c.56,0,1.07-.26,1.07-.83,0-.49-.34-.81-1.16-.81h-.92v1.64Zm2.4,2.02c0-.55-.41-.9-1.25-.9h-1.15v1.79h1.14c.75,0,1.26-.29,1.26-.89Z /> <path d=m22.01,1.5l-2.37,3.91v3.07h-1.42v-3.07l-2.35-3.91h1.61l1.45,2.55h.02l1.43-2.55h1.63Z /> <path d=m27.62,5.68l-.7.82v1.98h-1.4V1.5h1.4v3.08h0l2.46-3.08h1.78l-2.62,3.08,2.7,3.9h-1.73l-1.89-2.8h0Z /> <path d=m36.28,7.09h-2.73l-.48,1.4h-1.47l2.63-6.98h1.35l2.65,6.98h-1.47l-.48-1.4Zm-.41-1.18l-.95-2.74h-.02l-.94,2.74h1.91Z /> <path d=m42.98,8.48l-1.59-2.39h-.82v2.39h-1.39V1.5h2.69c1.71,0,2.47.98,2.47,2.32,0,1.12-.55,1.81-1.46,2.1l1.76,2.56h-1.66Zm-2.41-3.61h.98c.87,0,1.34-.43,1.34-1.08s-.46-1.06-1.28-1.06h-1.04v2.14Z /> <path d=m45.23,5c0-2.04,1.35-3.59,3.57-3.59,1,0,2.09.38,2.82,1.2l-1,.83c-.44-.41-1.04-.72-1.82-.72-1.17,0-2.1.85-2.1,2.28,0,1.28.82,2.28,2.16,2.28.51,0,.98-.12,1.44-.39v-1.03h-1.6v-1.18h2.95v3.01c-.64.51-1.7.86-2.79.86-2.05,0-3.63-1.31-3.63-3.55Z /> <path d=m52.77,4.99c0-2.07,1.47-3.58,3.62-3.58s3.61,1.45,3.61,3.58-1.52,3.57-3.61,3.57-3.62-1.5-3.62-3.57Zm5.77,0c0-1.32-.92-2.28-2.14-2.28-1.28,0-2.17,1.01-2.17,2.28s.89,2.28,2.17,2.28,2.14-.97,2.14-2.28Z /> </g> <g fill=#ff7500> <path d=m2.89,5.82s0,0,0,0c-.01.03-.03.07-.04.1-.08.23-.17.45-.25.68-.06.17-.13.33-.19.5-.07.19-.14.38-.21.58-.06.16-.12.32-.18.48-.06.16-.12.33-.18.49-.06.16-.12.32-.18.48-.07.19-.14.38-.21.57-.03.09-.07.19-.1.28,0,0,0,0,0,0,1.95-1.94,3.9-3.87,5.87-5.82h-.08c-.92,0-1.84,0-2.76,0-.02,0-.04,0-.06,0,0,0,0,0,0,0,0,0,0-.02,0-.02.07-.19.15-.38.22-.58.05-.13.1-.27.15-.4.05-.13.1-.26.15-.38.05-.14.11-.28.16-.42.06-.15.12-.31.18-.46.07-.18.14-.36.21-.54.07-.19.15-.38.22-.57.07-.19.15-.37.22-.56.03-.07.05-.15.08-.22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0-.01.01-.03.02-.04.04-.71.7-1.42,1.39-2.13,2.09C2.52,3.35,1.28,4.56.05,5.78c-.01.01-.03.03-.05.05h.07c.92,0,1.84,0,2.76,0,.02,0,.04,0,.06,0Z /> <path d=m5.93,0c-.02.07-.05.15-.08.22-.07.19-.14.37-.22.56-.07.19-.15.38-.22.57-.07.18-.14.36-.21.54-.06.15-.12.31-.18.46-.05.14-.11.28-.16.42-.05.13-.1.26-.15.38-.05.13-.1.27-.15.4-.07.19-.15.38-.22.58,0,0,0,.02,0,.02,0,0,0,0,0,0,.02,0,.04,0,.06,0,.92,0,1.84,0,2.76,0h.08c-1.96,1.95-3.91,3.88-5.87,5.82,0,0,0,0,0,0,.04-.09.07-.19.1-.28.07-.19.14-.38.21-.57.06-.16.12-.32.18-.48.06-.16.12-.33.18-.49.06-.16.12-.32.18-.48.07-.19.14-.38.21-.58.06-.17.13-.33.19-.5.08-.23.17-.45.25-.68.01-.03.03-.07.04-.1,0,0,0,0,0,0-.02,0-.04,0-.06,0-.92,0-1.84,0-2.76,0h-.07s.03-.03.05-.05c1.24-1.22,2.48-2.43,3.71-3.65.71-.7,1.42-1.39,2.13-2.09.01-.01.03-.02.04-.04h0Z /> <polygon points="5.93 0 5.93 0 5.93 0 5.93 0 5.93 0"/> <path d=m4.34,4.16s0,0,0,0c0,0,0,0,0,0Z /> <path d=m2.89,5.82s0,0,0,0c0,0,0,0,0,0Z /> </g> </g> </g> </svg>' }, 9525: t => { t.exports = '<svg class=kargo-svg-close-no-border xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48"> <path d="M31.75 32.75a.997.997 0 0 1-.707-.293l-15.75-15.75a1 1 0 0 1 1.414-1.414l15.75 15.75a1 1 0 0 1-.707 1.707z"/> <path d="M16 32.75a1 1 0 0 1-.707-1.707l15.75-15.75a1 1 0 0 1 1.414 1.414l-15.75 15.75a.997.997 0 0 1-.707.293z"/> </svg> ' }, 86: t => { t.exports = '<svg class=kargo-svg-close xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48"> <path d="M24 2A22 22 0 1 1 2 24 22.025 22.025 0 0 1 24 2m0-2a24 24 0 1 0 24 24A24 24 0 0 0 24 0z"/> <path d="M31.75 32.75a.997.997 0 0 1-.707-.293l-15.75-15.75a1 1 0 0 1 1.414-1.414l15.75 15.75a1 1 0 0 1-.707 1.707z"/> <path d="M16 32.75a1 1 0 0 1-.707-1.707l15.75-15.75a1 1 0 0 1 1.414 1.414l-15.75 15.75a.997.997 0 0 1-.707.293z"/> </svg> ' }, 2019: t => { t.exports = '<svg class=kargo-svg-loader xmlns=http://www.w3.org/2000/svg width=39 height=39 viewBox="0 0 39 39" stroke=#fff> <g transform="translate(1 1)" stroke-width=3 fill=none fill-rule=evenodd> <circle stroke-opacity=.5 cx=18.5 cy=18.5 r=18 stroke=#dee2e6 /> <path d="M36.473 19.65C37.08 9.664 29.536 1.13 19.65.527" stroke=#FF7500> <animateTransform attributeName=transform type=rotate from="0 18.5 18.5" to="360 18.5 18.5" dur=1s repeatCount=indefinite /> </path> </g> </svg> ' }, 9262: t => { t.exports = '<svg class=kargo-svg-opt-out xmlns=http://www.w3.org/2000/svg viewBox="0 0 22 22"> <rect x=9.528 y=10.141 width=2.943 height=7.679 rx=1.472 ry=1.472 /> <circle cx=11 cy=6.076 r=1.897 /> <path d="M11 1.897A9.103 9.103 0 1 1 1.897 11 9.114 9.114 0 0 1 11 1.897M11 0a11 11 0 1 0 11 11A11 11 0 0 0 11 0z"/> </svg> ' }, 7217: t => { t.exports = '<svg class=kargo-svg-close xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48" width=100 height=100> <circle cx=24 cy=24 r=22 fill=#696969 stroke=#FFFFFF stroke-width=4 /> <line x1=16 y1=17 x2=31.75 y2=32.75 stroke=#FFFFFF stroke-width=4 stroke-linecap=round /> <line x1=31.75 y1=17 x2=16 y2=32.75 stroke=#FFFFFF stroke-width=4 stroke-linecap=round /> </svg>' }, 4234: (__unused_webpack_module, __webpack_exports__, __webpack_require__) => { "use strict"; function convertNodeListToArray(t) { return Array.prototype.slice.call(t) } function convertStringToFunction(str) { return eval("(function() {".concat(str, "})")) } function executeStringFunction(t, e) { return convertStringToFunction(e).apply(t) } function replaceSmartCharacters(t) { return t.replace(/[\u2018\u2019]/g, "'").replace(/[\u201c\u201d]/g, '"').replace(/[\u2014]/g, "--") } function escapeRegexString(t) { return t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") } function fireCallbacks(t, e, r) { void 0 === r && (r = []); for (var n = 0; n < e.length; n += 1)e[n].apply(t, r) } function getSafeWindowVar(t, e) { var r = null; if (t && e && e.length) { r = t; for (var n = e.split("."), i = 0; i < n.length; i++)try { if (!r.hasOwnProperty(n[i])) { r = null; break } r = r[n[i]] } catch (t) { return null } } return r } function generateUUID(t) { var e; e = t.crypto && t.crypto.getRandomValues ? function () { var e = new Uint32Array(4), r = new Array(16); t.crypto.getRandomValues(e); for (var n = 0; n < 16; n++)r[n] = e[n >> 2] >>> 8 * (3 & n) & 255; return r } : function () { var e = 0, r = new Array(16), n = new PRNG(function () { var e, r, n, i, o, a; for (o = [], r = n = 0, i = (a = (new Date).getTime() + Math.random().toString() + t.location.href + t.document.cookie).length; n < i; r = ++n)e = a[r], o.push(e.charCodeAt(0)); return o }()), i = 0; for (i = 0; i < 16; i++)e = 68719476736 * n.random(), r[i] = e >>> ((3 & i) << 3) & 255; return r }; for (var r = [], n = 0; n < 256; n++)r[n] = (n + 256).toString(16).substr(1); var i = e(); i[6] = 15 & i[6] | 64, i[8] = 63 & i[8] | 128; var o = function (t) { var e = 0, n = r; return n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] }(i); return o } function isArray(t) { return t && "[object Array]" === Object.prototype.toString.call(t) } function isDocument(t) { return !(!t || !t.nodeType || 9 !== t.nodeType) } function isElement(t) { return !(!t || !t.nodeType || 1 !== t.nodeType) } function isFunction(t) { return t && "[object Function]" === Object.prototype.toString.call(t) } function isObject(t) { return t && t === Object(t) && !isArray(t) && !isFunction(t) } function isWindow(t) { return !!(t && t.document && t.location && t.alert && t.setInterval) } function getObjectSize(t) { var e = 0; if (isObject(t)) for (var r in t) t.hasOwnProperty(r) && e++; return e } function leftPad(t, e, r) { for (t += ""; t.length < e;)t = r + t; return t } function merge() { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var r = !1 !== arguments[arguments.length - 1], n = function (t, e) { if ("object" != typeof e || null === e) return t; if (!isElement(e) && !isWindow(e) && !isDocument(e)) for (var i in e) { var o = e[i]; e.hasOwnProperty(i) && void 0 !== o && (!r && t[i] || (isElement(o) || isWindow(o) || isDocument(o) || "object" != typeof o || null === o ? t[i] = o : "object" != typeof t[i] || null === t[i] ? t[i] = n(Array.isArray(o) ? [] : {}, o) : Array.isArray(t[i]) && Array.isArray(o) ? t[i] = t[i].concat(o) : n(t[i], o))) } return t }, i = arguments[0] || {}; if (!i || i !== Object(i)) return i; for (var o = 1; o < arguments.length; o++)n(i, arguments[o]); return i } function spliceString(t, e, r) { return t.slice(0, r) + e + t.slice(r, t.length) } function safeStringReplace(t, e, r) { return "string" != typeof r ? t.replace(e, r) : t.replace(e, r.replace(/\$/g, "$$$$")) } function setIntervalWithTimeout(t, e, r, n) { var i = !1, o = t.setInterval((function () { i ? t.clearInterval(o) : e() }), r); return t.setTimeout((function () { i = !0 }), n), o } __webpack_require__.d(__webpack_exports__, { cy: () => isArray, h1: () => merge, xF: () => getSafeWindowVar }) }, 3629: (__unused_webpack_module, __webpack_exports__, __webpack_require__) => { "use strict"; __webpack_require__.d(__webpack_exports__, { AF: () => escapeRegexString, PX: () => leftPad, _o: () => spliceString, a: () => replaceSmartCharacters, cy: () => isArray, h1: () => merge, lP: () => fireCallbacks, lk: () => generateUUID, xF: () => getSafeWindowVar, xP: () => safeStringReplace, zH: () => executeStringFunction }); var _prng__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9775); function convertNodeListToArray(t) { return Array.prototype.slice.call(t) } function convertStringToFunction(str) { return eval("(function() {".concat(str, "})")) } function executeStringFunction(t, e) { return convertStringToFunction(e).apply(t) } function replaceSmartCharacters(t) { return t.replace(/[\u2018\u2019]/g, "'").replace(/[\u201c\u201d]/g, '"').replace(/[\u2014]/g, "--") } function escapeRegexString(t) { return t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") } function fireCallbacks(t, e, r) { void 0 === r && (r = []); for (var n = 0; n < e.length; n += 1)e[n].apply(t, r) } function getSafeWindowVar(t, e) { var r = null; if (t && e && e.length) { r = t; for (var n = e.split("."), i = 0; i < n.length; i++)try { if (!r.hasOwnProperty(n[i])) { r = null; break } r = r[n[i]] } catch (t) { return null } } return r } function generateUUID(t) { var e; e = t.crypto && t.crypto.getRandomValues ? function () { var e = new Uint32Array(4), r = new Array(16); t.crypto.getRandomValues(e); for (var n = 0; n < 16; n++)r[n] = e[n >> 2] >>> 8 * (3 & n) & 255; return r } : function () { var e = 0, r = new Array(16), n = new _prng__WEBPACK_IMPORTED_MODULE_0__.c(function () { var e, r, n, i, o, a; for (o = [], r = n = 0, i = (a = (new Date).getTime() + Math.random().toString() + t.location.href + t.document.cookie).length; n < i; r = ++n)e = a[r], o.push(e.charCodeAt(0)); return o }()), i = 0; for (i = 0; i < 16; i++)e = 68719476736 * n.random(), r[i] = e >>> ((3 & i) << 3) & 255; return r }; for (var r = [], n = 0; n < 256; n++)r[n] = (n + 256).toString(16).substr(1); var i = e(); i[6] = 15 & i[6] | 64, i[8] = 63 & i[8] | 128; var o = function (t) { var e = 0, n = r; return n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + "-" + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] + n[t[e++]] }(i); return o } function isArray(t) { return t && "[object Array]" === Object.prototype.toString.call(t) } function isDocument(t) { return !(!t || !t.nodeType || 9 !== t.nodeType) } function isElement(t) { return !(!t || !t.nodeType || 1 !== t.nodeType) } function isFunction(t) { return t && "[object Function]" === Object.prototype.toString.call(t) } function isObject(t) { return t && t === Object(t) && !isArray(t) && !isFunction(t) } function isWindow(t) { return !!(t && t.document && t.location && t.alert && t.setInterval) } function getObjectSize(t) { var e = 0; if (isObject(t)) for (var r in t) t.hasOwnProperty(r) && e++; return e } function leftPad(t, e, r) { for (t += ""; t.length < e;)t = r + t; return t } function merge() { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var r = !1 !== arguments[arguments.length - 1], n = function (t, e) { if ("object" != typeof e || null === e) return t; if (!isElement(e) && !isWindow(e) && !isDocument(e)) for (var i in e) { var o = e[i]; e.hasOwnProperty(i) && void 0 !== o && (!r && t[i] || (isElement(o) || isWindow(o) || isDocument(o) || "object" != typeof o || null === o ? t[i] = o : "object" != typeof t[i] || null === t[i] ? t[i] = n(Array.isArray(o) ? [] : {}, o) : Array.isArray(t[i]) && Array.isArray(o) ? t[i] = t[i].concat(o) : n(t[i], o))) } return t }, i = arguments[0] || {}; if (!i || i !== Object(i)) return i; for (var o = 1; o < arguments.length; o++)n(i, arguments[o]); return i } function spliceString(t, e, r) { return t.slice(0, r) + e + t.slice(r, t.length) } function safeStringReplace(t, e, r) { return "string" != typeof r ? t.replace(e, r) : t.replace(e, r.replace(/\$/g, "$$$$")) } function setIntervalWithTimeout(t, e, r, n) { var i = !1, o = t.setInterval((function () { i ? t.clearInterval(o) : e() }), r); return t.setTimeout((function () { i = !0 }), n), o } }, 9775: (t, e, r) => { "use strict"; r.d(e, { c: () => n }); var n = function () { function t(t) { t || (t = [(new Date).getTime()]), this.N = 624, this.M = 397, this.MATRIX_A = 2567483615, this.UPPER_MASK = 2147483648, this.LOWER_MASK = 2147483647, this.mt = new Array(this.N), this.mti = this.N + 1, this.initByArray(t) } return t.prototype.initByInt = function (t) { this.mt[0] = t >>> 0; var e = []; for (this.mti = 1; this.mti < this.N; this.mti++) { var r = this.mt[this.mti - 1] ^ this.mt[this.mti - 1] >>> 30; this.mt[this.mti] = (1812433253 * ((4294901760 & r) >>> 16) << 16) + 1812433253 * (65535 & r) + this.mti, e.push(this.mt[this.mti] >>>= 0) } return e }, t.prototype.initByArray = function (t) { this.initByInt(19650218); for (var e = 1, r = 0, n = t.length, i = this.N > n ? this.N : n; i; i--) { var o = this.mt[e - 1] ^ this.mt[e - 1] >>> 30; this.mt[e] = (this.mt[e] ^ (1664525 * ((4294901760 & o) >>> 16) << 16) + 1664525 * (65535 & o)) + t[r] + r, this.mt[e] >>>= 0, r++, ++e >= this.N && (this.mt[0] = this.mt[this.N - 1], e = 1), r >= n && (r = 0) } for (i = this.N - 1; i; i--) { o = this.mt[e - 1] ^ this.mt[e - 1] >>> 30; this.mt[e] = (this.mt[e] ^ (1566083941 * ((4294901760 & o) >>> 16) << 16) + 1566083941 * (65535 & o)) - e, this.mt[e] >>>= 0, ++e >= this.N && (this.mt[0] = this.mt[this.N - 1], e = 1) } this.mt[0] = 2147483648 }, t.prototype.genRandInt32 = function () { var t, e = new Array(0, this.MATRIX_A); if (this.mti >= this.N) { var r = void 0; for (this.mti, this.N, r = 0; r < this.N - this.M; r++)t = this.mt[r] & this.UPPER_MASK | this.mt[r + 1] & this.LOWER_MASK, this.mt[r] = this.mt[r + this.M] ^ t >>> 1 ^ e[1 & t]; for (; r < this.N - 1; r++)t = this.mt[r] & this.UPPER_MASK | this.mt[r + 1] & this.LOWER_MASK, this.mt[r] = this.mt[r + (this.M - this.N)] ^ t >>> 1 ^ e[1 & t]; t = this.mt[this.N - 1] & this.UPPER_MASK | this.mt[0] & this.LOWER_MASK, this.mt[this.N - 1] = this.mt[this.M - 1] ^ t >>> 1 ^ e[1 & t], this.mti = 0 } return t = this.mt[this.mti++], t ^= t >>> 11, t ^= t << 7 & 2636928640, t ^= t << 15 & 4022730752, (t ^= t >>> 18) >>> 0 }, t.prototype.genRandInt31 = function () { return this.genRandInt32() >>> 1 }, t.prototype.random = function () { return this.genRandInt32() * (1 / 4294967296) }, t.prototype.genRandRes53 = function () { return (67108864 * (this.genRandInt32() >>> 5) + (this.genRandInt32() >>> 6)) * (1 / 9007199254740992) }, t }() }, 1364: t => { "use strict"; t.exports = function (t) { var e = []; return e.toString = function () { return this.map((function (e) { var r = function (t, e) { var r = t[1] || "", n = t[3]; if (!n) return r; if (e && "function" == typeof btoa) { var i = (a = n, s = btoa(unescape(encodeURIComponent(JSON.stringify(a)))), c = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s), "/*# ".concat(c, " */")), o = n.sources.map((function (t) { return "/*# sourceURL=".concat(n.sourceRoot || "").concat(t, " */") })); return [r].concat(o).concat([i]).join("\n") } var a, s, c; return [r].join("\n") }(e, t); return e[2] ? "@media ".concat(e[2], " {").concat(r, "}") : r })).join("") }, e.i = function (t, r, n) { "string" == typeof t && (t = [[null, t, ""]]); var i = {}; if (n) for (var o = 0; o < this.length; o++) { var a = this[o][0]; null != a && (i[a] = !0) } for (var s = 0; s < t.length; s++) { var c = [].concat(t[s]); n && i[c[0]] || (r && (c[2] ? c[2] = "".concat(r, " and ").concat(c[2]) : c[2] = r), e.push(c)) } }, e } }, 8188: (t, e, r) => { var n = "__lodash_hash_undefined__", i = "[object Function]", o = "[object GeneratorFunction]", a = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, s = /^\w*$/, c = /^\./, l = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, u = /\\(\\)?/g, h = /^\[object .+?Constructor\]$/, d = "object" == typeof r.g && r.g && r.g.Object === Object && r.g, g = "object" == typeof self && self && self.Object === Object && self, p = d || g || Function("return this")(); var f, v = Array.prototype, m = Function.prototype, k = Object.prototype, y = p["__core-js_shared__"], b = (f = /[^.]+$/.exec(y && y.keys && y.keys.IE_PROTO || "")) ? "Symbol(src)_1." + f : "", w = m.toString, _ = k.hasOwnProperty, A = k.toString, C = RegExp("^" + w.call(_).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), x = p.Symbol, E = v.splice, I = F(p, "Map"), O = F(Object, "create"), D = x ? x.prototype : void 0, S = D ? D.toString : void 0; function R(t) { var e = -1, r = t ? t.length : 0; for (this.clear(); ++e < r;) { var n = t[e]; this.set(n[0], n[1]) } } function T(t) { var e = -1, r = t ? t.length : 0; for (this.clear(); ++e < r;) { var n = t[e]; this.set(n[0], n[1]) } } function V(t) { var e = -1, r = t ? t.length : 0; for (this.clear(); ++e < r;) { var n = t[e]; this.set(n[0], n[1]) } } function L(t, e) { for (var r, n, i = t.length; i--;)if ((r = t[i][0]) === (n = e) || r != r && n != n) return i; return -1 } function P(t, e) { var r; e = function (t, e) { if (H(t)) return !1; var r = typeof t; if ("number" == r || "symbol" == r || "boolean" == r || null == t || q(t)) return !0; return s.test(t) || !a.test(t) || null != e && t in Object(e) }(e, t) ? [e] : H(r = e) ? r : U(r); for (var n = 0, i = e.length; null != t && n < i;)t = t[K(e[n++])]; return n && n == i ? t : void 0 } function M(t) { if (!B(t) || (e = t, b && b in e)) return !1; var e, r = function (t) { var e = B(t) ? A.call(t) : ""; return e == i || e == o }(t) || function (t) { var e = !1; if (null != t && "function" != typeof t.toString) try { e = !!(t + "") } catch (t) { } return e }(t) ? C : h; return r.test(function (t) { if (null != t) { try { return w.call(t) } catch (t) { } try { return t + "" } catch (t) { } } return "" }(t)) } function N(t, e) { var r, n, i = t.__data__; return ("string" == (n = typeof (r = e)) || "number" == n || "symbol" == n || "boolean" == n ? "__proto__" !== r : null === r) ? i["string" == typeof e ? "string" : "hash"] : i.map } function F(t, e) { var r = function (t, e) { return null == t ? void 0 : t[e] }(t, e); return M(r) ? r : void 0 } R.prototype.clear = function () { this.__data__ = O ? O(null) : {} }, R.prototype.delete = function (t) { return this.has(t) && delete this.__data__[t] }, R.prototype.get = function (t) { var e = this.__data__; if (O) { var r = e[t]; return r === n ? void 0 : r } return _.call(e, t) ? e[t] : void 0 }, R.prototype.has = function (t) { var e = this.__data__; return O ? void 0 !== e[t] : _.call(e, t) }, R.prototype.set = function (t, e) { return this.__data__[t] = O && void 0 === e ? n : e, this }, T.prototype.clear = function () { this.__data__ = [] }, T.prototype.delete = function (t) { var e = this.__data__, r = L(e, t); return !(r < 0) && (r == e.length - 1 ? e.pop() : E.call(e, r, 1), !0) }, T.prototype.get = function (t) { var e = this.__data__, r = L(e, t); return r < 0 ? void 0 : e[r][1] }, T.prototype.has = function (t) { return L(this.__data__, t) > -1 }, T.prototype.set = function (t, e) { var r = this.__data__, n = L(r, t); return n < 0 ? r.push([t, e]) : r[n][1] = e, this }, V.prototype.clear = function () { this.__data__ = { hash: new R, map: new (I || T), string: new R } }, V.prototype.delete = function (t) { return N(this, t).delete(t) }, V.prototype.get = function (t) { return N(this, t).get(t) }, V.prototype.has = function (t) { return N(this, t).has(t) }, V.prototype.set = function (t, e) { return N(this, t).set(t, e), this }; var U = j((function (t) { var e; t = null == (e = t) ? "" : function (t) { if ("string" == typeof t) return t; if (q(t)) return S ? S.call(t) : ""; var e = t + ""; return "0" == e && 1 / t == -1 / 0 ? "-0" : e }(e); var r = []; return c.test(t) && r.push(""), t.replace(l, (function (t, e, n, i) { r.push(n ? i.replace(u, "$1") : e || t) })), r })); function K(t) { if ("string" == typeof t || q(t)) return t; var e = t + ""; return "0" == e && 1 / t == -1 / 0 ? "-0" : e } function j(t, e) { if ("function" != typeof t || e && "function" != typeof e) throw new TypeError("Expected a function"); var r = function () { var n = arguments, i = e ? e.apply(this, n) : n[0], o = r.cache; if (o.has(i)) return o.get(i); var a = t.apply(this, n); return r.cache = o.set(i, a), a }; return r.cache = new (j.Cache || V), r } j.Cache = V; var H = Array.isArray; function B(t) { var e = typeof t; return !!t && ("object" == e || "function" == e) } function q(t) { return "symbol" == typeof t || function (t) { return !!t && "object" == typeof t }(t) && "[object Symbol]" == A.call(t) } t.exports = function (t, e, r) { var n = null == t ? void 0 : P(t, e); return void 0 === n ? r : n } }, 6711: (t, e, r) => { var n = r(9107).Symbol; t.exports = n }, 14: t => { t.exports = function (t, e) { for (var r = -1, n = null == t ? 0 : t.length, i = Array(n); ++r < n;)i[r] = e(t[r], r, t); return i } }, 5528: t => { t.exports = function (t, e, r, n) { var i = -1, o = null == t ? 0 : t.length; for (n && o && (r = t[++i]); ++i < o;)r = e(r, t[i], i, t); return r } }, 6479: t => { var e = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g; t.exports = function (t) { return t.match(e) || [] } }, 6522: (t, e, r) => { var n = r(6711), i = r(905), o = r(2588), a = n ? n.toStringTag : void 0; t.exports = function (t) { return null == t ? void 0 === t ? "[object Undefined]" : "[object Null]" : a && a in Object(t) ? i(t) : o(t) } }, 9390: t => { t.exports = function (t) { return function (e) { return null == t ? void 0 : t[e] } } }, 8354: (t, e, r) => { var n = r(6711), i = r(14), o = r(2003), a = r(6596), s = n ? n.prototype : void 0, c = s ? s.toString : void 0; t.exports = function t(e) { if ("string" == typeof e) return e; if (o(e)) return i(e, t) + ""; if (a(e)) return c ? c.call(e) : ""; var r = e + ""; return "0" == r && 1 / e == -1 / 0 ? "-0" : r } }, 9449: (t, e, r) => { var n = r(5528), i = r(8426), o = r(4715), a = RegExp("['’]", "g"); t.exports = function (t) { return function (e) { return n(o(i(e).replace(a, "")), t, "") } } }, 6385: (t, e, r) => { var n = r(9390)({ À: "A", Á: "A", Â: "A", Ã: "A", Ä: "A", Å: "A", à: "a", á: "a", â: "a", ã: "a", ä: "a", å: "a", Ç: "C", ç: "c", Ð: "D", ð: "d", È: "E", É: "E", Ê: "E", Ë: "E", è: "e", é: "e", ê: "e", ë: "e", Ì: "I", Í: "I", Î: "I", Ï: "I", ì: "i", í: "i", î: "i", ï: "i", Ñ: "N", ñ: "n", Ò: "O", Ó: "O", Ô: "O", Õ: "O", Ö: "O", Ø: "O", ò: "o", ó: "o", ô: "o", õ: "o", ö: "o", ø: "o", Ù: "U", Ú: "U", Û: "U", Ü: "U", ù: "u", ú: "u", û: "u", ü: "u", Ý: "Y", ý: "y", ÿ: "y", Æ: "Ae", æ: "ae", Þ: "Th", þ: "th", ß: "ss", Ā: "A", Ă: "A", Ą: "A", ā: "a", ă: "a", ą: "a", Ć: "C", Ĉ: "C", Ċ: "C", Č: "C", ć: "c", ĉ: "c", ċ: "c", č: "c", Ď: "D", Đ: "D", ď: "d", đ: "d", Ē: "E", Ĕ: "E", Ė: "E", Ę: "E", Ě: "E", ē: "e", ĕ: "e", ė: "e", ę: "e", ě: "e", Ĝ: "G", Ğ: "G", Ġ: "G", Ģ: "G", ĝ: "g", ğ: "g", ġ: "g", ģ: "g", Ĥ: "H", Ħ: "H", ĥ: "h", ħ: "h", Ĩ: "I", Ī: "I", Ĭ: "I", Į: "I", İ: "I", ĩ: "i", ī: "i", ĭ: "i", į: "i", ı: "i", Ĵ: "J", ĵ: "j", Ķ: "K", ķ: "k", ĸ: "k", Ĺ: "L", Ļ: "L", Ľ: "L", Ŀ: "L", Ł: "L", ĺ: "l", ļ: "l", ľ: "l", ŀ: "l", ł: "l", Ń: "N", Ņ: "N", Ň: "N", Ŋ: "N", ń: "n", ņ: "n", ň: "n", ŋ: "n", Ō: "O", Ŏ: "O", Ő: "O", ō: "o", ŏ: "o", ő: "o", Ŕ: "R", Ŗ: "R", Ř: "R", ŕ: "r", ŗ: "r", ř: "r", Ś: "S", Ŝ: "S", Ş: "S", Š: "S", ś: "s", ŝ: "s", ş: "s", š: "s", Ţ: "T", Ť: "T", Ŧ: "T", ţ: "t", ť: "t", ŧ: "t", Ũ: "U", Ū: "U", Ŭ: "U", Ů: "U", Ű: "U", Ų: "U", ũ: "u", ū: "u", ŭ: "u", ů: "u", ű: "u", ų: "u", Ŵ: "W", ŵ: "w", Ŷ: "Y", ŷ: "y", Ÿ: "Y", Ź: "Z", Ż: "Z", Ž: "Z", ź: "z", ż: "z", ž: "z", Ĳ: "IJ", ĳ: "ij", Œ: "Oe", œ: "oe", ŉ: "'n", ſ: "s" }); t.exports = n }, 2718: (t, e, r) => { var n = "object" == typeof r.g && r.g && r.g.Object === Object && r.g; t.exports = n }, 905: (t, e, r) => { var n = r(6711), i = Object.prototype, o = i.hasOwnProperty, a = i.toString, s = n ? n.toStringTag : void 0; t.exports = function (t) { var e = o.call(t, s), r = t[s]; try { t[s] = void 0; var n = !0 } catch (t) { } var i = a.call(t); return n && (e ? t[s] = r : delete t[s]), i } }, 784: t => { var e = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/; t.exports = function (t) { return e.test(t) } }, 2588: t => { var e = Object.prototype.toString; t.exports = function (t) { return e.call(t) } }, 9107: (t, e, r) => { var n = r(2718), i = "object" == typeof self && self && self.Object === Object && self, o = n || i || Function("return this")(); t.exports = o }, 567: t => { var e = "\\ud800-\\udfff", r = "\\u2700-\\u27bf", n = "a-z\\xdf-\\xf6\\xf8-\\xff", i = "A-Z\\xc0-\\xd6\\xd8-\\xde", o = "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", a = "[" + o + "]", s = "\\d+", c = "[" + r + "]", l = "[" + n + "]", u = "[^" + e + o + s + r + n + i + "]", h = "(?:\\ud83c[\\udde6-\\uddff]){2}", d = "[\\ud800-\\udbff][\\udc00-\\udfff]", g = "[" + i + "]", p = "(?:" + l + "|" + u + ")", f = "(?:" + g + "|" + u + ")", v = "(?:['’](?:d|ll|m|re|s|t|ve))?", m = "(?:['’](?:D|LL|M|RE|S|T|VE))?", k = "(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?", y = "[\\ufe0e\\ufe0f]?", b = y + k + ("(?:\\u200d(?:" + ["[^" + e + "]", h, d].join("|") + ")" + y + k + ")*"), w = "(?:" + [c, h, d].join("|") + ")" + b, _ = RegExp([g + "?" + l + "+" + v + "(?=" + [a, g, "$"].join("|") + ")", f + "+" + m + "(?=" + [a, g + p, "$"].join("|") + ")", g + "?" + p + "+" + v, g + "+" + m, "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", s, w].join("|"), "g"); t.exports = function (t) { return t.match(_) || [] } }, 8426: (t, e, r) => { var n = r(6385), i = r(7060), o = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, a = RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]", "g"); t.exports = function (t) { return (t = i(t)) && t.replace(o, n).replace(a, "") } }, 2003: t => { var e = Array.isArray; t.exports = e }, 2620: t => { t.exports = function (t) { return null != t && "object" == typeof t } }, 6596: (t, e, r) => { var n = r(6522), i = r(2620); t.exports = function (t) { return "symbol" == typeof t || i(t) && "[object Symbol]" == n(t) } }, 8275: (t, e, r) => { var n = r(9449)((function (t, e, r) { return t + (r ? "-" : "") + e.toLowerCase() })); t.exports = n }, 7060: (t, e, r) => { var n = r(8354); t.exports = function (t) { return null == t ? "" : n(t) } }, 4715: (t, e, r) => { var n = r(6479), i = r(784), o = r(7060), a = r(567); t.exports = function (t, e, r) { return t = o(t), void 0 === (e = r ? void 0 : e) ? i(t) ? a(t) : n(t) : t.match(e) || [] } }, 3697: t => { for (var e = [], r = 0; r < 256; ++r)e[r] = (r + 256).toString(16).substr(1); t.exports = function (t, r) { var n = r || 0, i = e; return [i[t[n++]], i[t[n++]], i[t[n++]], i[t[n++]], "-", i[t[n++]], i[t[n++]], "-", i[t[n++]], i[t[n++]], "-", i[t[n++]], i[t[n++]], "-", i[t[n++]], i[t[n++]], i[t[n++]], i[t[n++]], i[t[n++]], i[t[n++]]].join("") } }, 7240: t => { var e = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto); if (e) { var r = new Uint8Array(16); t.exports = function () { return e(r), r } } else { var n = new Array(16); t.exports = function () { for (var t, e = 0; e < 16; e++)3 & e || (t = 4294967296 * Math.random()), n[e] = t >>> ((3 & e) << 3) & 255; return n } } }, 7918: t => { "use strict"; function e(t, e, r, n) { switch (t) { case 0: return e & r ^ ~e & n; case 1: case 3: return e ^ r ^ n; case 2: return e & r ^ e & n ^ r & n } } function r(t, e) { return t << e | t >>> 32 - e } t.exports = function (t) { var n = [1518500249, 1859775393, 2400959708, 3395469782], i = [1732584193, 4023233417, 2562383102, 271733878, 3285377520]; if ("string" == typeof t) { var o = unescape(encodeURIComponent(t)); t = new Array(o.length); for (var a = 0; a < o.length; a++)t[a] = o.charCodeAt(a) } t.push(128); var s = t.length / 4 + 2, c = Math.ceil(s / 16), l = new Array(c); for (a = 0; a < c; a++) { l[a] = new Array(16); for (var u = 0; u < 16; u++)l[a][u] = t[64 * a + 4 * u] << 24 | t[64 * a + 4 * u + 1] << 16 | t[64 * a + 4 * u + 2] << 8 | t[64 * a + 4 * u + 3] } for (l[c - 1][14] = 8 * (t.length - 1) / Math.pow(2, 32), l[c - 1][14] = Math.floor(l[c - 1][14]), l[c - 1][15] = 8 * (t.length - 1) & 4294967295, a = 0; a < c; a++) { for (var h = new Array(80), d = 0; d < 16; d++)h[d] = l[a][d]; for (d = 16; d < 80; d++)h[d] = r(h[d - 3] ^ h[d - 8] ^ h[d - 14] ^ h[d - 16], 1); var g = i[0], p = i[1], f = i[2], v = i[3], m = i[4]; for (d = 0; d < 80; d++) { var k = Math.floor(d / 20), y = r(g, 5) + e(k, p, f, v) + m + n[k] + h[d] >>> 0; m = v, v = f, f = r(p, 30) >>> 0, p = g, g = y } i[0] = i[0] + g >>> 0, i[1] = i[1] + p >>> 0, i[2] = i[2] + f >>> 0, i[3] = i[3] + v >>> 0, i[4] = i[4] + m >>> 0 } return [i[0] >> 24 & 255, i[0] >> 16 & 255, i[0] >> 8 & 255, 255 & i[0], i[1] >> 24 & 255, i[1] >> 16 & 255, i[1] >> 8 & 255, 255 & i[1], i[2] >> 24 & 255, i[2] >> 16 & 255, i[2] >> 8 & 255, 255 & i[2], i[3] >> 24 & 255, i[3] >> 16 & 255, i[3] >> 8 & 255, 255 & i[3], i[4] >> 24 & 255, i[4] >> 16 & 255, i[4] >> 8 & 255, 255 & i[4]] } }, 9678: (t, e, r) => { var n = r(3697); t.exports = function (t, e, r) { var i = function (t, i, o, a) { var s = o && a || 0; if ("string" == typeof t && (t = function (t) { t = unescape(encodeURIComponent(t)); for (var e = new Array(t.length), r = 0; r < t.length; r++)e[r] = t.charCodeAt(r); return e }(t)), "string" == typeof i && (i = function (t) { var e = []; return t.replace(/[a-fA-F0-9]{2}/g, (function (t) { e.push(parseInt(t, 16)) })), e }(i)), !Array.isArray(t)) throw TypeError("value must be an array of bytes"); if (!Array.isArray(i) || 16 !== i.length) throw TypeError("namespace must be uuid string or an Array of 16 byte values"); var c = r(i.concat(t)); if (c[6] = 15 & c[6] | e, c[8] = 63 & c[8] | 128, o) for (var l = 0; l < 16; ++l)o[s + l] = c[l]; return o || n(c) }; try { i.name = t } catch (t) { } return i.DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8", i.URL = "6ba7b811-9dad-11d1-80b4-00c04fd430c8", i } }, 1212: (t, e, r) => { var n = r(7240), i = r(3697); t.exports = function (t, e, r) { var o = e && r || 0; "string" == typeof t && (e = "binary" === t ? new Array(16) : null, t = null); var a = (t = t || {}).random || (t.rng || n)(); if (a[6] = 15 & a[6] | 64, a[8] = 63 & a[8] | 128, e) for (var s = 0; s < 16; ++s)e[o + s] = a[s]; return e || i(a) } }, 9315: (t, e, r) => { var n = r(9678), i = r(7918); t.exports = n("v5", 80, i) }, 820: (t, e, r) => { var n = r(6496); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 7108: (t, e, r) => { var n = r(8960); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 9783: (t, e, r) => { var n = r(5264); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 4590: (t, e, r) => { var n = r(5322); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 5964: (t, e, r) => { var n = r(7080); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 9028: (t, e, r) => { var n = r(3392); n && n.__esModule && (n = n.default), t.exports = "string" == typeof n ? n : n.toString() }, 8541: (t, e, r) => { var n = r(2990).default; function i() { "use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports = i = function () { return r }, t.exports.__esModule = !0, t.exports.default = t.exports; var e, r = {}, o = Object.prototype, a = o.hasOwnProperty, s = Object.defineProperty || function (t, e, r) { t[e] = r.value }, c = "function" == typeof Symbol ? Symbol : {}, l = c.iterator || "@@iterator", u = c.asyncIterator || "@@asyncIterator", h = c.toStringTag || "@@toStringTag"; function d(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e] } try { d({}, "") } catch (e) { d = function (t, e, r) { return t[e] = r } } function g(t, e, r, n) { var i = e && e.prototype instanceof b ? e : b, o = Object.create(i.prototype), a = new V(n || []); return s(o, "_invoke", { value: D(t, r, a) }), o } function p(t, e, r) { try { return { type: "normal", arg: t.call(e, r) } } catch (t) { return { type: "throw", arg: t } } } r.wrap = g; var f = "suspendedStart", v = "suspendedYield", m = "executing", k = "completed", y = {}; function b() { } function w() { } function _() { } var A = {}; d(A, l, (function () { return this })); var C = Object.getPrototypeOf, x = C && C(C(L([]))); x && x !== o && a.call(x, l) && (A = x); var E = _.prototype = b.prototype = Object.create(A); function I(t) { ["next", "throw", "return"].forEach((function (e) { d(t, e, (function (t) { return this._invoke(e, t) })) })) } function O(t, e) { function r(i, o, s, c) { var l = p(t[i], t, o); if ("throw" !== l.type) { var u = l.arg, h = u.value; return h && "object" == n(h) && a.call(h, "__await") ? e.resolve(h.__await).then((function (t) { r("next", t, s, c) }), (function (t) { r("throw", t, s, c) })) : e.resolve(h).then((function (t) { u.value = t, s(u) }), (function (t) { return r("throw", t, s, c) })) } c(l.arg) } var i; s(this, "_invoke", { value: function (t, n) { function o() { return new e((function (e, i) { r(t, n, e, i) })) } return i = i ? i.then(o, o) : o() } }) } function D(t, r, n) { var i = f; return function (o, a) { if (i === m) throw Error("Generator is already running"); if (i === k) { if ("throw" === o) throw a; return { value: e, done: !0 } } for (n.method = o, n.arg = a; ;) { var s = n.delegate; if (s) { var c = S(s, n); if (c) { if (c === y) continue; return c } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if (i === f) throw i = k, n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); i = m; var l = p(t, r, n); if ("normal" === l.type) { if (i = n.done ? k : v, l.arg === y) continue; return { value: l.arg, done: n.done } } "throw" === l.type && (i = k, n.method = "throw", n.arg = l.arg) } } } function S(t, r) { var n = r.method, i = t.iterator[n]; if (i === e) return r.delegate = null, "throw" === n && t.iterator.return && (r.method = "return", r.arg = e, S(t, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var o = p(i, t.iterator, r.arg); if ("throw" === o.type) return r.method = "throw", r.arg = o.arg, r.delegate = null, y; var a = o.arg; return a ? a.done ? (r[t.resultName] = a.value, r.next = t.nextLoc, "return" !== r.method && (r.method = "next", r.arg = e), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y) } function R(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e) } function T(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e } function V(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(R, this), this.reset(!0) } function L(t) { if (t || "" === t) { var r = t[l]; if (r) return r.call(t); if ("function" == typeof t.next) return t; if (!isNaN(t.length)) { var i = -1, o = function r() { for (; ++i < t.length;)if (a.call(t, i)) return r.value = t[i], r.done = !1, r; return r.value = e, r.done = !0, r }; return o.next = o } } throw new TypeError(n(t) + " is not iterable") } return w.prototype = _, s(E, "constructor", { value: _, configurable: !0 }), s(_, "constructor", { value: w, configurable: !0 }), w.displayName = d(_, h, "GeneratorFunction"), r.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === w || "GeneratorFunction" === (e.displayName || e.name)) }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, _) : (t.__proto__ = _, d(t, h, "GeneratorFunction")), t.prototype = Object.create(E), t }, r.awrap = function (t) { return { __await: t } }, I(O.prototype), d(O.prototype, u, (function () { return this })), r.AsyncIterator = O, r.async = function (t, e, n, i, o) { void 0 === o && (o = Promise); var a = new O(g(t, e, n, i), o); return r.isGeneratorFunction(e) ? a : a.next().then((function (t) { return t.done ? t.value : a.next() })) }, I(E), d(E, h, "Generator"), d(E, l, (function () { return this })), d(E, "toString", (function () { return "[object Generator]" })), r.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function t() { for (; r.length;) { var n = r.pop(); if (n in e) return t.value = n, t.done = !1, t } return t.done = !0, t } }, r.values = L, V.prototype = { constructor: V, reset: function (t) { if (this.prev = 0, this.next = 0, this.sent = this._sent = e, this.done = !1, this.delegate = null, this.method = "next", this.arg = e, this.tryEntries.forEach(T), !t) for (var r in this) "t" === r.charAt(0) && a.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = e) }, stop: function () { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval }, dispatchException: function (t) { if (this.done) throw t; var r = this; function n(n, i) { return s.type = "throw", s.arg = t, r.next = n, i && (r.method = "next", r.arg = e), !!i } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var o = this.tryEntries[i], s = o.completion; if ("root" === o.tryLoc) return n("end"); if (o.tryLoc <= this.prev) { var c = a.call(o, "catchLoc"), l = a.call(o, "finallyLoc"); if (c && l) { if (this.prev < o.catchLoc) return n(o.catchLoc, !0); if (this.prev < o.finallyLoc) return n(o.finallyLoc) } else if (c) { if (this.prev < o.catchLoc) return n(o.catchLoc, !0) } else { if (!l) throw Error("try statement without catch or finally"); if (this.prev < o.finallyLoc) return n(o.finallyLoc) } } } }, abrupt: function (t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var n = this.tryEntries[r]; if (n.tryLoc <= this.prev && a.call(n, "finallyLoc") && this.prev < n.finallyLoc) { var i = n; break } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var o = i ? i.completion : {}; return o.type = t, o.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(o) }, complete: function (t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y }, finish: function (t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), T(r), y } }, catch: function (t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var i = n.arg; T(r) } return i } } throw Error("illegal catch attempt") }, delegateYield: function (t, r, n) { return this.delegate = { iterator: L(t), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = e), y } }, r } t.exports = i, t.exports.__esModule = !0, t.exports.default = t.exports }, 2990: t => { function e(r) { return t.exports = e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, t.exports.__esModule = !0, t.exports.default = t.exports, e(r) } t.exports = e, t.exports.__esModule = !0, t.exports.default = t.exports }, 232: (t, e, r) => { var n = r(8541)(); t.exports = n; try { regeneratorRuntime = n } catch (t) { "object" == typeof globalThis ? globalThis.regeneratorRuntime = n : Function("r", "regeneratorRuntime = r")(n) } } }, __webpack_module_cache__ = {}; function __webpack_require__(t) { var e = __webpack_module_cache__[t]; if (void 0 !== e) return e.exports; var r = __webpack_module_cache__[t] = { id: t, exports: {} }; return __webpack_modules__[t](r, r.exports, __webpack_require__), r.exports } __webpack_require__.n = t => { var e = t && t.__esModule ? () => t.default : () => t; return __webpack_require__.d(e, { a: e }), e }, __webpack_require__.d = (t, e) => { for (var r in e) __webpack_require__.o(e, r) && !__webpack_require__.o(t, r) && Object.defineProperty(t, r, { enumerable: !0, get: e[r] }) }, __webpack_require__.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (t) { if ("object" == typeof window) return window } }(), __webpack_require__.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), __webpack_require__.r = t => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }; var __webpack_exports__ = {}; (() => { "use strict"; var t = {}; __webpack_require__.r(t), __webpack_require__.d(t, { ABAAdhesionDisplay: () => Ni, ABADisplay: () => Zi, ABAVideo: () => Ji, AdaptiveOutstream: () => eo, Anchor: () => ro, BannerVideo: () => io, Billboard: () => ao, BottomBanner: () => so, Breakaway: () => co, Breakout: () => lo, DesktopBreakout: () => ho, DesktopHover: () => po, DesktopRunway: () => fo, FabrikOutstream: () => to, HalfPage: () => vo, HighRise: () => mo, KeyArt: () => ko, LargeLeaderboard: () => yo, Leaderboard: () => bo, Lighthouse: () => wo, MiddleBanner: () => _o, NonVastOutstreamVideo: () => Ao, OutstreamVideo: () => Co, Runway: () => xo, Sidekick: () => Oo, SocialCanvas: () => Do, SwipeUp: () => Lo, TopBanner: () => Po, Ultrawide: () => Mo, Uptick: () => jo, Venti: () => Ho, VideoAnchor: () => zo, VideoHalo: () => Wo, VideoVenti: () => Go, WideSkyscraper: () => Yo, Wrapper: () => Xo }); var e = __webpack_require__(8188), r = __webpack_require__.n(e); function n(t, e) { var r = e.Kargo, n = t.Kargo, i = e.context; if (t !== e ? r ? n !== r && (t.Kargo = r) : (t.Kargo = n || {}, e.Kargo = t.Kargo) : e.Kargo = r || {}, i && i.master && e !== i.master) { var o = i.master; o.Kargo ? o.Kargo !== e.Kargo && (e.Kargo = o.Kargo) : o.Kargo = e.Kargo } return e.Kargo } function i(t) { for (var e = t, r = t.top; e !== r;) { var n = void 0; try { n = e.parent.location.href } catch (t) { n = !1 } if (!n) break; for (var i = e.parent.document.getElementsByTagName("iframe"), o = void 0, a = null, s = 0; s < i.length; s += 1)if ((o = i[s]).contentWindow === e) { a = o; break } if (a && a.className.split(" ").indexOf("krg-nobust") > -1) break; e = e.parent } return e } function o(t) { var e; try { e = t.top.location.href } catch (t) { e = null } return !e } function a(t) { return !(!t.AMP_LISTENING && !t.AMP_CONTEXT_DATA) } function s(t) { var e, r = i(t), n = null; try { if (t !== r) { for (var o = t; o.parent !== r;)o = o.parent; for (var a = r.document.getElementsByTagName("iframe"), s = 0; s < a.length; s += 1)if ((e = a[s]).contentWindow === o) { n = e; break } } } catch (t) { } return n } var c = __webpack_require__(3629); function l(t, e) { if (!e) return t; var r, n = t; return Object.keys(e).forEach((function (t) { r = e[t], n += "".concat(n.indexOf("?") > -1 ? "&" : "?").concat(t, "=").concat(encodeURIComponent(r)) })), n } function u(t) { return void 0 === t && (t = 8), Math.random().toString().substr(2, t) } function h(t, e) { return decodeURIComponent((new RegExp("".concat(e, "=(.+?)(&|$)"), "i").exec(t) || ["", ""])[1]) } function d(t) { var e = ""; try { e = t.location.href } catch (t) { } return t.AMP_CONTEXT_DATA && t.AMP_CONTEXT_DATA.sourceUrl ? e = t.AMP_CONTEXT_DATA.sourceUrl : t.context && t.context.sourceUrl ? e = t.context.sourceUrl : o(t) && t.document.referrer ? e = t.document.referrer : h(e, "content_url") && (e = h(e, "content_url")), e } var g, p = (g = function (t, e) { return g = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]) }, g(t, e) }, function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null"); function r() { this.constructor = t } g(t, e), t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype, new r) }), f = function () { return f = Object.assign || function (t) { for (var e, r = 1, n = arguments.length; r < n; r++)for (var i in e = arguments[r]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t }, f.apply(this, arguments) }, v = function (t) { function e(e, r) { void 0 === r && (r = {}); var n = this.constructor, i = t.call(this, e) || this; return Object.setPrototypeOf(i, n.prototype), i.message = i.buildErrorMessage(e || "", r), i } return p(e, t), e.prototype.addContext = function (t, e) { var r = e.ctx, n = e.moduleName, i = e.prep, o = e.reason, a = t || ""; if (n && (a = "".concat(n, ": ").concat(a)), r) { var s = i || "in"; a = "".concat(a, " ").concat(s, " ").concat(r) } return o && (a += ": ".concat(o)), a }, e.prototype.buildErrorMessage = function (t, e) { return this.addContext(t, e) }, e }(Error), m = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot ".concat(t), e) }, e }(v), k = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is disabled"), e) }, e }(v), y = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot load ".concat(t), e) }, e }(v), b = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot get ".concat(t), e) }, e }(v), w = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { var r = t ? "No ".concat(t) : "Empty", n = "".concat(r, " response"); return this.addContext(n, e) }, e }(v), _ = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " not supported"), f({ prep: e.prep || "by" }, e)) }, e }(v), A = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is not set"), e) }, e }(v), C = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is invalid"), e) }, e }(v), x = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return p(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Request for ".concat(t, " timed out"), f({ prep: e.prep || "after" }, e)) }, e }(v), E = function () { function t(t) { this.moduleName = t } return t.prototype.errCant = function (t, e, r) { return new m(t, { ctx: e, reason: r, moduleName: this.moduleName }) }, t.prototype.errDisabled = function (t, e) { return new k("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errLoad = function (t, e) { return new y("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errGet = function (t, e) { return new b("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errNew = function (t) { return new v(t, { moduleName: this.moduleName }) }, t.prototype.errNoResponse = function (t, e) { return new w(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errNoSupport = function (t, e) { return new _(t, { ctx: e, prep: "by", moduleName: this.moduleName }) }, t.prototype.errNotSet = function (t, e) { return new A(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errInvalid = function (t, e) { return new C(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errTimeout = function (t, e) { return new x(t, { ctx: e, moduleName: this.moduleName }) }, t }(), I = function (t, e) { var r = {}; for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (n = Object.getOwnPropertySymbols(t); i < n.length; i++)e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]]) } return r }, O = new E("ad-util/request"); function D(t, e, r) { void 0 === r && (r = !1); var n = e, i = t.document.createElement("img"); if (i.style.position = "absolute", i.style.visibility = "hidden", i.style.left = "-9999px", i.style.top = "0", r && (n += "".concat(e.indexOf("?") > -1 ? "&" : "?", "_cb=").concat(Date.now() * Math.random())), -1 !== n.indexOf("tk.kargo.com")) { var o = (0, c.xF)(t, "Kargo.Plugin.Cerberus.getLexId"); o && o() && (n = l(n, { kid: o() })) } var a, s = function (t) { t.parentNode && t.parentNode.removeChild(t) }; return i.addEventListener("load", (function () { t.clearTimeout(a), s(i) }), !1), a = t.setTimeout((function () { s(i) }), 8e3), i.src = n, t.document.body.appendChild(i), i } function S(t) { t && t.start() } function R(t) { t && t.stop() } function T(t, e, r, n, i) { if (void 0 === i && (i = {}), t && t.length) { var o, a = e.document.head || e.document.body, s = i.latencyTracker, c = e.document.createElement("script"); c.src = t; var l = !1; c.onload = function () { R(s), e.clearTimeout(o), l || n(null, c) }, r && (o = e.setTimeout((function () { l = !0, i.onTimeoutFail ? n(O.errTimeout(t, "".concat(r, " ms"))) : n(null, c) }), r)), S(s), a.appendChild(c) } else n(new Error("Invalid URL")) } function V(t, e, r, n, i, o) { if (void 0 === o && (o = {}), t && t.length) { var a = new XMLHttpRequest, s = o.latencyTracker; n && (a.withCredentials = !0), r && (a.timeout = r), a.onload = function () { if (R(s), a.status >= 200 && a.status < 400) { var t = (a.responseText || "").trim(); if (t.length) { try { t = JSON.parse(t) } catch (t) { } i(null, t) } else i(new Error("Empty Response")) } else i(new Error("GET Request Failed with Status: ".concat(a.status, " - ").concat(a.statusText))) }, a.ontimeout = function (t) { i(t) }, a.onerror = function (t) { i(t) }, a.open("GET", t, !0), S(s), a.send() } else i(new Error("Invalid URL")) } function L(t, e, r, n, i, o, a) { if (void 0 === a && (a = {}), t && t.length) { var s = new XMLHttpRequest, c = a.latencyTracker; i && (s.withCredentials = !0), n && (s.timeout = n), s.onload = function () { if (R(c), s.status >= 200 && s.status < 400) { var t = (s.responseText || "").trim(); if (t.length) { try { t = JSON.parse(t) } catch (t) { } o(null, t) } else o(new Error("Empty Response")) } else o(new Error("GET Request Failed with Status: ".concat(s.status, " - ").concat(s.statusText))) }, s.ontimeout = function (t) { o(t) }, s.onerror = function (t) { o(t) }, s.open("POST", t, !0), s.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), S(c), s.send(JSON.stringify(e || {})) } else o(new Error("Invalid URL")) } function P(t, e, r) { return new Promise((function (n, i) { if (!t || 0 === t.length) return i(new Error("Invalid URL")); var o = r.withCredentials, a = r.timeout, s = r.latencyTracker, c = {}; return o && (c.credentials = "include"), S(s), function (t, e) { return t ? Promise.race([e, new Promise((function (e, r) { return setTimeout(r, t, new Error("timeout")) }))]) : e }(a, e.fetch(t, c)).then((function (t) { var e = t.headers.get("content-type"); return t.ok ? e && -1 !== e.indexOf("application/json") ? t.json() : t.text() : i(t) })).then((function (t) { return R(s), n(t) })).catch((function (t) { return i(t) })) })) } var M = "Chrome", N = "Safari", F = "Firefox", U = "Opera", K = "Edge", j = "Android", H = "ios", B = "Windows", q = "MacOS", z = "other", W = "Mobile"; function G(t) { return t.toLowerCase() } function Y(t) { var e = t.navigator.userAgent, r = z; return e.indexOf("".concat(K, "/")) > -1 ? r = G(K) : e.indexOf("".concat(M, "/")) > -1 ? r = G(M) : e.indexOf("".concat(N, "/")) > -1 ? r = G(N) : e.indexOf("".concat(F, "/")) > -1 ? r = G(F) : e.indexOf(U) > -1 ? r = G(U) : e.indexOf("MSIE") > -1 || e.indexOf("Trident/") > -1 ? r = "ie" : e.indexOf("FBAN/FBForIPhone") > -1 || e.indexOf("FBAN/FBIOS") > -1 || e.indexOf("facebookexternalhit/") > -1 ? r = "facebook" : e.indexOf("Twitter for iPhone") > -1 ? r = "twitter" : e.indexOf("Instagram") > -1 ? r = "instagram" : e.indexOf("Pinterest") > -1 ? r = "pinterest" : e.indexOf("LinkedInApp") > -1 ? r = "linkedIn" : e.indexOf("Snapchat") > -1 && (r = "snapchat"), r } function Z(t) { var e = t.navigator.userAgent, r = z; return e.indexOf(j) > -1 ? r = G(j) : /iP(hone|od|ad)/.test(e) ? r = H : /windows/i.test(e) ? r = B : /macintosh/i.test(e) ? r = q : /linux/i.test(e) && (r = "Linux"), r } function J(t) { var e = Z(t), r = {}; r[G(j)] = "android", r[G(H)] = "os", r[G(q)] = "mac os x", r[G(B)] = "windows nt"; var n = r[G(e)], i = new RegExp("".concat(n, "\\s+(\\d+)[_\\.](\\d+)?[_\\.]?(\\d+)?")), o = G(t.navigator.userAgent).match(i) || [0, 0]; return parseInt(o[1], 10) } function Q(t) { var e = t.navigator.userAgent; return e.indexOf(W) > -1 && !/iPad|Xoom|SCH-I800|Kindle/.test(e) } function X(t) { var e = t.navigator.userAgent; return /iPad|Xoom|SCH-I800|Kindle/.test(e) || e.indexOf(j) >= 0 && e.indexOf(W) < 0 } function $(t) { return !(Q(t) || X(t)) } function tt(t) { var e = Z(t), r = J(t), n = Y(t), i = function (t) { var e = t.navigator.userAgent, r = Y(t), n = 0; if (r === G(N)) n = J(t); else { var i = "".concat(r, "\\/(\\d+)\\.?"); n = parseInt((G(e).match(i) || ["0", "0"])[1], 10) } return n }(t); return e === G(j) && n === G(M) && i > 52 || e === H && r > 9 || $(t) } var et = function () { function t(t, e, r, n, i) { void 0 === i && (i = 1), this.win = t, this.dataBucket = e, this.allowedReportParamKeys = r, this.params = n, this.counter = i } return t.prototype.createReportUrl = function () { var t = this, e = "".concat("https://ad-monitor.kargo.com", "?data="), r = this.dataBucket; return Object.keys(this.params).forEach((function (e) { if (t.allowedReportParamKeys.has(e)) { var n = t.params[e]; if (n || 0 === n || !1 === n) { var i = t.escapeLineProtocolTagKeyOrValue(t.params[e]); r += ",".concat(t.escapeLineProtocolTagKeyOrValue(e), "=").concat(i) } } })), r += " value=".concat(this.counter), "".concat(e).concat(encodeURIComponent(r)) }, t.prototype.escapeLineProtocolTagKeyOrValue = function (t) { return "object" == typeof t ? "invalid" : "".concat(t).replace(/,|\s|=/g, "\\$&") }, t.prototype.report = function () { try { !function (t, e, r, n) { var i = r.timeout, o = void 0 === i ? 0 : i, a = r.withCredentials; V(t, 0, o, void 0 !== a && a, n, I(r, ["timeout", "withCredentials"])) }(this.createReportUrl(), this.win, { timeout: 1e3, withCredentials: !1 }, (function () { })) } catch (t) { console.error(t) } }, t }(), rt = new Set(["browser", "creative", "err_code", "format", "os", "platform", "slot", "version"]), nt = { 1: "error", 2: "warn", 3: "log", 4: "debug" }, it = function () { function t(t, e, r, n) { void 0 === e && (e = ""), void 0 === r && (r = 3), void 0 === n && (n = true), this.label = e, this.level = r, this.reportingEnabled = n, this.win = t } return t.prototype.setLabel = function (t) { this.label = t }, t.prototype.setLevel = function (t) { this.level = t }, t.prototype.setReporting = function (t) { this.reportingEnabled = t }, t.prototype.getLabelString = function () { var t = "[KARGO]"; if (this.label) if ((0, c.cy)(this.label)) for (var e = 0; e < this.label.length; e += 1)t += "[".concat(this.label[e], "]"); else t += "[".concat(this.label, "]"); return t }, t.prototype.write = function (t, e) { var r; if ((0, c.cy)(e) && 0 !== e.length) { var n = d(this.win), i = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"); if (i && i() && i().isDebug() || h(n, "krg_debug") || t <= this.level) { var o = e; 4 === t ? o = ["%c".concat(this.getLabelString()), "color: #FF7500"].concat(o) : o.unshift(this.getLabelString()); for (var a = 0; a < o.length; a += 1)o[a] instanceof Error ? o[a] = (o[a].name ? "".concat(o[a].name, " - ") : "") + o[a].message : "object" != typeof o[a] || o[a] instanceof HTMLElement || (o[a] = (0, c.h1)({}, o[a])); try { (r = this.win.console)[nt[t]].apply(r, o) } catch (t) { } } } }, t.prototype.log = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(3, t) }, t.prototype.warn = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(2, t) }, t.prototype.error = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(1, t) }, t.prototype.debug = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(4, t) }, t.prototype.report = function (t, e, r, n) { void 0 === r && (r = {}), void 0 === n && (n = !1); try { if (this.reportingEnabled) { var i = { url: d(this.win), err_code: t, msg: e, platform: (l = this.win, Q(l) ? "MobileWeb" : X(l) ? "TabletWeb" : "Desktop"), os: Z(this.win), browser: Y(this.win) }; i = (0, c.h1)(i, r); var o = "https://s3.amazonaws.com/log.kargo.com/adtag.error", a = []; Object.keys(i).forEach((function (t) { a.push("".concat(encodeURIComponent(t), "=").concat(encodeURIComponent(i[t]))) })); var s = a.join("&"); if (s.length && (o += "?".concat(s)), o = this.scrubString(o), D(this.win, o), !n) new et(this.win, "ad-tag-error", rt, i).report() } } catch (t) { console.error(t) } var l }, t.prototype.reportAdMetric = function (t, e) { var r = { format: t.adFormat, version: t.adTagVersion, slot: t.adSlot }; "" !== t.errCode && (r.err_code = t.errCode), "gam-iframes" === t.type && (r.gam_iframes = t.gamIframes), "sticky-overlap" === t.type && (r.sticky_overlap = t.stickyOverlap), "vpaid-clickable" === t.type && (r.vpaid_clickable = t.vpaidClickable); var n = "".concat("https://ad-metrics.kargo.com/api/v1/send", "?metric=").concat(t.type, "&value=").concat(t.value), i = []; Object.keys(r).forEach((function (t) { i.push('"'.concat(encodeURIComponent(t), '":"').concat(encodeURIComponent(r[t]), '"')) })), i.length && (n += "&params={".concat(i, "}")), V(n, this.win, 2e3, !1, (function (t) { e && e(t) })) }, t.prototype.scrubString = function (t) { return t.replace(/%25/g, "") }, t }(), ot = __webpack_require__(8275), at = __webpack_require__.n(ot), st = new E("ModuleLoader"), ct = function () { function t(t, e) { this.win = t, this.moduleFolder = e, this.moduleUrlRoot = "".concat("https://storage.cloud.kargo.com", "/").concat("ad/network/tag/bundle"), this.win.Kargo = this.win.Kargo || {}; var r = h(this.win.location.href, "krg_module_url_root"); r && (this.moduleUrlRoot = r) } return t.prototype.filterRequiredModules = function (t) { var e = "string" == typeof t ? [t] : t, r = this.win.Kargo; return e.filter((function (t) { return !(t in r) })) }, t.prototype.getModuleFolder = function () { return "function" == typeof this.moduleFolder ? this.moduleFolder() : this.moduleFolder }, t.prototype.buildModulePaths = function (t, e) { var r = this; return t.map((function (t) { return "".concat(r.moduleUrlRoot, "/").concat(r.getModuleFolder(), "/").concat(t, "/").concat(e, ".js") })) }, t.prototype.getModule = function (t, e, r) { var n = this; void 0 === r && (r = 2e3); var i = "string" == typeof t ? [t] : t, o = this.filterRequiredModules(i).map((function (t) { return at()(t) })), a = this.buildModulePaths(o, e); return Promise.all(a.map((function (t) { return function (t, e, r) { void 0 === r && (r = {}); var n = r.timeout, i = void 0 === n ? 0 : n, o = I(r, ["timeout"]); return new Promise((function (r, n) { T(t, e, i, (function (t, e) { return t ? n(t) : r(e) }), o) })) }(t, n.win, { timeout: r, onTimeoutFail: !0 }) }))).then((function () { for (var e = n.win.Kargo, r = [], o = 0, a = i; o < a.length; o++) { var s = a[o], c = e[s]; if (!c) return Promise.reject(st.errLoad(s)); r.push(c) } return Promise.resolve("string" == typeof t ? r[0] : r) })) }, t }(); function lt(t, e) { return t.className.split(" ").indexOf(e) > -1 } function ut(t, e) { lt(t, e) || (t.className += " ".concat(e)) } function ht(t, e, r) { switch (e) { case "append": r.appendChild(t); break; case "prepend": r.firstChild ? r.insertBefore(t, r.firstChild) : r.appendChild(t); break; case "before": r.parentNode ? r.parentNode.insertBefore(t, r) : r.insertBefore(t, r); break; default: r.parentNode ? r.nextSibling ? r.parentNode.insertBefore(t, r.nextSibling) : r.parentNode.appendChild(t) : r.insertBefore(t, r) } } function dt(t, e) { var r = !1; if (t.ownerDocument) { var n = null; if ("head" === e ? n = t.ownerDocument.head : "body" === e && (n = t.ownerDocument.body), n) for (var i = t.parentElement; i;) { if (i === n) { r = !0; break } i = i.parentElement } } return r } function gt(t) { return dt(t, "body") } function pt(t, e) { var r = null, n = new RegExp("^\x3c!--(?:\\r|\\n|\\s)*?[\"']".concat((0, c.AF)(e), "[\"']:((?:\\r|\\n|.)*?)--\x3e$")); if (t.indexOf(e) > 0) { var i = t.match(/<!--(?:\r|\n|.)*?-->/g); if (i) for (var o = 0; o < i.length; o += 1) { var a = i[o].match(n); if (a) { var s = (a[1] || "").trim(); "" !== s && (s = JSON.parse(s), r = null === r || "string" == typeof s ? s : (0, c.h1)(r, s)) } } } return r } function ft(t, e) { var r = t.className.split(" "), n = r.indexOf(e); n > -1 && (r.splice(n, 1), t.className = r.join(" ")) } function vt(t) { t && t.parentNode && t.parentNode.removeChild(t) } function mt(t, e) { var r = t; if (r.indexOf(e) > -1) { var n = new RegExp("\x3c!--(?:\\r|\\n|\\s)*?[\"']".concat((0, c.AF)(e), "[\"']:(?:\\r|\\n|.)*?--\x3e"), "g"), i = r.match(n); if (i) for (var o = 0; o < i.length; o += 1)r = r.replace(i[o], "") } return r } __webpack_require__(9315); var kt = __webpack_require__(1212); var yt = function () { function t() { this.creatives = {} } var e = t.prototype; return e.getActiveCreatives = function () { var t = {}; for (var e in this.creatives) this.creatives[e].isDestroyed() || (t[e] = this.creatives[e]); return t }, e.add = function (t) { for (var e = t.getId() || kt(), r = e, n = 1; n <= 10 && this.creatives[r]; n++)r = e + "-" + n; this.creatives[r] || (this.creatives[r] = t) }, e.get = function (t) { if (!t) return null; var e = this.getActiveCreatives(); return Object.values(e).find((function (e) { return e.getId() === t })) || null }, e.getAll = function () { var t = [], e = this.getActiveCreatives(); for (var r in e) { var n = e[r]; t.push(n) } return t }, e.getByLocalId = function (t) { var e = this.getActiveCreatives(); for (var r in e) { var n = e[r]; if (n.getLocalId() === t) return n } return null }, e.getCreativesOfType = function (t) { var e = [], r = this.getActiveCreatives(); for (var n in r) { var i = r[n]; i.getType() === t && e.push(i) } return e }, e.getCreativesOfFormat = function (t) { var e = [], r = this.getActiveCreatives(); for (var n in r) { var i = r[n]; i.getFormat() === t && e.push(i) } return e }, e.getCreativesOfSlot = function (t) { var e = [], r = this.getActiveCreatives(); for (var n in r) { var i = r[n]; i.getSlotId() === t && e.push(i) } return e }, e.getAnalytics = function () { var t = []; for (var e in this.creatives) { var r = this.creatives[e].getAnalytics(); if (r && r.localId) { var n = r.localId; delete r.localId, t[n] = r } } return t }, t }(); const bt = yt; function wt(t) { return wt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, wt(t) } function _t(t) { var e = function (t, e) { if ("object" != wt(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, e || "default"); if ("object" != wt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return ("string" === e ? String : Number)(t) }(t, "string"); return "symbol" == wt(e) ? e : e + "" } function At(t, e, r) { return (e = _t(e)) in t ? Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = r, t } function Ct(t, e, r, n, i, o, a) { try { var s = t[o](a), c = s.value } catch (t) { return void r(t) } s.done ? e(c) : Promise.resolve(c).then(n, i) } function xt(t) { return function () { var e = this, r = arguments; return new Promise((function (n, i) { var o = t.apply(e, r); function a(t) { Ct(o, n, i, a, s, "next", t) } function s(t) { Ct(o, n, i, a, s, "throw", t) } a(void 0) })) } } var Et = __webpack_require__(232), It = __webpack_require__.n(Et), Ot = function () { function t(t, e) { this.win = t, this.logger = e, this.kael = null } return t.prototype.loadKael = function () { var t = this; return new Promise((function (e, r) { if (t.kael) e(t.kael); else { t.win.Kargo = t.win.Kargo || {}; var n = t.win.Kargo.AnalyticsEventsLibrary; if (n) t.kael = new n, e(t.kael); else { var i = t.win.document.createElement("script"); i.type = "text/javascript", i.src = "https://storage.cloud.kargo.com/ad/network/kael/v1.10.0-041624.js", i.onload = function () { (n = t.win.Kargo.AnalyticsEventsLibrary) ? (t.kael = new n, e(t.kael)) : r(new Error("Failed to load KAEL library")) }, t.win.document.head.appendChild(i) } } })) }, t.prototype.getLexId = function () { var t = (0, c.xF)(this.win, "Kargo.Plugin.Cerberus.getLexId"); return t && t() ? t() : void 0 }, t.prototype.kaelImpression = function (t, e, r) { var n = this; return this.loadKael().then((function (i) { var o = { group: e, impressionId: r, namespace: t, lexId: n.getLexId(), sessionId: i.getSessionId() }; new i.Track(o).impression() })) }, t.prototype.kaelCustomEvent = function (t, e, r, n, i) { var o = this; return this.loadKael().then((function (a) { var s = { group: e, namespace: t, impressionId: i, lexId: o.getLexId(), sessionId: a.getSessionId() }; new a.Track(s).custom(r, n) })) }, t.prototype.kaelViewability = function (t, e, r, n) { var i = this; return this.loadKael().then((function (o) { var a = { group: e, namespace: t, impressionId: n, lexId: i.getLexId(), sessionId: o.getSessionId() }; new o.Viewability(a).inViewDuration(r) })) }, t.prototype.trackEvent = function (t, e, r) { void 0 === r && (r = {}); var n = this.getImpressionEventUrl(t, e, r); n && D(this.win, n, !0) }, t.prototype.getImpressionEventUrl = function (t, e, r) { void 0 === r && (r = {}); var n = null; if (["start", "request", "response", "serve", "completeview", "view", "view-predict-in", "view-predict-out", "view-predict-in-confirmed", "view-predict-in-confirmed-502", "close", "click"].indexOf(t) > -1) { n = "https://tk.kargo.com/t/".concat("imp_track", "-").concat(t, "-").concat(e), r.format && (n += "-".concat(r.format)), r.server && (n += "-".concat(r.server)); var i = r.impId || "", o = { uuid: i, krg_imp_id: i, aslot: e || "", creative_source: r.creativeSource || "", deal_id: r.deal_id || "", line_item_id: r.line_item_id || "" }; false, n = l(n, o), r.creativeTemplateId && (n = l(n, { creative_template_id: r.creativeTemplateId })) } return n }, t }(), Dt = "CONFIG", St = "CREATIVE", Rt = "KRAKEN", Tt = "KIT", Vt = "HEPHAESTUS", Lt = function () { function t() { } return t.executeGlobalConditionalCheck = function (t, e, r) { var n, i = (0, c.xF)(r, "Kargo.Config.getGlobalConfig"); if (i && i() && (null != (n = t = i()) && n.getConditionalCheckFunc && t.getConditionalCheckFunc())) try { (0, c.zH)(r, t.getConditionalCheckFunc()) } catch (t) { if (t instanceof Error) { var o = "Error in Global Conditional Check:"; e.error(o, t), e.report(Dt, o + " " + t.name + " - " + t.message, { version: "8.22.0" }) } } }, t.executePreloadJS = function (t, e, r) { if (null != t && t.getPreLoadFunc && t.getPreLoadFunc()) try { (0, c.zH)(r, t.getPreLoadFunc()) } catch (t) { if (t instanceof Error) { var n = "Error in Global Javascript:"; e.error(n, t), e.report(Dt, n + " " + t.name + " - " + t.message, { version: "8.22.0" }) } } }, t.executePreloadCSS = function (t, e) { if (null != t && t.getPreLoadCss && t.getPreLoadCss()) { var r = e.document.createElement("style"); r.type = "text/css", r.className = "kargo-css", r.textContent = t.getPreLoadCss(), e.document.head.appendChild(r) } }, t }(); function Pt(t, e, r) { var n = function (e) { for (var r = null, i = e.document.getElementsByTagName("script"), o = 0; o < i.length; o += 1)if (i[o].textContent && i[o].textContent.indexOf(t) > -1 && i[o].textContent.indexOf("Kargo") > -1) { r = i[o]; break } if (e.AMP_LISTENING) { var a = e.document.querySelector("#c > script"); if (a) r = a; else { var s = e.document.body.getElementsByTagName("*"); s.length ? r = s[0] : ((r = e.document.createElement("div")).style.display = "none", e.document.body.appendChild(r)) } } if (!r) for (var c = e.document.getElementsByTagName("iframe"), l = 0; l < c.length; l += 1)if (c[l].contentWindow) { try { r = n(c[l].contentWindow) } catch (t) { } if (r) break } return r }; return n(r || e) } function Mt(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Nt(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Mt(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Mt(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var Ft = function () { function t(t, e, r) { this.win = t, this.target = e, this.infoOverride = r, this.logger = e && e.logger || new it(this.win), e || this.logger.error("Reporting target is not ready, reporting result might be affected"); var n = this.collectReporterInfo(); this.reporterInfo = Nt(Nt({}, n), r) } var e = t.prototype; return e.collectReporterInfo = function () { var t, e = this.target || {}, r = e.dfpCreativeData || e.krakenCreativeData || e.krakenResponse || {}; "string" == typeof r && (r = (r = pt(r, "krg_ad_info")) || {}); var n = "unknown", i = e.type || r.source || n; return e.responseJson ? r = (0, c.h1)(r, e.responseJson) || {} : e.rawResponse && (r = (0, c.h1)(r, e.rawResponse) || {}), this.reporterInfo = Nt({ version: "8.22.0", slot: e.slotConfig && e.slotConfig.getId ? e.slotConfig.getId() : n, format: r.format || n, source: i, creative: (null == (t = e.creativeData) ? void 0 : t.creativeId) || r.creative || r.id || n, deal_id: r.dealId || r.deal_id || n, campaign_id: r.campaign || n, line_item_id: r.biddableId || r.biddable_id || n, bid_id: r.krg_imp_id || n, adomain: r.advertiserDomain || r.advertiser_domain || r.adomain || n }, this.infoOverride), this.reporterInfo }, e.report = function (t, e, r, n) { void 0 === n && (n = !1), this.target && this.collectReporterInfo(); var i = Nt(Nt({}, this.reporterInfo), r); this.logger.debug("ErrorReporter: ", "Code: " + t + ",", "Message: " + e + ",", "isWarning: " + n + ",", "Payload:", i), this.logger.report(t, e, i, n) }, t }(), Ut = function () { function t(t, e, r, n) { this.request = t, this.win = e, this.logger = r, this.errorReporter = n } var e = t.prototype; return e.preDrawJS = function (t, e) { this.formatPreDraw(t), this.slotPreDraw(e) }, e.postDrawJS = function (t, e) { this.formatPostDraw(t), this.slotPostDraw(e) }, e.formatPreDraw = function (t) { if (this.request.getFormatConfig() && this.request.getFormatConfig().getPreDrawFunc && this.request.getFormatConfig().getPreDrawFunc()) try { (0, c.zH)(this.win, this.request.getFormatConfig().getPreDrawFunc()) } catch (e) { e instanceof Error && this.logError("Format PreDraw", t, e) } }, e.slotPreDraw = function (t) { if (this.request.getSlotConfig() && this.request.getSlotConfig().getPreDrawFunc && this.request.getSlotConfig().getPreDrawFunc() && !(this.request.getFormatConfig() && this.request.getFormatConfig().isIgnoreSlotPreDrawFunc && this.request.getFormatConfig().isIgnoreSlotPreDrawFunc())) try { (0, c.zH)(this.win, this.request.getSlotConfig().getPreDrawFunc()) } catch (e) { e instanceof Error && this.logError("Slot PreDraw", t, e) } }, e.formatPostDraw = function (t) { if (this.request.getFormatConfig() && this.request.getFormatConfig().getPostDrawFunc && this.request.getFormatConfig().getPostDrawFunc()) try { (0, c.zH)(this.win, this.request.getFormatConfig().getPostDrawFunc()) } catch (e) { e instanceof Error && this.logError("Format PostDraw", t, e) } }, e.slotPostDraw = function (t) { if (this.request.getSlotConfig() && this.request.getSlotConfig().getPostDrawFunc && this.request.getSlotConfig().getPostDrawFunc() && !(this.request.getFormatConfig() && this.request.getFormatConfig().isIgnoreSlotPostDrawFunc && this.request.getFormatConfig().isIgnoreSlotPostDrawFunc())) try { (0, c.zH)(this.win, this.request.getSlotConfig().getPostDrawFunc()) } catch (e) { e instanceof Error && this.logError("Slot PostDraw", t, e) } }, e.logError = function (t, e, r) { var n = "Error in '" + e + "' " + t + " Javascript: "; n = n + " " + r.name + " - " + r.message, this.logger.error(n, r), this.errorReporter.report(Dt, n) }, t }(), Kt = function () { function t(t) { this.win = t, this.active = !1, this.api = null, this.status = null, this.lastEventData = null, this.isRegistered = !1, this.initialSize = { width: 0, height: 0 }, this.win.$sf && this.win.$sf.ext && (this.active = !0, this.api = this.win.$sf.ext) } return t.prototype.isActive = function () { return this.active }, t.prototype.findContainerApi = function () { return Promise.resolve(this.isActive()) }, t.prototype.getApi = function () { return this.api }, t.prototype.getApiStatus = function () { return this.status }, t.prototype.getContainerStatus = function () { return this.api ? this.api.status() : null }, t.prototype.getLastEventData = function () { return this.lastEventData }, t.prototype.getSize = function () { var t = { width: 0, height: 0 }; if (this.api) { var e = this.api.geom(); t = { width: e.self.w, height: e.self.h } } return t }, t.prototype.getContainerSize = function () { return this.getSize() }, t.prototype.getSupport = function () { return this.api ? this.api.supports() : null }, t.prototype.setInitialSize = function (t, e) { var r = this; this.api && (this.initialSize.width = t, this.initialSize.height = e, this.isRegistered = !0, this.api.register(t, e, (function (t, e) { r.status = t, r.lastEventData = e }))) }, t.prototype.setExpandedSize = function (t, e) { if (this.api) { var r = this.getSize(); if (r.width !== t || r.height !== e) { var n = this.getSupport(); this.api.expand({ b: e, r: t, push: !!n && n["exp-push"] }) } return Promise.resolve() } return Promise.reject(new Error("SafeFrame API not set")) }, t.prototype.setContainerSize = function (t, e) { return this.api && t && e && t > 0 && e > 0 ? (this.isRegistered || this.setInitialSize(t, e), this.setExpandedSize(t, e)) : Promise.reject(new Error("SafeFrame API not set or invalid size of ".concat(t, "x").concat(e))) }, t.prototype.noAdToDisplay = function () { }, t.prototype.getInViewPercentage = function () { return this.api ? this.api.inViewPercentage() : 0 }, t.prototype.isVisible = function () { return this.getInViewPercentage() > 0 }, t }(), jt = function () { function t(t) { this.win = t, this.active = !1, this.renderStarted = !1, this.api = null, this.size = { width: 0, height: 0 }, this.percentInView = 0 } return t.prototype.findContainerApi = function () { var t = this; return new Promise((function (e) { var r, n, i, o = function (r) { r && r.observeIntersection && r.requestResize && (t.setApi(r), t.active = !0), e(t.active) }; if (t.win.context) o(t.win.context); else if (t.win.AMP_CONTEXT_DATA && t.win.AMP_CONTEXT_DATA.ampcontextFilepath) { var a = t.win.AMP_CONTEXT_DATA.ampcontextFilepath; r = a, n = t.win, T(r, n, (i = {}).timeout || null, (function () { o(t.win.context || null) }), I(i, ["timeout"])) } else o(null) })) }, t.prototype.setApi = function (t) { var e = this; this.api = t, this.size.width = this.win.innerWidth, this.size.height = this.win.innerHeight, this.api.observeIntersection && this.api.observeIntersection((function (t) { e.api.hidden ? e.percentInView = 0 : e.percentInView = 100 * t[t.length - 1].intersectionRatio })) }, t.prototype.isActive = function () { return this.active }, t.prototype.getApi = function () { return this.api }, t.prototype.getContainerSize = function () { return this.size }, t.prototype.isVisible = function () { return this.getInViewPercentage() > 0 }, t.prototype.getInViewPercentage = function () { return this.percentInView }, t.prototype.setContainerSize = function (t, e) { var r = this, n = !1; return this.api ? (!this.renderStarted && this.api.renderStart && (this.api.renderStart({ width: t, height: e }), this.renderStarted = !0, n = !0), (n || this.size.width !== t || this.size.height !== e) && this.api.requestResize ? this.api.requestResize(t, e).then((function () { r.size.width = t, r.size.height = e, n && r.api.signalInteractive() })).catch((function (t) { return n && r.api.signalInteractive(), Promise.reject(t) })) : Promise.resolve()) : Promise.reject(new Error("GoogleAmp API not set")) }, t.prototype.noAdToDisplay = function () { this.api && this.api.noContentAvailable() }, t.prototype.getMasterWindow = function () { return this.api ? this.api.master : null }, t }(), Ht = function () { function t(t) { this.type = null, this.ready = !1, this.win = i(t), this.safeFrame = new Kt(this.win), this.googleAmp = new jt(this.win) } return t.prototype.getType = function () { return this.type }, t.prototype.detectEnvironment = function () { var t = this; return this.ready ? Promise.resolve(this.type) : Promise.all([this.googleAmp.findContainerApi(), this.safeFrame.findContainerApi()]).then((function (e) { var r = e[0], n = e[1]; return t.type = r ? "GoogleAmp" : n ? "SafeFrame" : null, t.ready = !0, t.type })) }, t.prototype.isInContainer = function () { return null !== this.type }, t.prototype.callContainerMethod = function (t, e, r) { void 0 === r && (r = null); var n = r; switch (this.type) { case "GoogleAmp": this.googleAmp[t] && (n = this.googleAmp[t].apply(this.googleAmp, e)); break; case "SafeFrame": this.safeFrame[t] && (n = this.safeFrame[t].apply(this.safeFrame, e)) }return n }, t.prototype.isVisible = function () { return this.callContainerMethod("isVisible", [], !1) }, t.prototype.getInViewPercentage = function () { return this.callContainerMethod("getInViewPercentage", [], 0) }, t.prototype.setContainerSize = function (t, e) { return this.callContainerMethod("setContainerSize", [t, e]) }, t.prototype.getContainerSize = function () { return this.callContainerMethod("getContainerSize", [], { height: null, width: null }) }, t.prototype.noAdToDisplay = function () { this.callContainerMethod("noAdToDisplay", []) }, t }(); function Bt() { return Bt = xt(It().mark((function t(e, r, n) { var i, o; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return i = new Ht(e), o = !0, t.next = 4, i.detectEnvironment(); case 4: "SafeFrame" === t.sent && r.report("SAFEFRAME", "AdTag loaded in SafeFrame", { slot: n, version: "8.22.0" }, o); case 6: case "end": return t.stop() } }), t) }))), Bt.apply(this, arguments) } var qt = { reportSafeFrame: function (t, e, r) { return Bt.apply(this, arguments) } }; var zt = { isDebugMode: function (t) { return !!h(d(t), "krg_debug") } }; var Wt = { reportAdMetric: function (t, e, r) { var n = { value: t.value || 1, type: t.type, adFormat: e.format || "unknown", adTagVersion: t.version, adSlot: e.slot || "unknown", errCode: t.errCode || "", videoType: t.videoType || "", vpaidClickable: t.vpaidClickable || 0 }; r.reportAdMetric(n, (function (e) { null === e ? r.debug("Ad Metrics reported for " + t.type) : r.debug("Failed reporting Ad Metrics for " + t.type) })) } }, Gt = __webpack_require__(3112); function Yt(t, e) { return Yt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Yt(t, e) } function Zt(t, e) { t.prototype = Object.create(e.prototype), t.prototype.constructor = t, Yt(t, e) } var Jt = function () { function t(t, e) { this.win = t, this.logger = e, this.name = "", this.ready = !1, this.readyCallbacks = [], this.readyTimeout = 1e3 } var e = t.prototype; return e.load = function () { var t = this; return new Promise((function (e) { t.setReady(), e() })) }, e.isEnabled = function () { var t = !1, e = r()(this.win, "Kargo.Config.getGlobalConfig", (function () { return null }))(); e && (r()(e, "getEnabledPlugins", (function () { return [] }))().indexOf(this.name) > -1 && (t = !0)); return t }, e.setReady = function () { this.ready = !0; for (var t = 0; t < this.readyCallbacks.length; t++)this.readyCallbacks[t](); this.readyCallbacks = [] }, e.onReady = function () { var t = this; return new Promise((function (e) { t.ready ? e() : t.readyCallbacks.push((function () { e() })) })) }, e.setReadyOnTimeout = function (t) { var e = this; void 0 === t && (t = this.readyTimeout), this.win.setTimeout((function () { e.isReady() || e.setReady() }), t) }, e.isReady = function () { return this.ready }, t }(), Qt = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).name = "IframeBuster", e.errFactory = new E("IframeBuster"), e.TIMEOUT = 2e3, e.active = !1, e } Zt(e, t); var n = e.prototype; return n.load = function () { var t = xt(It().mark((function t() { var e = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", new Promise(function () { var t = xt(It().mark((function t(r) { var n; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (o(e.win)) { t.next = 5; break } e.setReady(), r(), t.next = 20; break; case 5: return n = new Ht(e.win), t.prev = 6, t.next = 9, n.detectEnvironment(); case 9: null === t.sent && (e.active = !0), e.setReady(), r(), t.next = 18; break; case 15: t.prev = 15, t.t0 = t.catch(6), e.logger.error(t.t0); case 18: e.setReadyOnTimeout(); case 20: case "end": return t.stop() } }), t, null, [[6, 15]]) }))); return function (e) { return t.apply(this, arguments) } }())); case 1: case "end": return t.stop() } }), t) }))); return function () { return t.apply(this, arguments) } }(), n.isActive = function () { return this.active }, n.requestAd = function (t, e) { var n = this; return new Promise((function (i, o) { n.logger.report("IFRAME", "AdTag loaded in Cross Origin Iframe", { slot: t, version: "8.22.0" }); var a = d(n.win).match(/^https?:\/\/[\.a-z0-9-]+\.[a-z]+(?::\d+)?/), s = ""; if (a && a[0] && (s = a[0]), s) { var c = s + "/krg_iframebuster.html", l = null, u = r()(n.win, "Kargo.Config.getGlobalConfig", (function () { return null }))(); u && (l = u.getAdTagUrl()) && (e.adTagUrl = l); var h = r()(n.win, "Kargo.self_url", null); if (!l && h && (l = h), l) { var g, p = n.win.document.createElement("iframe"); p.style.visibility = "hidden", p.style.position = "absolute", p.style.width = "1px", p.style.height = "1px", p.style.top = "0px", p.style.left = "0px", p.src = c; var f = function (a) { var s = function (t) { n.win.clearTimeout(g), n.win.removeEventListener("message", f), o(n.errFactory.errGet("Source Iframe")) }; if (a.origin.indexOf("krg_iframebuster.html") > -1 && a.data && a.data.status) { if (!a.source) return void s(n.errFactory.errGet("Source Iframe")); var c = r()(a.source, "Kargo.IframeBuster"); if (!c) return void s(n.errFactory.errGet("IframeBuster", "Iframe")); "ready" === a.data.status && c.loadAdTag(l, (function (r) { if (n.win.removeEventListener("message", f), r) s(); else { var o = c.getTopNamespace(); o && o.AdTag ? o.AdTag.requestAd(t, e, (function () { i() })) : s(n.errFactory.errGet("Top Namespace")) } })) } }; n.win.addEventListener("message", f), n.win.document.body.appendChild(p), g = n.win.setTimeout((function () { n.win.document.body.removeChild(p), n.win.addEventListener("message", f), o(n.errFactory.errLoad("IframeBuster")) }), n.TIMEOUT) } else o(n.errFactory.errCant("determine AdTag Url")) } else o(n.errFactory.errCant("use iFrameBuster", "", "no referring domain")) })) }, e }(Jt), Xt = "Chrome", $t = "Safari", te = "Firefox", ee = "Opera", re = "Edge", ne = "Android", ie = "ios", oe = "Windows", ae = "MacOS", se = "other", ce = "Mobile"; function le(t) { return t.toLowerCase() } function ue(t) { var e = t.navigator.userAgent, r = se; return e.indexOf("".concat(re, "/")) > -1 ? r = le(re) : e.indexOf("".concat(Xt, "/")) > -1 ? r = le(Xt) : e.indexOf("".concat($t, "/")) > -1 ? r = le($t) : e.indexOf("".concat(te, "/")) > -1 ? r = le(te) : e.indexOf(ee) > -1 ? r = le(ee) : e.indexOf("MSIE") > -1 || e.indexOf("Trident/") > -1 ? r = "ie" : e.indexOf("FBAN/FBForIPhone") > -1 || e.indexOf("FBAN/FBIOS") > -1 || e.indexOf("facebookexternalhit/") > -1 ? r = "facebook" : e.indexOf("Twitter for iPhone") > -1 ? r = "twitter" : e.indexOf("Instagram") > -1 ? r = "instagram" : e.indexOf("Pinterest") > -1 ? r = "pinterest" : e.indexOf("LinkedInApp") > -1 ? r = "linkedIn" : e.indexOf("Snapchat") > -1 && (r = "snapchat"), r } function he(t) { var e = t.navigator.userAgent, r = se; return e.indexOf(ne) > -1 ? r = le(ne) : /iP(hone|od|ad)/.test(e) ? r = ie : /windows/i.test(e) ? r = oe : /macintosh/i.test(e) ? r = ae : /linux/i.test(e) && (r = "Linux"), r } function de(t) { var e = he(t), r = {}; r[le(ne)] = "android", r[le(ie)] = "os", r[le(ae)] = "mac os x", r[le(oe)] = "windows nt"; var n = r[le(e)], i = new RegExp("".concat(n, "\\s+(\\d+)[_\\.](\\d+)?[_\\.]?(\\d+)?")), o = le(t.navigator.userAgent).match(i) || [0, 0]; return parseInt(o[1], 10) } function ge(t) { var e = t.navigator.userAgent; return e.indexOf(ce) > -1 && !/iPad|Xoom|SCH-I800|Kindle/.test(e) } function pe(t) { var e = t.navigator.userAgent; return /iPad|Xoom|SCH-I800|Kindle/.test(e) || e.indexOf(ne) >= 0 && e.indexOf(ce) < 0 } function fe(t, e) { for (var r, n = t.document.cookie.split(";"), i = null, o = "".concat(e, "="), a = 0; a < n.length; a += 1) { for (; " " === n[a].charAt(0);)n[a] = n[a].substring(1, n[a].length); if (0 === n[a].indexOf(o)) { r = n[a].substring(o.length, n[a].length); try { i = JSON.parse(r) } catch (t) { i = r } return i } } return null } function ve(t, e, r, n) { void 0 === n && (n = 0); var i = "".concat(e, "="); if (i += "object" == typeof r ? JSON.stringify(r) : r, n) { var o = new Date(Date.now() + n); i += "; expires=".concat(o.toUTCString()) } i += "; path=/"; var a = he(t), s = de(t), c = i; (a !== ie || s >= 13) && (c += "; SameSite=None; Secure"), t.document.cookie = c, null === fe(t, e) && (t.document.cookie = i) } function me(t) { for (var e = t, r = t.top; e !== r;) { var n = void 0; try { n = e.parent.location.href } catch (t) { n = !1 } if (!n) break; for (var i = e.parent.document.getElementsByTagName("iframe"), o = void 0, a = null, s = 0; s < i.length; s += 1)if ((o = i[s]).contentWindow === e) { a = o; break } if (a && a.className.split(" ").indexOf("krg-nobust") > -1) break; e = e.parent } return e } var ke = me(window), ye = __webpack_require__(4234); function be(t, e) { return decodeURIComponent((new RegExp("".concat(e, "=(.+?)(&|$)"), "i").exec(t) || ["", ""])[1]) } function we(t) { var e = ""; try { e = t.location.href } catch (t) { } return t.AMP_CONTEXT_DATA && t.AMP_CONTEXT_DATA.sourceUrl ? e = t.AMP_CONTEXT_DATA.sourceUrl : t.context && t.context.sourceUrl ? e = t.context.sourceUrl : function (t) { var e; try { e = t.top.location.href } catch (t) { e = null } return !e }(t) && t.document.referrer ? e = t.document.referrer : be(e, "content_url") && (e = be(e, "content_url")), e } var _e = function () { var t = function (e, r) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]) }, t(e, r) }; return function (e, r) { if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null"); function n() { this.constructor = e } t(e, r), e.prototype = null === r ? Object.create(r) : (n.prototype = r.prototype, new n) } }(), Ae = function () { return Ae = Object.assign || function (t) { for (var e, r = 1, n = arguments.length; r < n; r++)for (var i in e = arguments[r]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t }, Ae.apply(this, arguments) }, Ce = function (t) { function e(e, r) { void 0 === r && (r = {}); var n = this.constructor, i = t.call(this, e) || this; return Object.setPrototypeOf(i, n.prototype), i.message = i.buildErrorMessage(e || "", r), i } return _e(e, t), e.prototype.addContext = function (t, e) { var r = e.ctx, n = e.moduleName, i = e.prep, o = e.reason, a = t || ""; if (n && (a = "".concat(n, ": ").concat(a)), r) { var s = i || "in"; a = "".concat(a, " ").concat(s, " ").concat(r) } return o && (a += ": ".concat(o)), a }, e.prototype.buildErrorMessage = function (t, e) { return this.addContext(t, e) }, e }(Error), xe = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot ".concat(t), e) }, e }(Ce), Ee = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is disabled"), e) }, e }(Ce), Ie = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot load ".concat(t), e) }, e }(Ce), Oe = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Cannot get ".concat(t), e) }, e }(Ce), De = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { var r = t ? "No ".concat(t) : "Empty", n = "".concat(r, " response"); return this.addContext(n, e) }, e }(Ce), Se = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " not supported"), Ae({ prep: e.prep || "by" }, e)) }, e }(Ce), Re = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is not set"), e) }, e }(Ce), Te = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("".concat(t, " is invalid"), e) }, e }(Ce), Ve = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return _e(e, t), e.prototype.buildErrorMessage = function (t, e) { return this.addContext("Request for ".concat(t, " timed out"), Ae({ prep: e.prep || "after" }, e)) }, e }(Ce), Le = function () { function t(t) { this.moduleName = t } return t.prototype.errCant = function (t, e, r) { return new xe(t, { ctx: e, reason: r, moduleName: this.moduleName }) }, t.prototype.errDisabled = function (t, e) { return new Ee("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errLoad = function (t, e) { return new Ie("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errGet = function (t, e) { return new Oe("".concat(t), { ctx: e, moduleName: this.moduleName }) }, t.prototype.errNew = function (t) { return new Ce(t, { moduleName: this.moduleName }) }, t.prototype.errNoResponse = function (t, e) { return new De(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errNoSupport = function (t, e) { return new Se(t, { ctx: e, prep: "by", moduleName: this.moduleName }) }, t.prototype.errNotSet = function (t, e) { return new Re(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errInvalid = function (t, e) { return new Te(t, { ctx: e, moduleName: this.moduleName }) }, t.prototype.errTimeout = function (t, e) { return new Ve(t, { ctx: e, moduleName: this.moduleName }) }, t }(), Pe = function (t, e) { var r = {}; for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var i = 0; for (n = Object.getOwnPropertySymbols(t); i < n.length; i++)e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]]) } return r }; new Le("ad-util/request"); function Me(t, e, r) { void 0 === r && (r = !1); var n = e, i = t.document.createElement("img"); if (i.style.position = "absolute", i.style.visibility = "hidden", i.style.left = "-9999px", i.style.top = "0", r && (n += "".concat(e.indexOf("?") > -1 ? "&" : "?", "_cb=").concat(Date.now() * Math.random())), -1 !== n.indexOf("tk.kargo.com")) { var o = (0, ye.xF)(t, "Kargo.Plugin.Cerberus.getLexId"); o && o() && (n = function (t, e) { if (!e) return t; var r, n = t; return Object.keys(e).forEach((function (t) { r = e[t], n += "".concat(n.indexOf("?") > -1 ? "&" : "?").concat(t, "=").concat(encodeURIComponent(r)) })), n }(n, { kid: o() })) } var a, s = function (t) { t.parentNode && t.parentNode.removeChild(t) }; return i.addEventListener("load", (function () { t.clearTimeout(a), s(i) }), !1), a = t.setTimeout((function () { s(i) }), 8e3), i.src = n, t.document.body.appendChild(i), i } function Ne(t) { t && t.start() } function Fe(t) { t && t.stop() } function Ue(t, e, r, n, i, o) { if (void 0 === o && (o = {}), t && t.length) { var a = new XMLHttpRequest, s = o.latencyTracker; n && (a.withCredentials = !0), r && (a.timeout = r), a.onload = function () { if (Fe(s), a.status >= 200 && a.status < 400) { var t = (a.responseText || "").trim(); if (t.length) { try { t = JSON.parse(t) } catch (t) { } i(null, t) } else i(new Error("Empty Response")) } else i(new Error("GET Request Failed with Status: ".concat(a.status, " - ").concat(a.statusText))) }, a.ontimeout = function (t) { i(t) }, a.onerror = function (t) { i(t) }, a.open("GET", t, !0), Ne(s), a.send() } else i(new Error("Invalid URL")) } var Ke = function () { function t(t, e, r, n, i) { void 0 === i && (i = 1), this.win = t, this.dataBucket = e, this.allowedReportParamKeys = r, this.params = n, this.counter = i } return t.prototype.createReportUrl = function () { var t = this, e = "".concat("https://ad-monitor.kargo.com", "?data="), r = this.dataBucket; return Object.keys(this.params).forEach((function (e) { if (t.allowedReportParamKeys.has(e)) { var n = t.params[e]; if (n || 0 === n || !1 === n) { var i = t.escapeLineProtocolTagKeyOrValue(t.params[e]); r += ",".concat(t.escapeLineProtocolTagKeyOrValue(e), "=").concat(i) } } })), r += " value=".concat(this.counter), "".concat(e).concat(encodeURIComponent(r)) }, t.prototype.escapeLineProtocolTagKeyOrValue = function (t) { return "object" == typeof t ? "invalid" : "".concat(t).replace(/,|\s|=/g, "\\$&") }, t.prototype.report = function () { try { !function (t, e, r, n) { var i = r.timeout, o = void 0 === i ? 0 : i, a = r.withCredentials; Ue(t, 0, o, void 0 !== a && a, n, Pe(r, ["timeout", "withCredentials"])) }(this.createReportUrl(), this.win, { timeout: 1e3, withCredentials: !1 }, (function () { })) } catch (t) { console.error(t) } }, t }(), je = new Set(["browser", "creative", "err_code", "format", "os", "platform", "slot", "version"]), He = { 1: "error", 2: "warn", 3: "log", 4: "debug" }, Be = function () { function t(t, e, r, n) { void 0 === e && (e = ""), void 0 === r && (r = 3), void 0 === n && (n = true), this.label = e, this.level = r, this.reportingEnabled = n, this.win = t } return t.prototype.setLabel = function (t) { this.label = t }, t.prototype.setLevel = function (t) { this.level = t }, t.prototype.setReporting = function (t) { this.reportingEnabled = t }, t.prototype.getLabelString = function () { var t = "[KARGO]"; if (this.label) if ((0, ye.cy)(this.label)) for (var e = 0; e < this.label.length; e += 1)t += "[".concat(this.label[e], "]"); else t += "[".concat(this.label, "]"); return t }, t.prototype.write = function (t, e) { var r; if ((0, ye.cy)(e) && 0 !== e.length) { var n = we(this.win), i = (0, ye.xF)(this.win, "Kargo.Config.getGlobalConfig"); if (i && i() && i().isDebug() || be(n, "krg_debug") || t <= this.level) { var o = e; 4 === t ? o = ["%c".concat(this.getLabelString()), "color: #FF7500"].concat(o) : o.unshift(this.getLabelString()); for (var a = 0; a < o.length; a += 1)o[a] instanceof Error ? o[a] = (o[a].name ? "".concat(o[a].name, " - ") : "") + o[a].message : "object" != typeof o[a] || o[a] instanceof HTMLElement || (o[a] = (0, ye.h1)({}, o[a])); try { (r = this.win.console)[He[t]].apply(r, o) } catch (t) { } } } }, t.prototype.log = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(3, t) }, t.prototype.warn = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(2, t) }, t.prototype.error = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(1, t) }, t.prototype.debug = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; this.write(4, t) }, t.prototype.report = function (t, e, r, n) { void 0 === r && (r = {}), void 0 === n && (n = !1); try { if (this.reportingEnabled) { var i = { url: we(this.win), err_code: t, msg: e, platform: (c = this.win, ge(c) ? "MobileWeb" : pe(c) ? "TabletWeb" : "Desktop"), os: he(this.win), browser: ue(this.win) }; i = (0, ye.h1)(i, r); var o = "https://s3.amazonaws.com/log.kargo.com/adtag.error", a = []; Object.keys(i).forEach((function (t) { a.push("".concat(encodeURIComponent(t), "=").concat(encodeURIComponent(i[t]))) })); var s = a.join("&"); if (s.length && (o += "?".concat(s)), o = this.scrubString(o), Me(this.win, o), !n) new Ke(this.win, "ad-tag-error", je, i).report() } } catch (t) { console.error(t) } var c }, t.prototype.reportAdMetric = function (t, e) { var r = { format: t.adFormat, version: t.adTagVersion, slot: t.adSlot }; "" !== t.errCode && (r.err_code = t.errCode), "gam-iframes" === t.type && (r.gam_iframes = t.gamIframes), "sticky-overlap" === t.type && (r.sticky_overlap = t.stickyOverlap), "vpaid-clickable" === t.type && (r.vpaid_clickable = t.vpaidClickable); var n = "".concat("https://ad-metrics.kargo.com/api/v1/send", "?metric=").concat(t.type, "&value=").concat(t.value), i = []; Object.keys(r).forEach((function (t) { i.push('"'.concat(encodeURIComponent(t), '":"').concat(encodeURIComponent(r[t]), '"')) })), i.length && (n += "&params={".concat(i, "}")), Ue(n, this.win, 2e3, !1, (function (t) { e && e(t) })) }, t.prototype.scrubString = function (t) { return t.replace(/%25/g, "") }, t }(), qe = new Be(ke, "Ad Data"), ze = function () { function t() { this.STORE_PREFIX = "krg_", this.COOKIE_LIFE_TIME = 31536e6, this.data = { expireTime: Date.now() }, this.isCookieStorageEnabled = !1 } return t.supportsLocalStorage = function () { var t = !1; try { var e = "__storage_test__"; ke.localStorage.setItem(e, e), ke.localStorage.removeItem(e), t = !0 } catch (t) { } return t }, t.prototype.enableCookieStorage = function (t) { this.isCookieStorageEnabled = t }, t.prototype.getData = function () { return this.data.syncIds && delete this.data.syncIds, this.data }, t.prototype.getExpireTime = function () { return this.data.expireTime }, t.prototype.saveData = function () { this.data.expireTime = Date.now() + this.DATA_LIFE_TIME, t.supportsLocalStorage() && this.updateStorageData(), this.isCookieStorageEnabled ? this.updateCookieData() : this.removeCookieData() }, t.prototype.removeData = function () { t.supportsLocalStorage() && this.removeStorageData(), this.removeCookieData() }, t.prototype.clearData = function () { this.data = this.EMPTY_DATA, this.saveData() }, t.prototype.isExpired = function () { return Date.now() > this.data.expireTime }, t.prototype.fetchData = function () { this.isCookieStorageEnabled && (this.fetchCookieData(), this.data.segments && delete this.data.segments), t.supportsLocalStorage() && this.fetchStorageData(), this.isCookieStorageEnabled && this.updateCookieData() }, t.prototype.getStoreName = function () { return this.STORE_PREFIX + this.STORE_NAME }, t.prototype.encodeDataForStorage = function (t) { return btoa(JSON.stringify(t)) }, t.prototype.decodeDataFromStorage = function (t) { var e = null; try { e = JSON.parse(atob(t)) } catch (t) { } return e }, t.prototype.encodeDataForCookie = function (t) { return this.encodeDataForStorage(t) }, t.prototype.decodeDataFromCookie = function (t) { return this.decodeDataFromStorage(t) }, t.prototype.fetchStorageData = function () { var t = ke.localStorage.getItem(this.getStoreName()); if (t) { var e = this.decodeDataFromStorage(t); e && (this.data = e) } }, t.prototype.updateStorageData = function () { try { var t = this.cleanDataForLocalStorage(this.data); ke.localStorage.setItem(this.getStoreName(), this.encodeDataForStorage(t)) } catch (t) { t instanceof Error && qe.report("DATA", t.message) } }, t.prototype.removeStorageData = function () { ke.localStorage.removeItem(this.getStoreName()) }, t.prototype.fetchCookieData = function () { var t = fe(ke, this.getStoreName()); if (t) { var e = this.decodeDataFromCookie(t); e && (delete e.segments, this.data = e) } }, t.prototype.updateCookieData = function () { var t = this.cleanDataForCookie(this.data); ve(ke, this.getStoreName(), this.encodeDataForCookie(t), this.COOKIE_LIFE_TIME) }, t.prototype.removeCookieData = function () { ve(ke, this.getStoreName(), "", 1) }, t.prototype.cleanDataForCookie = function (t) { var e = Object.assign({}, t); return delete e.segments, e }, t.prototype.cleanDataForLocalStorage = function (t) { return t }, t }(), We = function () { var t = function (e, r) { return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]) }, t(e, r) }; return function (e, r) { if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null"); function n() { this.constructor = e } t(e, r), e.prototype = null === r ? Object.create(r) : (n.prototype = r.prototype, new n) } }(), Ge = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.MAX_LOCALSTORAGE_SEGMENTS = 25, e.UID_STORE_NAME = "".concat(e.STORE_PREFIX, "uid"), e.OLD_STORE_NAME = "".concat(e.STORE_PREFIX, "cerberus"), e.STORE_NAME = "crb", e.DATA_LIFE_TIME = 864e5, e.EMPTY_DATA = { clientId: null, tdID: null, lexId: null, segments: [], ktcId: null, expireTime: Date.now() + e.DATA_LIFE_TIME, lastSyncedAt: null, pageViewId: "", pageViewTimestamp: null, pageViewUrl: null, usp: null }, e.data = Object.assign({}, e.EMPTY_DATA), e.isCookieStorageEnabled = !0, e } return We(e, t), e.prototype.saveData = function () { if (t.prototype.saveData.call(this), this.isCookieStorageEnabled) { var e = { clientId: this.data.clientId, userId: this.data.lexId, optOut: "optout" === this.data.lexId }; ve(ke, this.UID_STORE_NAME, this.encodeUIDCookieData(e), this.COOKIE_LIFE_TIME) } }, e.prototype.removeData = function () { t.prototype.removeData.call(this), ve(ke, this.UID_STORE_NAME, "", 1) }, e.prototype.clearData = function () { if (t.prototype.clearData.call(this), this.isCookieStorageEnabled) { ve(ke, this.UID_STORE_NAME, this.encodeUIDCookieData({ clientId: null, userId: null, optOut: !1 }), this.COOKIE_LIFE_TIME) } }, e.prototype.getData = function () { return t.prototype.getData.call(this) }, e.prototype.encodeDataForCookie = function (t) { return encodeURIComponent(JSON.stringify({ v: btoa(JSON.stringify(t)) })) }, e.prototype.encodeUIDCookieData = function (t) { return encodeURIComponent(JSON.stringify({ v: t })) }, e.prototype.decodeDataFromCookie = function (t) { var e = null; try { e = JSON.parse(atob(JSON.parse(decodeURIComponent(t)).v)) } catch (t) { } return e }, e.prototype.cleanDataForLocalStorage = function (t) { var e, r = Object.assign({}, t); return r.segments = null === (e = r.segments) || void 0 === e ? void 0 : e.slice(0, this.MAX_LOCALSTORAGE_SEGMENTS), r }, e.prototype.getClientId = function () { return this.data.clientId }, e.prototype.setClientId = function (t) { this.data.clientId = t, this.saveData() }, e.prototype.getUserId = function () { return this.data.lexId }, e.prototype.setUserId = function (t) { this.data.lexId = t, this.saveData() }, e.prototype.getSegments = function () { return this.data.segments || null }, e.prototype.setSegments = function (t) { this.data.segments = t, this.saveData() }, e.prototype.getKtcId = function () { return this.data.ktcId }, e.prototype.getTdID = function () { return this.data.tdID }, e.prototype.getUSPrivacy = function () { return this.data.usp }, e.prototype.setKtcId = function (t) { this.data.ktcId = t, this.saveData() }, e.prototype.getLastSyncTime = function () { return this.data.lastSyncedAt }, e.prototype.setLastSyncTime = function (t) { this.data.lastSyncedAt = t, this.saveData() }, e.prototype.isOptOut = function () { return "optout" === this.getUserId() }, e.prototype.setOptOut = function (t) { t ? (this.data = Object.assign({}, this.EMPTY_DATA), this.data.lexId = "optout") : "optout" === this.data.lexId && (this.data.lexId = null), this.saveData() }, e.prototype.setTimeAndUrl = function () { this.data.pageViewTimestamp = Date.now(), this.data.pageViewUrl = ke.location.origin + ke.location.pathname, this.saveData() }, e.prototype.setBrandedTakeover = function (t, e) { this.data.pageViewId = t ? e : "", this.saveData() }, e.prototype.setUSPrivacy = function (t) { this.data.usp = t, this.saveData() }, e.prototype.setTdID = function (t) { this.data.tdID = t, this.saveData() }, e }(ze); function Ye(t, e) { for (var r, n = t.document.cookie.split(";"), i = null, o = "".concat(e, "="), a = 0; a < n.length; a += 1) { for (; " " === n[a].charAt(0);)n[a] = n[a].substring(1, n[a].length); if (0 === n[a].indexOf(o)) { r = n[a].substring(o.length, n[a].length); try { i = JSON.parse(r) } catch (t) { i = r } return i } } return null } var Ze = function (t, e, r, n) { return new (r || (r = Promise))((function (i, o) { function a(t) { try { c(n.next(t)) } catch (t) { o(t) } } function s(t) { try { c(n.throw(t)) } catch (t) { o(t) } } function c(t) { var e; t.done ? i(t.value) : (e = t.value, e instanceof r ? e : new r((function (t) { t(e) }))).then(a, s) } c((n = n.apply(t, e || [])).next()) })) }, Je = function (t, e) { var r, n, i, o, a = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (c) { return function (s) { if (r) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (a = 0)), a;)try { if (r = 1, n && (i = 2 & s[0] ? n.return : s[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, s[1])).done) return i; switch (n = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return a.label++, { value: s[1], done: !1 }; case 5: a.label++, n = s[1], s = [0]; continue; case 7: s = a.ops.pop(), a.trys.pop(); continue; default: if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { a = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { a.label = s[1]; break } if (6 === s[0] && a.label < i[1]) { a.label = i[1], i = s; break } if (i && a.label < i[2]) { a.label = i[2], a.ops.push(s); break } i[2] && a.ops.pop(), a.trys.pop(); continue }s = e.call(t, a) } catch (t) { s = [6, t], n = 0 } finally { r = i = 0 } if (5 & s[0]) throw s[1]; return { value: s[0] ? s[1] : void 0, done: !0 } }([s, c]) } } }, Qe = function () { function t(t) { this.win = t, this.GVLID = "972", this.usPrivacyString = "", this.gdprData = { gdprApplies: 0, tcString: "", eventStatus: "" }, this.gppData = { gppString: "", applicableSections: [] } } return t.prototype.fetchConsents = function (t) { return Ze(this, void 0, void 0, (function () { var e, r, n; return Je(this, (function (i) { switch (i.label) { case 0: return e = this, [4, this.fetchUSPrivacy(t)]; case 1: return e.usPrivacyString = i.sent(), r = this, [4, this.fetchGDPR(t)]; case 2: return r.gdprData = i.sent(), n = this, [4, this.fetchGPP(t)]; case 3: return n.gppData = i.sent(), [2] } })) })) }, t.prototype.getUSPrivacyConsent = function () { return this.usPrivacyString }, t.prototype.getGDPRConsent = function () { return this.gdprData }, t.prototype.getGPPConsent = function () { return this.gppData }, t.prototype.fetchUSPrivacy = function (t) { return Ze(this, void 0, void 0, (function () { var e, r, n = this; return Je(this, (function (i) { return e = new Promise((function (e) { setTimeout(e, t, "") })), r = new Promise((function (t) { var e = Ye(n.win, "usprivacy"); e ? t(e) : n.win.__uspapi ? n.win.__uspapi("getUSPData", 1, (function (e, r) { t(r ? e.uspString : "") })) : t("") })), [2, Promise.race([e, r])] })) })) }, t.prototype.fetchGDPR = function (t) { return Ze(this, void 0, void 0, (function () { var e, r, n, i = this; return Je(this, (function (o) { return e = { gdprApplies: 0, tcString: "", eventStatus: "" }, r = new Promise((function (r) { setTimeout(r, t, e) })), n = new Promise((function (t) { i.win.__tcfapi ? i.win.__tcfapi("ping", 2, (function (r) { var n = function (r, n) { n && "tcloaded" === r.eventStatus ? t(r) : t(e) }; r && "2" === r.apiVersion ? i.win.__tcfapi("getTCData", 2, n) : i.win.__tcfapi("addEventListener", 2, n) })) : t(e) })), [2, Promise.race([r, n])] })) })) }, t.prototype.fetchGPP = function (t) { return Ze(this, void 0, void 0, (function () { var e, r, n, i = this; return Je(this, (function (o) { return e = { gppString: "", applicableSections: [] }, r = new Promise((function (r) { setTimeout(r, t, e) })), n = new Promise((function (t) { if (i.win.__gpp) { var r = i.win.__gpp; r("addEventListener", (function (n) { if ("error" !== n.pingData.cmpStatus) { if ("stub" !== n.pingData.cmpStatus) if ("1.0" === n.pingData.gppVersion) { var i = r("getGPPData"); if (i && void 0 !== i.gppString && void 0 !== i.applicableSections) return void t(i); t(e) } else "1.1" === n.pingData.gppVersion ? t({ gppString: n.pingData.gppString, applicableSections: n.pingData.applicableSections }) : t(e) } else t(e) })) } else t(e) })), [2, Promise.race([r, n])] })) })) }, t.prototype.getConsentParams = function () { return "gdpr=".concat(this.gdprData.gdprApplies, "&gdpr_consent=").concat(this.gdprData.tcString, "&us_privacy=").concat(this.usPrivacyString, "&gpp=").concat(this.gppData.gppString, "&gpp_sid=").concat(this.gppData.applicableSections.join(",")) }, t }(), Xe = function (t) { return t instanceof Error ? t.message : String(t) }, $e = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).name = "Cerberus", e.errFactory = new E("Cerberus"), e.HOSTNAME = "crb.kargo.com", e.SEGMENT_HOSTNAME = "cma.kargo.com", e.RESYNC_IN = 864e5, e.GVLID = "972", e.cerberusData = new Ge, e.privacy = new Qe(e.win), e } Zt(e, t); var n = e.prototype; return n.doNotTrack = function () { return "1" === this.win.navigator.doNotTrack }, n.isOptOut = function () { return this.doNotTrack() || this.cerberusData.isOptOut() }, n.segmentsEnabled = function () { return !!Ye(this.win, "krg_seg") }, n.getClientId = function () { return this.cerberusData.getClientId() }, n.getLexId = function () { return this.isOptOut() ? null : this.cerberusData.getUserId() }, n.getSegments = function () { return this.isOptOut() ? [] : this.cerberusData.getSegments() }, n.getTdID = function () { return this.cerberusData.getTdID() }, n.fetchConsents = function () { var t = xt(It().mark((function t(e) { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, this.privacy.fetchConsents(e); case 2: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), n.getUSPrivacy = function () { return "" !== this.privacy.getUSPrivacyConsent() ? this.privacy.getUSPrivacyConsent() : this.cerberusData.getUSPrivacy() || "" }, n.gdprApplies = function () { return 0 !== this.privacy.getGDPRConsent().gdprApplies }, n.gdprConsent = function () { return this.privacy.getGDPRConsent().tcString }, n.gppString = function () { return this.privacy.getGPPConsent().gppString }, n.gppApplicableSections = function () { return this.privacy.getGPPConsent().applicableSections }, n.handleBrandedTakeover = function (t, e) { this.cerberusData.setBrandedTakeover(t, e) }, n.restoreData = function () { this.cerberusData.fetchData(), this.logger.debug("Restored Cookie Data: ", this.cerberusData.getData()) }, n.needsToResync = function () { var t = !0, e = this.cerberusData.getLastSyncTime(), r = "Need to Resync - "; return e ? this.cerberusData.isExpired() ? this.logger.debug(r + "Expiration Time Reached") : Date.now() - e > this.RESYNC_IN ? this.logger.debug(r + "Over 24 Hours Since Last Sync") : t = !1 : this.logger.debug(r + "No Last Sync Time Set"), t }, n.load = function () { var t = xt(It().mark((function t() { var e = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", new Promise(function () { var t = xt(It().mark((function t(n) { var i, o, a, s, l, u, h, d; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (e.restoreData(), e.win.__krg_cerberus_disable_cookies && e.cerberusData.enableCookieStorage(!1), e.cerberusData.setTimeAndUrl(), !e.isOptOut()) { t.next = 8; break } return e.logger.debug("User has Opted Out, Emptying Cookie"), e.setReady(), n(), t.abrupt("return"); case 8: return t.next = 10, e.fetchConsents(10); case 10: if (e.cerberusData.setUSPrivacy(e.privacy.getUSPrivacyConsent()), e.getClientId() || e.cerberusData.setClientId((0, c.lk)(e.win)), i = e.getClientId(), e.logger.debug("Client Id: " + e.getClientId()), o = Ye(e.win, "pbjs-unifiedid")) try { null != (a = JSON.parse(decodeURIComponent(o))) && a.TDID && "string" == typeof a.TDID ? e.cerberusData.setTdID(a.TDID) : e.cerberusData.setTdID("") } catch (t) { e.logger.debug("Unable to parse prebid tdID") } else (s = localStorage.getItem("IXWRAPPERAdserverOrgIp")) && (l = r()(JSON.parse(s), "d.data.uids", "")).length && (null != (u = l.find((function (t) { return "TDID" === t.ext.rtiPartner }))) && u.id && "string" == typeof u.id ? e.cerberusData.setTdID(u.id) : e.cerberusData.setTdID("")); if (!e.needsToResync()) { t.next = 28; break } return t.next = 19, e.makeSyncRequest(i); case 19: return t.prev = 19, t.next = 22, e.fetchSyncIds(i); case 22: t.next = 28; break; case 24: t.prev = 24, t.t0 = t.catch(19), h = Xe(t.t0), e.logger.warn("Error fetching Sync Ids: " + h); case 28: if (!e.segmentsEnabled()) { t.next = 44; break } return t.prev = 29, t.next = 32, e.fetchSegments(i); case 32: t.next = 38; break; case 34: t.prev = 34, t.t1 = t.catch(29), d = Xe(t.t1), e.logger.warn("Error fetching Segments: " + d); case 38: return t.prev = 38, e.setReady(), n(), t.finish(38); case 42: t.next = 46; break; case 44: e.setReady(), n(); case 46: e.setReadyOnTimeout(); case 47: case "end": return t.stop() } }), t, null, [[19, 24], [29, 34, 38, 42]]) }))); return function (e) { return t.apply(this, arguments) } }())); case 1: case "end": return t.stop() } }), t) }))); return function () { return t.apply(this, arguments) } }(), n.getConsentParams = function () { return this.privacy.getConsentParams() }, n.makeSyncRequest = function () { var t = xt(It().mark((function t(e) { var r = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", new Promise((function (t) { var n = r.win.__krg_cerberus_partners ? "&partners=" + r.win.__krg_cerberus_partners.toString() : "", i = r.win.document.createElement("iframe"); i.style.display = "none", i.src = "https://" + r.HOSTNAME + "/api/v1/initsync/" + e + "?" + r.getConsentParams(), i.src += n, r.logger.debug("Initiating ID syncing..."), i.addEventListener("load", (function () { r.win.setTimeout((function () { vt(i) }), 1e3), t() })), r.win.document.body.appendChild(i) }))); case 1: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), n.fetchSyncIds = function (t) { var e = this; return new Promise((function (r, n) { var i = "https://" + e.HOSTNAME + "/api/v1/ids/" + t + "?" + e.getConsentParams(); e.logger.debug("Fetching Sync IDs..."); V(i, e.win, 0, !0, (function (t, i) { if (t) n(t); else if (i) { var o = null, a = null; try { var s = JSON.parse(atob(i)); o = s.lex_id || s.lexID || null, a = s.ktcid || null } catch (t) { } var c = !(!o || !e.getLexId() || o === e.getLexId()); o && e.logger.debug((c ? "Updated " : "") + "Lex ID from Cerberus: " + o), e.isOptOut() ? e.logger.debug("User has Opted Out, Emptying Cookie") : a && e.logger.debug("KTC ID: " + a), o && e.cerberusData.setUserId(o), a && e.cerberusData.setKtcId(a), e.cerberusData.setLastSyncTime(Date.now()), r() } else n(e.errFactory.errNoResponse()) })) })) }, n.fetchSegments = function (t) { var e = this; return new Promise((function (r, n) { var i = "https://" + e.SEGMENT_HOSTNAME + "/api/v1/segments/" + t + "?" + e.getConsentParams(); e.logger.debug("Fetching segments..."); V(i, e.win, 0, !0, (function (t, i) { if (t) n(t); else if (i) { var o = null, a = null; try { o = i.segments || null, a = i.lexID || null } catch (t) { } var s = !(!a || !e.getLexId() || a === e.getLexId()); a && e.logger.debug((s ? "Updated " : "") + "Lex ID from CMA: " + a), e.isOptOut() ? e.logger.debug("User has Opted Out, Emptying Cookie") : o && e.logger.debug("Segments: " + o), o && e.cerberusData.setSegments(o), a && e.cerberusData.setUserId(a), r() } else n(e.errFactory.errNoResponse()) })) })) }, e }(Jt); var tr = { getPluginTimeout: function (t) { var e = 1500, r = h(d(t), "krg_plugin_timeout"), n = parseInt(r, 10); return t.__krg_plugin_timeout ? e = t.__krg_plugin_timeout : n && (e = n), e } }, er = function () { function t() { } return t.createPlugin = function (t, e) { if (e.Kargo) { e.Kargo.Plugin = e.Kargo.Plugin || {}; var r = new it(e), n = new t(e, r), i = n.name.replace(/([A-Z])/g, " $1").toUpperCase().trim(); return r.setLabel(["PLUGIN", i]), e.Kargo.Plugin[n.name] || (e.Kargo.Plugin[n.name] = n), n.load().then((function () { r.debug("Loaded") })).catch((function (t) { return t })), n } }, t.loadPlugins = function () { var t = xt(It().mark((function t(e, r) { var n, i, o, a, s, c, l, u; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return n = !1, i = r.getConfig(), o = [], (a = this.createPlugin(Qt, e)) && o.push(a), i.settings.enable_cerberus && (s = this.createPlugin($e, e)) && o.push(s), c = tr.getPluginTimeout(e), l = new Promise((function (t) { e.setTimeout((function () { n || (n = !0, t("Plugin Loading Timed out after " + c + "ms")) }), c) })), u = xt(It().mark((function t() { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.prev = 0, t.next = 3, Promise.all(o.map((function (t) { return t.onReady() }))); case 3: return n = !0, t.abrupt("return", "All Plugins Loaded"); case 7: return t.prev = 7, t.t0 = t.catch(0), t.abrupt("return", t.t0); case 10: case "end": return t.stop() } }), t, null, [[0, 7]]) })))(), t.abrupt("return", Promise.race([u, l])); case 10: case "end": return t.stop() } }), t, this) }))); return function (e, r) { return t.apply(this, arguments) } }(), t }(); var rr, nr, ir = function (t, e) { var r = t.filter((function (t) { return e.includes(t) })); return r[r.length - 1] }, or = function (t) { var e = null; return Array.isArray(t) ? e = t : ["string", "number", "object", "function"].indexOf(typeof t) > -1 && null !== t && (e = [t]), e }, ar = ["companion_div", "sc_background_div", "sc_foreground_div", "debug", "externalId", "getAdTimestamp", "positionElement", "positionLocation", "previewMode", "sourceElement", "sourceWindow", "waitForLoad", "onCreate", "onLoad", "onDisplay", "onSizeChange", "onVisible", "onNotVisible", "onViewable", "onDestroy", "platform_version"]; !function (t) { t.ABA_ADHESION_DISPLAY = "ABAAdhesionDisplay", t.ABA_DISPLAY = "ABADisplay", t.ABA_VIDEO = "ABAVideo", t.ADAPTIVE_OUTSTREAM = "AdaptiveOutstream", t.ANCHOR = "Anchor", t.BILLBOARD = "Billboard", t.BOTTOM_BANNER = "BottomBanner", t.BREAKAWAY = "Breakaway", t.BREAKOUT = "Breakout", t.DESKTOP_BREAKOUT = "DesktopBreakout", t.DESKTOP_HOVER = "DesktopHover", t.DESKTOP_RUNWAY = "DesktopRunway", t.FABRIK_OUTSTREAM = "FabrikOutstream", t.HALF_PAGE = "HalfPage", t.HIGH_RISE = "HighRise", t.HOVER = "Hover", t.KEY_ART = "KeyArt", t.LARGE_LEADERBOARD = "LargeLeaderboard", t.LEADERBOARD = "Leaderboard", t.LIGHTHOUSE = "Lighthouse", t.MIDDLE_BANNER = "MiddleBanner", t.NATIVE = "Native", t.NATIVE_VIDEO_KEY_ART = "NativeVideoKeyArt", t.NONVAST_OUTSTREAM_VIDEO = "NonVastOutstreamVideo", t.OUTSTREAM_VIDEO = "OutstreamVideo", t.RUNWAY = "Runway", t.SIDEKICK = "Sidekick", t.SOCIAL_CANVAS = "SocialCanvas", t.SWIPE_UP = "SwipeUp", t.TOP_BANNER = "TopBanner", t.ULTRAWIDE = "Ultrawide", t.UPTICK = "Uptick", t.VENTI = "Venti", t.VIDEO_ANCHOR = "VideoAnchor", t.VIDEO_HALO = "VideoHalo", t.VIDEO_VENTI = "VideoVenti", t.WIDESKYSCRAPER = "WideSkyscraper", t.WRAPPER = "Wrapper" }(rr || (rr = {})), function (t) { t.HOVER = "Hover", t.BANNER = "Banner", t.VAST_DELIVERED_OUTSTREAM = "VastDeliveredOutstream" }(nr || (nr = {})); var sr = [{ id: 3, sspID: 4, name: rr.HOVER, type: nr.HOVER, dfpShortname: rr.HOVER.toLowerCase(), size: { w: 320, h: 50 } }, { id: 5, sspID: 5, name: rr.ANCHOR, type: nr.HOVER, dfpShortname: rr.ANCHOR.toLowerCase(), size: { w: 320, h: 50 } }, { id: 6, sspID: 6, name: rr.BREAKOUT, type: nr.HOVER, dfpShortname: rr.BREAKOUT.toLowerCase(), size: { w: 320, h: 50 } }, { id: 4, sspID: 7, name: rr.SIDEKICK, type: nr.HOVER, dfpShortname: "side", size: { w: 140, h: 140 } }, { id: 10, sspID: 8, name: rr.TOP_BANNER, type: nr.BANNER, dfpShortname: "top", size: { w: 320, h: 50 } }, { id: 11, sspID: 9, name: rr.MIDDLE_BANNER, type: nr.BANNER, dfpShortname: "mid", size: { w: 300, h: 250 } }, { id: 8, sspID: 11, name: rr.BOTTOM_BANNER, type: nr.BANNER, dfpShortname: "bot", size: { w: 320, h: 50 } }, { id: 17, sspID: 18, name: rr.VENTI, type: nr.BANNER, dfpShortname: rr.VENTI.toLowerCase(), size: { w: 320, h: 460 } }, { id: 19, sspID: 20, name: rr.OUTSTREAM_VIDEO, type: nr.BANNER, dfpShortname: "midvid vastm", size: { w: 300, h: 200 } }, { id: 21, sspID: 23, name: rr.VIDEO_ANCHOR, type: nr.HOVER, dfpShortname: rr.VIDEO_ANCHOR.toLowerCase(), size: { w: 300, h: 250 } }, { id: 23, sspID: 25, name: rr.KEY_ART, type: nr.BANNER, dfpShortname: rr.KEY_ART.toLowerCase(), size: { w: 320, h: 350 } }, { id: 24, sspID: 26, name: rr.NONVAST_OUTSTREAM_VIDEO, type: nr.BANNER, dfpShortname: "novastmidvid", size: { w: 300, h: 200 } }, { id: 25, sspID: 27, name: rr.ABA_DISPLAY, type: nr.BANNER, dfpShortname: "", size: { w: 320, h: 350 } }, { id: 27, sspID: 29, name: rr.ABA_VIDEO, type: nr.BANNER, dfpShortname: "", size: { w: 320, h: 350 } }, { id: 28, sspID: 30, name: rr.ABA_ADHESION_DISPLAY, type: nr.HOVER, dfpShortname: "", size: { w: 320, h: 50 }, minSize: { w: 0, h: 0 } }, { id: 29, sspID: 31, name: rr.BREAKAWAY, type: nr.HOVER, dfpShortname: rr.BREAKAWAY.toLowerCase(), size: { w: 140, h: 140 } }, { id: 30, sspID: 32, name: rr.HIGH_RISE, type: nr.BANNER, dfpShortname: rr.HIGH_RISE.toLowerCase(), size: { w: 320, h: 460 } }, { id: 32, sspID: 33, name: rr.LEADERBOARD, type: nr.BANNER, dfpShortname: rr.LEADERBOARD.toLowerCase(), size: { w: 728, h: 90 } }, { id: 33, sspID: 34, name: rr.WIDESKYSCRAPER, type: nr.BANNER, dfpShortname: "wskyscraper", size: { w: 160, h: 600 } }, { id: 34, sspID: 35, name: rr.HALF_PAGE, type: nr.BANNER, dfpShortname: rr.HALF_PAGE.toLowerCase(), size: { w: 300, h: 600 } }, { id: 35, sspID: 36, name: rr.LARGE_LEADERBOARD, type: nr.BANNER, dfpShortname: "lrgleaderboard", size: { w: 970, h: 90 } }, { id: 36, sspID: 37, name: rr.WRAPPER, type: nr.HOVER, dfpShortname: rr.WRAPPER.toLowerCase(), size: { w: 320, h: 50 } }, { id: 37, sspID: 38, name: rr.SWIPE_UP, type: nr.HOVER, dfpShortname: rr.SWIPE_UP.toLowerCase(), size: { w: 320, h: 100 } }, { id: 38, sspID: 39, name: rr.SOCIAL_CANVAS, type: nr.BANNER, dfpShortname: rr.SOCIAL_CANVAS.toLowerCase(), size: { w: 320, h: 180 } }, { id: 39, sspID: 40, name: rr.BILLBOARD, type: nr.BANNER, dfpShortname: rr.BILLBOARD, size: { w: 970, h: 250 } }, { id: 40, sspID: 41, name: rr.DESKTOP_HOVER, type: nr.HOVER, dfpShortname: rr.DESKTOP_HOVER, size: { w: 728, h: 90 } }, { id: 41, sspID: 42, name: rr.DESKTOP_BREAKOUT, type: nr.HOVER, dfpShortname: rr.DESKTOP_BREAKOUT, size: { w: 970, h: 200 } }, { id: 43, sspID: 43, name: rr.RUNWAY, type: nr.HOVER, dfpShortname: rr.RUNWAY, size: { w: 320, h: 50 } }, { id: 44, sspID: 44, name: rr.DESKTOP_RUNWAY, type: nr.HOVER, dfpShortname: rr.DESKTOP_RUNWAY, size: { w: 970, h: 200 } }, { id: 48, sspID: 46, name: rr.FABRIK_OUTSTREAM, type: nr.VAST_DELIVERED_OUTSTREAM, dfpShortname: rr.FABRIK_OUTSTREAM, size: { w: 300, h: 250 } }, { id: 49, sspID: 45, name: rr.LIGHTHOUSE, type: nr.BANNER, dfpShortname: rr.LIGHTHOUSE, size: { w: 320, h: 460 } }, { id: 50, sspID: 47, name: rr.UPTICK, type: nr.BANNER, dfpShortname: rr.UPTICK, size: { w: 320, h: 350 } }, { id: 51, sspID: 48, name: rr.VIDEO_HALO, type: nr.VAST_DELIVERED_OUTSTREAM, dfpShortname: rr.VIDEO_HALO, size: { w: 300, h: 250 } }, { id: 52, sspID: 49, name: rr.VIDEO_VENTI, type: nr.VAST_DELIVERED_OUTSTREAM, dfpShortname: rr.VIDEO_VENTI, size: { w: 300, h: 250 } }, { id: 53, sspID: 50, name: rr.ADAPTIVE_OUTSTREAM, type: nr.VAST_DELIVERED_OUTSTREAM, dfpShortname: rr.ADAPTIVE_OUTSTREAM, size: { w: 300, h: 250 } }, { id: 54, sspID: 51, name: rr.ULTRAWIDE, type: nr.VAST_DELIVERED_OUTSTREAM, dfpShortname: rr.ULTRAWIDE, size: { w: 970, h: 250 } }], cr = sr.reduce((function (t, e) { return t[e.name] = e, t }), {}), lr = [rr.ABA_DISPLAY, rr.ABA_VIDEO, rr.FABRIK_OUTSTREAM, rr.HALF_PAGE, rr.HIGH_RISE, rr.KEY_ART, rr.NATIVE_VIDEO_KEY_ART, rr.NATIVE, rr.NONVAST_OUTSTREAM_VIDEO, rr.OUTSTREAM_VIDEO, rr.VENTI, rr.WIDESKYSCRAPER, rr.LIGHTHOUSE, rr.UPTICK, rr.ADAPTIVE_OUTSTREAM, rr.VIDEO_HALO, rr.VIDEO_VENTI], ur = [rr.HIGH_RISE, rr.KEY_ART, rr.NONVAST_OUTSTREAM_VIDEO, rr.OUTSTREAM_VIDEO, rr.FABRIK_OUTSTREAM, rr.VENTI, rr.LIGHTHOUSE, rr.UPTICK, rr.ADAPTIVE_OUTSTREAM, rr.VIDEO_HALO, rr.VIDEO_VENTI], hr = (rr.MIDDLE_BANNER, rr.OUTSTREAM_VIDEO, rr.NONVAST_OUTSTREAM_VIDEO, rr.FABRIK_OUTSTREAM, rr.ADAPTIVE_OUTSTREAM, [rr.OUTSTREAM_VIDEO, rr.VIDEO_ANCHOR, rr.FABRIK_OUTSTREAM]), dr = [rr.TOP_BANNER, rr.MIDDLE_BANNER, rr.BOTTOM_BANNER], gr = [].concat(dr, [rr.ABA_DISPLAY, rr.HOVER, rr.NATIVE, rr.DESKTOP_HOVER, rr.HALF_PAGE, rr.LEADERBOARD, rr.LARGE_LEADERBOARD, rr.WIDESKYSCRAPER]), pr = [rr.KEY_ART, rr.VENTI, rr.LIGHTHOUSE, rr.UPTICK], fr = [rr.BREAKAWAY, rr.WRAPPER, rr.RUNWAY, rr.SWIPE_UP, rr.DESKTOP_BREAKOUT, rr.DESKTOP_RUNWAY], vr = [rr.BREAKAWAY, rr.SIDEKICK, rr.WRAPPER, rr.RUNWAY, rr.SWIPE_UP, rr.VIDEO_ANCHOR], mr = [rr.HALF_PAGE, rr.LARGE_LEADERBOARD, rr.LEADERBOARD, rr.WIDESKYSCRAPER, rr.SOCIAL_CANVAS, rr.BILLBOARD, rr.DESKTOP_HOVER, rr.DESKTOP_RUNWAY, rr.ULTRAWIDE], kr = [rr.MIDDLE_BANNER], yr = [rr.NONVAST_OUTSTREAM_VIDEO, rr.NATIVE_VIDEO_KEY_ART, rr.ABA_VIDEO], br = [rr.FABRIK_OUTSTREAM, rr.OUTSTREAM_VIDEO, rr.VIDEO_ANCHOR, rr.ULTRAWIDE, rr.ADAPTIVE_OUTSTREAM, rr.VIDEO_HALO, rr.VIDEO_VENTI], wr = [rr.FABRIK_OUTSTREAM, rr.OUTSTREAM_VIDEO, rr.NONVAST_OUTSTREAM_VIDEO, rr.ULTRAWIDE, rr.ADAPTIVE_OUTSTREAM, rr.VIDEO_HALO, rr.VIDEO_VENTI], _r = [rr.FABRIK_OUTSTREAM, rr.OUTSTREAM_VIDEO, rr.VIDEO_ANCHOR, rr.NONVAST_OUTSTREAM_VIDEO, rr.NATIVE_VIDEO_KEY_ART, rr.ABA_VIDEO, rr.ULTRAWIDE, rr.ADAPTIVE_OUTSTREAM, rr.VIDEO_HALO, rr.VIDEO_VENTI], Ar = [rr.HALF_PAGE, rr.WIDESKYSCRAPER], Cr = [rr.BREAKAWAY, rr.SIDEKICK, rr.RUNWAY], xr = new E("AdRequest"), Er = function () { function t(t, e, n, i, o, a) { var s, l, u, h = this; this.getId = function () { return h.id }, this.getSlotConfig = function () { return h.slotConfig }, this.getFormatConfig = function () { return h.formatConfig }, this.getSource = function () { return h.source }, this.getCreativeConfig = function () { return h.creativeConfig }, this.getParams = function () { return h.params }, this.setFormatConfig = function () { "VastMiddleBanner" === h.creativeConfig.format && (h.creativeConfig.format = "OutstreamVideo"); var t = h.slotConfig.getAllFormatConfigs(); if (Object.keys(t).forEach((function (t) { t.toLowerCase() === h.creativeConfig.format.toLowerCase() && (h.creativeConfig.format = t) })), h.formatConfig = h.slotConfig.getFormatConfig(h.creativeConfig.format), h.formatConfig) { var e = h.formatConfig.getCreativeConfig(); if (e) { var r = h.creativeConfig.settings; r && (r.branding && (e.branding = r.branding), e.wrapper_fill && "wrapper_fill" in r && (e.wrapper_fill = r.wrapper_fill)), h.creativeConfig.settings = (0, c.h1)(h.creativeConfig.settings || {}, e) } } else h.logger.debug("Format " + h.creativeConfig.format + " not set in slot config!") }, this.getCreativeConfigSource = function () { if (h.creativeConfig.source = {}, h.source && "getKrakenCreativeData" in h.source) { var t, e = h.source.getKrakenCreativeData(); e.krgImpId && (h.id = e.krgImpId), h.creativeConfig.source = e, h.creativeConfig.source.tag = "adtag", h.creativeConfig.source.type = null == (t = h.source) ? void 0 : t.getType() } }, this.setCreativeConfigCSS = function () { h.creativeConfig.css = h.slotConfig.getCss() || "", h.formatConfig && h.formatConfig.getCss && h.formatConfig.getCss() && (h.formatConfig.isIgnoreSlotCss && h.formatConfig.isIgnoreSlotCss() ? h.creativeConfig.css = h.formatConfig.getCss() : h.creativeConfig.css += h.formatConfig.getCss()) }, this.fetchFromSourceTracking = function () { if (h.slotConfig && h.slotConfig.getId()) { var t, e, r = { format: h.creativeConfig.format, creativeSource: h.creativeConfig.sourceName, creativeId: h.creativeConfig.creativeId, line_item_id: null == (t = h.creativeConfig.source) ? void 0 : t.biddableId, deal_id: null == (e = h.creativeConfig.source) ? void 0 : e.dealId }; h.trackEvent("response", h.slotConfig.getId(), r) } }, this.getCreativeConfigFormat = function (t) { var e = t.format, r = "Format '" + t.format + "' not set in '" + t.slot + "' slot config!"; if (!h.creativeConfig.format) { r = "Cannot determine format from ad response"; var n = (h.creativeConfig.content || "").match(/"format":\s*"([\s\S]*?)"/); e = n && n[1] || h.getFormatFromSlot() } return h.logger.warn(r), { creativeConfigFormat: e, msg: r } }, this.win = t, this.logger = e, this.tracking = n, this.slotConfig = i, this.source = o, this.params = a, this.failedResponse = !1, this.creativeConfig = null, this.formatConfig = null, this.startTimestamp = Date.now(), this.isMeasuringViewability = !1, this.id = r()(this.params, "kraken.krg_imp_id", "00000000-" + (Math.floor(9e3 * Math.random()) + 1e3) + "-0000-0000-000000000000"), this.creativeId = r()(this.params, "kraken.id", "") || r()(this.params, "kraken.creative_id", ""), this.adFormat = r()(this.params, "kraken.format", ""), this.slotType = r()(this.params, "kraken.slot_type", ""), this.auctionType = r()(this.params, "kraken.auction_type", ""), this.iasTagParams = r()(this.params, "kraken.ias_tag_params", null), null == (s = this.source) || s.setImpressionId(this.id), null == (l = this.source) || l.setExtraMacrosCreativeId(this.creativeId, this.auctionType), null == (u = this.source) || u.setExtraMacrosAdFormat(this.adFormat) } var e = t.prototype; return e.generateCreativeConfig = function () { var t = this; !this.creativeConfig && this.source && (this.creativeConfig = this.source.getCreativeData(), this.isMeasuringViewability && (this.creativeConfig.isMeasuringViewability = this.isMeasuringViewability), null !== this.iasTagParams && (this.creativeConfig.iasTagParams = this.iasTagParams), this.slotConfig && (this.creativeConfig.slot = this.slotConfig.getId(), this.creativeConfig.format && this.setFormatConfig()), this.getCreativeConfigSource(), this.creativeConfig.id = this.id, this.creativeConfig.slotType = this.slotType, this.setCreativeConfigCSS(), ar.forEach((function (e) { t.params && void 0 !== t.params[e] && (t.creativeConfig[e] = t.params[e]) }))) }, e.fail = function () { var t = xt(It().mark((function t() { var e, r, n; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return r = new Ht((null == (e = this.params) ? void 0 : e.sourceWindow) || this.win), t.prev = 1, t.next = 4, r.detectEnvironment(); case 4: if (null !== t.sent && r.noAdToDisplay(), this.slotConfig && this.slotConfig.getFailedRequestFunc()) try { (0, c.zH)(this.win, this.slotConfig.getFailedRequestFunc()) } catch (t) { n = "Error in Slot Fail Callback:", this.logger.error(n, t), this.logger.report(Dt, n + " " + t.name + " - " + t.message, { slot: this.slotConfig ? this.slotConfig.getId() : "unknown", version: "8.22.0" }) } this.failedResponse = !0, t.next = 13; break; case 10: t.prev = 10, t.t0 = t.catch(1), this.logger.error(t.t0); case 13: case "end": return t.stop() } }), t, this, [[1, 10]]) }))); return function () { return t.apply(this, arguments) } }(), e.fetchResponse = function () { var t = xt(It().mark((function t() { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.slotConfig || !this.slotConfig.getConditionalCheckFunc()) { t.next = 3; break } return t.next = 3, this.runConditionalCheck(); case 3: if (this.source) { t.next = 7; break } return t.next = 6, this.fail(); case 6: throw xr.errNoResponse("", "no source"); case 7: return t.prev = 7, t.next = 10, this.source.fetchResponse(); case 10: t.next = 15; break; case 12: throw t.prev = 12, t.t0 = t.catch(7), xr.errNoResponse("source", t.t0); case 15: if (this.generateCreativeConfig(), this.fetchFromSourceTracking(), this.formatConfig) { t.next = 20; break } return t.next = 20, this.handleFormatConfig(); case 20: case "end": return t.stop() } }), t, this, [[7, 12]]) }))); return function () { return t.apply(this, arguments) } }(), e.runConditionalCheck = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (t.prev = 0, !1 !== (0, c.zH)(this.win, this.slotConfig.getConditionalCheckFunc())) { t.next = 6; break } return t.next = 5, this.fail(); case 5: throw xr.errNew("Ad Request failed Conditional Check"); case 6: t.next = 14; break; case 8: throw t.prev = 8, t.t0 = t.catch(0), e = "Error in Slot Conditional Check:", this.logger.error(e, t.t0), t.t0 instanceof Error && this.logger.report(Dt, e + " " + t.t0.name + " - " + t.t0.message, { slot: this.slotConfig ? this.slotConfig.getId() : "unknown", version: "8.22.0" }), t.t0; case 14: case "end": return t.stop() } }), t, this, [[0, 8]]) }))); return function () { return t.apply(this, arguments) } }(), e.handleFormatConfig = function () { var t = xt(It().mark((function t() { var e, r, n; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return e = this.getCreativeConfigFormat(this.creativeConfig), r = e.creativeConfigFormat, n = e.msg, t.next = 3, this.fail(); case 3: if (r) { t.next = 7; break } throw xr.errNew(n); case 7: this.creativeConfig.format = r; case 8: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), e.getFormatFromSlot = function () { var t = this.slotConfig.getAllFormatConfigs(), e = Object.keys(t), r = this.creativeConfig.settings; return r && (r.vast_xml || r.vast_url) ? ir(hr, e) : this.creativeConfig.content ? ir(dr, e) : void 0 }, e.trackEvent = function (t, e, r) { void 0 === r && (r = {}); var n = Object.assign({ impId: this.id }, r); this.tracking.trackEvent(t, e, n) }, t }(); var Ir, Or, Dr = function () { function t() { } return t.getSupportedPMPFormats = function (t) { var e = []; return Object.keys(t).forEach((function (r) { t[r] && t[r].isApprovedForPMP && t[r].isApprovedForPMP() && e.push(r) })), e }, t.getApprovedOpenFormatsPerSlot = function (t, e) { for (var r = [], n = 0; n < e.length; n += 1)t.includes(e[n]) && r.push(e[n]); return r }, t.checkIfSidebarSlot = function (t, e) { var r = !1, n = (0, c.xF)(e, "Kargo.Config.getSlotConfig"); if (n) { var i = n(t); if (i) { var o = i.getAllFormatConfigs(); r = Object.keys(o).some((function (t) { return Ar.includes(t) })) } } return r }, t }(), Sr = ".kargo-ad-content", Rr = "kargo-ad-hidden", Tr = ".kargo-creative", Vr = { debug: !1, localId: null, id: null, type: null, format: null, execution: null, css: null, vendor: null, placement: null, slot: null, content: null, prefix: null, suffix: null, positionElement: window.document.body, positionLocation: "after", isMeasuringViewability: !1, source: {}, sourceElement: null, sourceWindow: null, externalId: null, onCreate: null, onLoad: null, onDisplay: null, onSizeChange: null, onVisible: null, onNotVisible: null, onViewable: null, onClose: null, onDestroy: null, settings: {} }; !function (t) { t.LINE_ITEM = "{DFP_LINE_ITEM}", t.CREATIVE = "{DFP_CREATIVE}" }(Ir || (Ir = {})), function (t) { t.CREATIVE = "{KARGO_CREATIVE}", t.FORMAT = "{KARGO_FORMAT}", t.SEQUENCE = "{SEQUENCE}" }(Or || (Or = {})); var Lr, Pr = "kit-version="; !function (t) { t.KRAKEN = "kraken", t.HEPHAESTUS = "hephaestus", t.SSP = "ssp", t.PASSBACK = "passback", t.EMPTY = "", t.HTML = "html", t.OVERRIDE_URL = "overrideUrl" }(Lr || (Lr = {})); function Mr(t, e) { var r = Sr; return "Banner" === t && (r = ".kargo-ad-banner"), "Hover" === t && (r = ".kargo-ad-hover"), e ? e.querySelector(r) : null } function Nr(t, e) { if (!t) return {}; var n, i, o = t.id, a = t.format, s = (t.creativeId, t.sourceName); if (t.source) { var c, l = "direct" === (null == (c = t.source) || null == (c = c.auctionType) ? void 0 : c.toLowerCase()); n = t.source.dealId || "", i = l ? t.source.biddableId : "" } return Object.assign({ format: a, impId: o, creativeSource: s, creativeTemplateId: r()(t, "settings.native.creativeOptimizer.template_id", ""), deal_id: n, line_item_id: i }, {}, e) } function Fr(t, e, r, n, i) { void 0 === i && (i = {}); var o = Nr(r, i); n.trackEvent(t, e, o) } function Ur(t) { return t ? t.querySelector(".kargo-creative") : null } function Kr(t) { for (var e = t.querySelector(".kargo-ad-content").getElementsByTagName("*"), r = 0; r < e.length; r += 1) { var n = e[r]; 1 === n.offsetWidth && 1 === n.offsetHeight && null === n.getAttribute("data-krg-tracker") && (n.setAttribute("data-krg-tracker", ""), n.style.position = "absolute", n.style.visibility = "hidden", n.style.left = "-9999px", n.style.top = "0px") } } function jr(t, e) { var r = (0, c.xF)(e, "Kargo.Config.getSlotConfig"); if (r) { var n = r(t); if (n && n.allowsResponsiveCreatives && !n.allowsResponsiveCreatives()) return !0 } return !1 } function Hr(t) { var e = t.match(/<Extension\s+[^>]*?type="kargo-outstream"[^>]*?>/); return !!e && e.length > 0 } var Br = { getVisibilityCheckElement: Mr, getContentElement: function (t) { var e = Sr; return t ? t.querySelector(e) : null }, shouldAddIAS: function (t) { if (t) { if (t.type === Lr.HTML) return !1; if (t && "open" === t.auctionType) return !1 } return !0 }, getTrackingParams: Nr, trackEvent: Fr, hideThirdPartyTrackers: Kr, validateConfig: function (t, e) { var n = (0, c.h1)({}, t); if (n.content && n.content.indexOf("celtra-ad") > -1) { var i = '<div class="celtra-ad-v3">'; if (n.content.indexOf(i) > -1) { if (n.id) { var o = "\n\t\x3c!-- passthroughParameters[impressionId] = raw " + n.id + " --\x3e", a = "\n\t\x3c!-- externalSessionId = raw " + n.id + " --\x3e"; n.content = n.content.replace(i, i + o + a) } if (r()(n, "source.kargo.creativeId")) { var l = n.source.kargo.creativeId, u = "\x3c!-- passthroughParameters[creativeId] = raw " + l + " --\x3e"; -1 === n.content.indexOf("passthroughParameters[creativeId]") && null != l && (n.content = (0, c._o)(n.content, u, n.content.indexOf(i) + 26)) } if ((n.source || {}).type) { var h = n.source.type.toUpperCase(), d = "\x3c!-- passthroughParameters[network] = raw " + h + " --\x3e"; null != h && (n.content = (0, c._o)(n.content, d, n.content.indexOf(i) + 26)) } if (n.idAlpha) { var g = "\x3c!-- passthroughParameters[creativeIdAlpha] = raw " + n.idAlpha + " --\x3e"; -1 === n.content.indexOf("passthroughParameters[creativeIdAlpha]") && (n.content = (0, c._o)(n.content, g, n.content.indexOf(i) + 26)) } n.content = n.content.replace(/'preferredClickThroughWindow':'.*?'/, "'preferredClickThroughWindow':'new'"), n.content = n.content.replace(/'externalAdServer':'.*?'/, "'externalAdServer':'DFPKargo'") } } var p = r()(n, "positionElement.ownerDocument.defaultView", null); if (p && p !== e) { var f = s(p); f && (f.style.display = "none", n.positionElement = f, n.positionLocation = "before") } else n.positionElement && !gt(n.positionElement) && (n.positionElement = n.positionElement.ownerDocument.body, n.positionLocation = "prepend"); return n }, preventResponsive: jr, hideSourceIframe: function (t) { if (t) { var e = s(t); e && (e.style.display = "block", e.style.visibility = "hidden", e.style.height = "1px") } }, addPrefixAndSuffix: function (t, e, r, n) { return e && (n.debug("Creative - adding prefix to creative content: " + e), t = e + " " + t), r && (n.debug("Creative - adding suffix to creative content: " + r), t = t + " " + r), t }, isFabrikOutstreamMarkup: Hr }, qr = function () { function t() { } return t.getDimensionsByFormat = function (t) { var e = sr.filter((function (e) { return e.name === t }))[0], n = r()(e, "size.w", null), i = r()(e, "size.h", null); return n && i ? e.size : { w: 300, h: 250 } }, t.getFormatFromSize = function (t) { if (!t) return null; var e = null, n = t.split("x"), i = n[0], o = n[1]; return sr.forEach((function (t) { var n = r()(t.size, "w", null), a = r()(t.size, "h", null); n === Number(i) && a === Number(o) && (e = t.name) })), e }, t.determineFormat = function (e, r, n, i) { var o = n.vast_url; if (n.vast_xml || o) { var a = Dr.getApprovedOpenFormatsPerSlot(i, hr); if (a.includes(rr.FABRIK_OUTSTREAM)) { if (Hr(e)) return rr.FABRIK_OUTSTREAM; var s = a.indexOf(rr.FABRIK_OUTSTREAM); a.splice(s, 1) } return a[0] } var c = t.getFormatFromSize(r), l = Dr.getApprovedOpenFormatsPerSlot(i, gr); return c && l.includes(c) ? c : l[0] }, t.getFormatByInhubID = function (t) { var e, r = parseInt("" + t, 10); return (null == (e = sr.filter((function (t) { return t.id === r }))[0]) ? void 0 : e.name) || null }, t.isVideoFormat = function (t) { return _r.indexOf(t) >= 0 }, t.isVideoBannerFormat = function (t) { return wr.indexOf(t) >= 0 }, t.isVastFormat = function (t) { return br.indexOf(t) >= 0 }, t.isKapVideoFormat = function (t) { return yr.indexOf(t) >= 0 }, t.isDesktopFormat = function (t) { return mr.indexOf(t) >= 0 }, t.isTallFormat = function (t) { return lr.indexOf(t) >= 0 }, t.isRmResponsiveFormat = function (t) { return pr.indexOf(t) >= 0 }, t.isUnresponsiveFormat = function (t) { return kr.indexOf(t) >= 0 }, t.getFormatByShortname = function (t) { t = t || ""; var e = sr.filter((function (e) { return e.name.toLowerCase() === t.toLowerCase() })); return e.length ? e[0] : null }, t }(); function zr(t, e, r) { if (t.includes(Pr)) { var n = (t.match(/data-ad-format="(.*?)"/) || [])[1]; n ? (e.creativeData.format = n, e.setExtraMacrosAdFormat(e.creativeData.format)) : e.errorReporter.report(Tt, "No Format in KIT"); var i = (t.match(/data-ad-execution="(.*?)"/) || [])[1]; i ? e.creativeData.execution = i.toLowerCase() : e.errorReporter.report(Tt, "No Execution in KIT"); var o = (t.match(/data-ad-settings="(.*?)"/) || [])[1]; if (o) try { r.settings = JSON.parse(window.atob(o)) } catch (t) { var a; a = t instanceof Error ? t.message : JSON.stringify(t), e.errorReporter.report(Tt, a) } } } function Wr(t, e) { e && (t.kargoCreative = !0, e.format && (t.creativeData.format = e.format, t.setExtraMacrosAdFormat(t.creativeData.format)), e.execution && (t.creativeData.execution = e.execution.toLowerCase()), e.idAlpha && (t.creativeData.idAlpha = e.idAlpha), e.settings && (0, c.h1)(t.creativeData.settings, e.settings), e.sid && (t.kargoCreativeData.sid = e.sid), e.creativeId && (t.kargoCreativeData.creativeId = e.creativeId), e.vendor && e.vendor.id && (t.kargoCreativeData.vendorId = e.vendor.id), e.vendor && e.vendor.code && (t.kargoCreativeData.vendor = e.vendor.code), e.placement && e.placement.type && (t.kargoCreativeData.placement = e.placement.type, t.creativeData.placementType = e.placement.type), e.asdata && e.asdata.verid && (t.kargoCreativeData.verticals = e.asdata.verid), e.settings && e.settings.creative_origin && (t.kargoCreativeData.creativeOrigin = e.settings.creative_origin)) } function Gr(t, e) { !function (t, e) { var r = e.trim(); return ["<VAST", "&lt;VAST", "<?xml", "&lt;?xml"].reduce((function (t, e) { return t || 0 === r.indexOf(e) }), !1) }(0, e) ? t.creativeData.content = e : t.creativeData.settings.vast_xml = e } function Yr(t, e) { return Zr.apply(this, arguments) } function Zr() { return (Zr = xt(It().mark((function t(e, r) { var n, i, o, a, s, l, u, h; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: zr(e, r, n = {}), i = e.replace(/\r/g, ""), 0 === Object.keys(n).length && (i = r.replaceMacroValues(i), n = pt(i, "krg_ad_info")), !n && i.includes('""krg_ad_info""') && (o = "Extra quotes found in creative. Trafficking error - creative may not display", r.logger.warn(o), a = r.rawResponse.id || r.rawResponse.creative_id, r.errorReporter.report(St, o, { creative: a })), s = pt(i, "settings_overrides"), l = mt(i, "krg_ad_type"), u = mt(l, "krg_ad_info"), h = mt(u, "settings_overrides"), Wr(r, n), s && (0, c.h1)(r.creativeData.settings, s), h = r.replaceMacroValues(h), Gr(r, h); case 13: case "end": return t.stop() } }), t) })))).apply(this, arguments) } function Jr(t, e) { return !!t && t.toLowerCase() !== e.toLowerCase() } function Qr(t) { return Object.keys(t).filter((function (e) { return null === t[e] || void 0 === t[e] })).forEach((function (e) { return delete t[e] })), t } var Xr = "https://", $r = function () { function t() { } return t.getPageUrl = function () { return Xr + window.location.hostname + window.location.pathname }, t.getEncodedPageUrl = function () { return encodeURIComponent(Xr + window.location.hostname + window.location.pathname) }, t }(); function tn(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function en(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? tn(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : tn(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var rn, nn = function () { function t(t, e, n) { void 0 === n && (n = ""), this.win = t, this.logger = e, this.slotId = n; var i = r()(this.win, "Kargo.Plugin.Cerberus"); this.macroConfig = { slotId: n, impressionId: "", creativeId: "", creativeIdAlpha: "", creativeIdRtb: "", dealId: "", lineItemId: "", lexId: i && i.getLexId() || "", hostname: r()(this.win, "location.hostname") || "", adFormat: "" }, this.cachebuster = (Date.now() * Math.random()).toString().replace(".", "") } var e = t.prototype; return e.replaceMacroWhenValid = function (t, e, r) { return r ? t.replace(e, r) : t }, e.buildTrackerUrl = function (t, e, r) { var n = this, i = t, o = "" + (cr[e.format] ? cr[e.format].id : null), a = { lineItem: e.dfpLineItem || null, creative: e.dfpCreative || null }, s = e.creativeId || null, c = e.sequenceKey || null; return [[Ir.LINE_ITEM, a.lineItem], [Ir.CREATIVE, a.creative], [Or.FORMAT, o], [Or.CREATIVE, s], [Or.SEQUENCE, c], ["{AD_TAG_VERSION}", "8.22.0"], ["{CONTEXT}", r]].forEach((function (t) { var e = t[0], r = t[1]; i = n.replaceMacroWhenValid(i, e, r) })), i }, e.replaceAllMacros = function (t, e) { var r = this; if (this.macroConfig = en(en({}, Qr(this.macroConfig)), Qr(e)), "string" == typeof t && t.length) { t = this.checkLegacyDFPImg(t); var n = en(en({}, this.getDfpMacros()), this.getKargoMacros()); t && "string" == typeof t && n && Object.keys(n).forEach((function (e) { var i = n[e](); t = r.replaceMacroHelper(t, e, i) })) } return t }, e.replaceMacroHelper = function (t, e, r) { try { if (this.macroExists(t, e)) return "{ad_format}" === e && (r = this.convertToSnakeCase(r)), t.replace(new RegExp((0, c.AF)(e), "gi"), r) } catch (t) { this.logger.error(t) } return t }, e.macroExists = function (t, e) { return !(!t || !e || "string" != typeof t || "string" != typeof e) && (t.indexOf(e) > -1 || t.indexOf(e.toUpperCase()) > -1 || t.indexOf(e.toLowerCase()) > -1) }, e.getDfpMacros = function () { var t = this, e = this.macroConfig; return { "%%CLICK_URL%%": function () { return "" }, "%%CLICK_URL_ESC%%": function () { return "" }, "%%CLICK_URL_ESC_ESC%%": function () { return "" }, "%%CLICK_URL_UNESC%%": function () { return "" }, "%%VIEW_URL_UNESC%%": function () { return "" }, "%%CACHEBUSTER%%": function () { return t.cachebuster }, "%%PATTERN:kid%%": function () { return e.lexId }, "%%PATTERN:uuid%%": function () { return e.impressionId }, "%%PATTERN:krg_imp_id%%": function () { return e.impressionId }, "%%SITE%%": function () { return e.hostname }, "%%ADVERTISING_IDENTIFIER_PLAIN%%": function () { return "" }, "%%PATTERN:id%%": function () { return "" } } }, e.checkLegacyDFPImg = function (t) { return t.replace('<img width="1" height="1" alt="" style="position: absolute; left: -9999px;" src="%%VIEW_URL_UNESC%%" />\n', "") }, e.getKargoMacros = function () { var t = this, e = Date.now().toString(), r = this.macroConfig; return { "{timestamp}": function () { return e }, "{cachebuster}": function () { return t.cachebuster }, "{uuid}": function () { return r.impressionId }, "{imp_id}": function () { return r.impressionId }, "{ad_slot}": function () { return r.slotId }, "{site}": function () { return r.hostname }, "{ad_format}": function () { return r.adFormat }, "{creative_id}": function () { return r.creativeId }, "{creative_id_alpha}": function () { return r.creativeIdAlpha }, "{creative_id_rtb}": function () { return r.creativeIdRtb }, "{deal_id}": function () { return r.dealId }, "{line_item_id}": function () { return r.lineItemId }, "{page_url}": function () { return $r.getPageUrl() } } }, e.convertToSnakeCase = function (t) { return (t = (t = t.replace(/([a-z])([A-Z])/g, "$1-$2")).replace(/([A-Z])([A-Z][a-z])/g, "$1-$2")).toLowerCase() }, t }(); function on(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function an(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? on(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : on(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } !function (t) { t[t.BILLABLE_FIRES_ON_START = 0] = "BILLABLE_FIRES_ON_START", t[t.BILLABLE_FIRES_ON_LOAD = 1] = "BILLABLE_FIRES_ON_LOAD", t[t.NOT_BILLABLE = 2] = "NOT_BILLABLE" }(rn || (rn = {})); var sn = function () { function t(t, e, r) { this.sourceElement = null, this.logger = e, this.win = t, this.slotConfig = r, this.type = Lr.EMPTY, this.requestUrl = "", this.usingCustomRequestUrl = !1, this.impressionId = "", this.extraMacros = { impressionId: "", creativeId: "", creativeIdAlpha: "", creativeIdRtb: "", adFormat: "", lineItemId: "", dealId: "" }, this.rawResponse = {}, this.creativeData = this.initializeCreativeData(), this.extraContent = { prefix: "", suffix: "" }, this.kargoCreative = !1, this.kargoCreativeData = { sid: null, creativeId: null, vendor: null, vendorId: null, placement: null, auctionType: null, krakenViewabilityTracker: null }, this.errorReporter = new Ft(this.win, this), this.macroUtil = new nn(this.win, this.logger, this.slotConfig.getId() || "") } var e = t.prototype; return e.initializeCreativeData = function () { return { prefix: null, suffix: null, format: null, execution: null, content: "", iasTagParams: null, positionElement: null, positionLocation: null, settings: {} } }, e.setCreativeDataId = function () { var t; this.creativeData.creativeId || (this.creativeData.creativeId = null == (t = this.kargoCreativeData) ? void 0 : t.creativeId) }, e.extractCreativeData = function () { var t = xt(It().mark((function t(e) { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, Yr(e, this); case 2: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), e.getType = function () { return this.type }, e.setImpressionId = function (t) { this.impressionId = t, this.extraMacros.impressionId = t }, e.getImpressionId = function () { return this.impressionId }, e.setExtraMacrosCreativeId = function (t, e) { this.extraMacros.creativeId = t, "direct" === e ? this.extraMacros.creativeIdAlpha = t || "" : this.extraMacros.creativeIdRtb = t || "" }, e.getExtraMacrosCreativeId = function () { return this.extraMacros.creativeId }, e.setExtraMacrosAdFormat = function (t) { this.extraMacros.adFormat = t }, e.getExtraMacrosDealId = function () { return this.extraMacros.dealId }, e.setExtraMacrosDealId = function (t) { this.extraMacros.dealId = t }, e.getExtraMacrosLineItemId = function () { return this.extraMacros.lineItemId }, e.setExtraMacrosLineItemId = function (t) { this.extraMacros.lineItemId = t }, e.getExtraMacrosAdFormat = function () { return this.extraMacros.adFormat }, e.setRequestUrl = function (t) { this.requestUrl = t, this.usingCustomRequestUrl = !0 }, e.getRequestUrl = function () { return this.requestUrl }, e.isCustomRequestUrl = function () { return this.usingCustomRequestUrl }, e.getCreativeData = function () { return this.creativeData }, e.fetchResponse = function () { var t = xt(It().mark((function t() { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: case "end": return t.stop() } }), t) }))); return function () { return t.apply(this, arguments) } }(), e.isKargoCreative = function () { return this.kargoCreative }, e.getKargoCreativeData = function () { return this.kargoCreativeData }, e.addTrackers = function (t, e) { var r = this, n = [], i = an(an({}, e), {}, { format: this.creativeData.format || null }), o = function (e, n) { return function (t, e) { var r, n; r = Array.isArray(t) ? t : [t], n = Array.isArray(e) ? e : [e]; var i = r.concat(n).filter((function (t) { return "string" == typeof t && t.length > 0 })); return Array.from(new Set(i)) }(e, n).map((function (e) { return r.macroUtil.buildTrackerUrl(e, i, t.context) })) }; if (t.tracking) { var a = this.creativeData.settings; a.tracking = a.tracking || {}, t.tracking.serve && (n = o(n, t.tracking.serve)), t.tracking.win && (n = o(n, t.tracking.win)); var s = this.creativeData.settings.tracking; !function (t, e, r) { e.tracking.video_start && (t.start = r(t.start, e.tracking.video_start)), e.tracking.video_first_quartile && (t.firstQuartile = r(t.firstQuartile, e.tracking.video_first_quartile)), e.tracking.video_midpoint && (t.midpoint = r(t.midpoint, e.tracking.video_midpoint)), e.tracking.video_third_quartile && (t.thirdQuartile = r(t.thirdQuartile, e.tracking.video_third_quartile)), e.tracking.video_complete && (t.complete = r(t.complete, e.tracking.video_complete)), e.tracking.click && (t.click = r(t.click, e.tracking.click)), e.tracking.view && (t.view = r(t.view, e.tracking.view)), e.tracking.blocked && (t.blocked = r(t.blocked, e.tracking.blocked)) }(s, t, o), t.tracking.video_load && function (t, e) { var r = t.format || e.format; t.ad_format_id && (r = qr.getFormatByInhubID(t.ad_format_id)); var n, i, o = !1; return o = r ? qr.isVideoFormat(r) : "video" === (null == (n = t.ext) ? void 0 : n.response_type) || "vast" === (null == (i = t.ext) ? void 0 : i.response_type), o }(t, this.creativeData) && (n = o(n, t.tracking.video_load)); var c = function (t, e) { var r = t.format || e.format; return e.content.includes("video.seenthis.se") ? rn.BILLABLE_FIRES_ON_LOAD : t.tracking.billable ? qr.isVastFormat(r) || qr.isKapVideoFormat(r) && "direct" === t.auction_type ? rn.BILLABLE_FIRES_ON_START : rn.BILLABLE_FIRES_ON_LOAD : rn.NOT_BILLABLE }(t, this.creativeData); switch (c) { case rn.BILLABLE_FIRES_ON_START: s.start = o(s.start, t.tracking.billable); break; case rn.BILLABLE_FIRES_ON_LOAD: n = o(n, t.tracking.billable) } } t.krk_imp_tracker && (n = o(n, t.krk_imp_tracker)), this.creativeData.content += n.map((function (t) { return '<img style="display:none" src="' + t + '"/>' })).join("") }, e.replaceMacroValues = function (t) { return t = this.macroUtil.replaceAllMacros(t, this.extraMacros) }, e.setSourceElement = function (t) { this.sourceElement = t, this.win.__krg_sourceElements = this.win.__krg_sourceElements || [], this.win.__krg_sourceElements.push(t) }, e.isValidAdMarkup = function (t) { return void 0 === t && (t = ""), !!t && "" !== t }, t }(), cn = function (t) { function e(e, r, n) { var i; return (i = t.call(this, e, r, n) || this).type = Lr.OVERRIDE_URL, i } Zt(e, t); var r = e.prototype; return r.getRequestUrl = function () { return this.requestUrl || (this.requestUrl = this.slotConfig.getOverrideUrl(), this.requestUrl += (this.requestUrl.indexOf("?") > -1 ? "&" : "?") + "_cb=" + u()), this.requestUrl }, r.setRequestUrl = function (t, e) { void 0 === e && (e = !0), this.requestUrl = t, e && (this.requestUrl += (this.requestUrl.indexOf("?") > -1 ? "&" : "?") + "_cb=" + u()) }, r.fetchResponse = function () { var t = xt(It().mark((function t() { var e, r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.logger.debug("OVERRIDE URL - Ad Request\n    Request Url: " + this.requestUrl), e = this.getRequestUrl(), t.prev = 2, t.next = 5, P(e, this.win, {}); case 5: return r = t.sent, this.rawResponse = r, t.prev = 7, t.next = 10, this.extractCreativeData(r); case 10: this.logger.debug("OVERRIDE URL - Ad Response", this.getCreativeData()), t.next = 16; break; case 13: t.prev = 13, t.t0 = t.catch(7), this.logger.error(t.t0); case 16: t.next = 21; break; case 18: t.prev = 18, t.t1 = t.catch(2), this.logger.debug("OVERRIDE URL - No Ad Response"); case 21: case "end": return t.stop() } }), t, this, [[2, 18], [7, 13]]) }))); return function () { return t.apply(this, arguments) } }(), e }(sn), ln = function (t) { function e(e, r, n) { var i; return (i = t.call(this, e, r, n) || this).type = Lr.HTML, i.htmlResponse = null, i } Zt(e, t); var r = e.prototype; return r.setResponse = function (t) { var e; try { e = this.win.atob(t) } catch (r) { e = t } this.htmlResponse = e }, r.fetchResponse = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.logger.debug("HTML - Ad Request Html: ", this.htmlResponse), e = this.htmlResponse, this.rawResponse = e, t.prev = 3, t.next = 6, this.extractCreativeData(e); case 6: this.logger.debug("HTML - Ad Response", this.getCreativeData()), t.next = 12; break; case 9: t.prev = 9, t.t0 = t.catch(3), this.logger.error(t.t0); case 12: case "end": return t.stop() } }), t, this, [[3, 9]]) }))); return function () { return t.apply(this, arguments) } }(), e }(sn), un = "err-encdng-crtve", hn = "crtve-hght-max", dn = function () { function t() { } return t.base64CheckAndConversion = function (t, e) { return /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e) && (e = t.atob(e)), e }, t }(), gn = function () { function t() { } return t.handleNativeResponseType = function (t, e, r, n) { var i = null; try { null != t.adm && (i = JSON.parse(t.adm)) } catch (n) { r.report(Rt, "Error parsing Native JSON: " + n.message, { creative: t.krg_imp_id, format: t.format || "unknown" }), e = null } if (null !== i && e) { e.content = "", e.settings.native = i, e.settings.native.auctionType = t.auction_type || "pmp", t.creative_optimizer && (e.settings.native.creativeOptimizer = t.creative_optimizer), n.getFormatConfig(rr.ABA_ADHESION_DISPLAY) ? e.format = rr.ABA_ADHESION_DISPLAY : e.format = rr.ABA_DISPLAY; var o = i.assets; if (o && o.length) for (var a = 0; a < o.length; a += 1)if (o[a].video && o[a].video.vasttag) { e.settings.native.vast = o[a].video.vasttag, e.format = rr.ABA_VIDEO; break } } return e }, t }(); function pn(t, e) { return e.debug("PASSBACK - Ad Request\n    Format: " + t.getFormat() + "\n    Size: " + t.getSize() + "\n    Html: " + t.getHtml()), { format: t.getFormat(), size: t.getSize(), html: t.getHtml() } } function fn(t, e) { t.format || (t.format = e), t.settings.branding = "none" } function vn(t, e, r) { return mn.apply(this, arguments) } function mn() { return (mn = xt(It().mark((function t(e, r, n) { var i; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return i = pn(e, r.logger), r.rawResponse = i.html, t.next = 4, n(i.html); case 4: Object.assign(r.passbackCreativeData, i), fn(r.creativeData, i.format), r.type = Lr.PASSBACK; case 7: case "end": return t.stop() } }), t) })))).apply(this, arguments) } var kn = function () { function t(t, e, r, n, i, o, a) { this.sourceElement = null, this.sequenceId = null, this.type = "SequentialMessagingUtility", this.ordered = !0, this.sequenceKey = "ul", this.SLOT_TIMEOUT = 500, this.win = t, this.logger = e, this.slotConfig = r, this.rawResponse = null, this.sourceElement = a, n && (this.sequenceId = n), this.macroUtil = i, this.extraMacros = o, this.errorReporter = new Ft(this.win, this) } var e = t.prototype; return e.handleSequential = function () { var t = xt(It().mark((function t(e) { var r, n, i = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.win.__krg_adms = this.win.__krg_adms || e, r = e, t.next = 4, new Promise((function (t) { return setTimeout(t, i.SLOT_TIMEOUT) })); case 4: return n = this.win.__krg_sourceElements, t.abrupt("return", this.chooseAdm(r, n)); case 6: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), e.chooseAdm = function (t, e) { var r = this, n = this.sortSources(e); this.handleSequenceId() && this.win.__krg_used_sources && (this.logger.debug("New sequence found in response"), this.win.__krg_used_sources.forEach((function (t) { n = n.filter((function (e) { return e !== t })) })), this.win.__krg_sourceElements = n); var i = this.createSequentialMap(n, t), o = null, a = null; if (Object.keys(i).forEach((function (t) { i[t].source === r.sourceElement && (o = i[t].creative, a = t) })), o) { var s, c = "randomly chosen from ordered"; t.ul && t.ul.includes(o) ? c = "chosen randomly from unordered" : this.ordered && t.ol && (c = "#" + a + " from ordered chosen"), this.assignWindowSources(), o = null == (s = this.macroUtil) ? void 0 : s.replaceAllMacros(this.win.atob(o), this.extraMacros); var l = { slot: this.slotConfig.getId(), creativeHtml: o }; this.logger.debug("Hephaestus - Sequential Adm " + c, l) } else this.errorReporter.report(Vt, "Unable to choose sequential adm"); return o }, e.sortSources = function (t) { var e = []; return Object.keys(t).length ? e = t.slice(0).sort((function (t, e) { return t.parentNode.getBoundingClientRect().top - e.parentNode.getBoundingClientRect().top })) : this.errorReporter.report(Vt, "No source elements found for slots on page"), e }, e.createSequentialMap = function (t, e) { var r = this, n = {}; return t.map((function (i, o) { var a = o + 1; n[a] = { source: t[o], creative: e.ol[a] || function () { if (e.ul && e.ul.length || e.ol && Object.keys(e.ol).length) { if (e.ul && e.ul.length) return e.ul[Math.floor(Math.random() * e.ul.length)]; if (e.ol && Object.keys(e.ol).length) { r.ordered = !1, r.logger.debug("No unordered adms found, using random ordered adm"); var t = Object.values(e.ol); return t[Math.floor(Math.random() * t.length)] } } else r.errorReporter.report(Vt, "No creatives in response") }() } })), n }, e.handleSequenceId = function () { var t = !1; this.win.__krg_sequence_id && (this.win.__krg_sequence_id !== this.sequenceId && (t = !0)); return this.win.__krg_sequence_id = this.sequenceId, t }, e.assignWindowSources = function () { this.win.__krg_used_sources = this.win.__krg_used_sources || new Set([]), this.win.__krg_used_sources.add(this.sourceElement) }, t }(); function yn(t, e) { return bn.apply(this, arguments) } function bn() { return (bn = xt(It().mark((function t(e, r) { var n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (r.adms || r.adm) { t.next = 3; break } return e.errorReporter.report(Vt, "Missing ad markup (adm or adms)"), t.abrupt("return", null); case 3: if (n = null, !r.adms || !r.isBrandedTakeover) { t.next = 13; break } if (r.adms.ol || r.adms.ul) { t.next = 8; break } return e.errorReporter.report(Vt, "Missing both ol and ul in adms"), t.abrupt("return", null); case 8: return e.SQMUtil || (e.SQMUtil = new kn(e.win, e.logger, e.slotConfig, r.sequenceId, e.macroUtil, e.extraMacros, e.sourceElement)), t.next = 11, e.SQMUtil.handleSequential(r.adms); case 11: (n = t.sent) || e.errorReporter.report(Vt, "Unable to choose sequential adm"); case 13: if (r.adm ? (i = r.adm, e.logger.debug("Hephaestus - Standard adm")) : n && (i = n, e.logger.debug("Hephaestus - Special adms sequential response")), !i) { t.next = 20; break } return o = pt(i, "krg_ad_info"), a = null, o && o.asdata && (e.creativeData.creativeId = o.asdata.creid || o.creativeId || null, a = o.asdata.creid, e.krakenCreativeData.advertiser = o.asdata.advid || null, e.krakenCreativeData.campaign = o.asdata.camid || null, e.extraMacros.lineItemId = o.asdata.linid || null, e.krakenCreativeData.placement = o.asdata.aduid || null, e.krakenCreativeData.site = o.asdata.sitid || null), e.creativeData.creativeId = a || (null == o ? void 0 : o.creativeId) || null, t.abrupt("return", i); case 20: return t.abrupt("return", null); case 21: case "end": return t.stop() } }), t) })))).apply(this, arguments) } function wn(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function _n(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? wn(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : wn(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var An = function (t) { function e(e, r, n) { var i; return (i = t.call(this, e, r, n) || this).type = Lr.KRAKEN, i.KRAKEN_AD_REQUEST_URL = "https://krk.kargo.com/api/v1/getad", i.TIMEOUT = 3e3, i.errFactory = new E("Kraken"), i.socialCanvasSegments = [], i.socialEmbedURL = "", i.krakenCreativeData = { admRequestUrl: "", advertiser: "", advertiserDomain: "", auctionType: "pmp", biddableId: "", campaign: "", creative: "", creativeFlags: {}, dealId: "", dealName: "", krakenDomain: "", krgImpId: "", placement: "", site: "", size: "" }, i.passbackCreativeData = { html: null, size: null, format: null }, i.hephCreativeId = null, i.type = Lr.KRAKEN, i.responseType = null, i.krakenFormatName = null, i } Zt(e, t); var n = e.prototype; return n.getRequestJson = function () { if (this.requestJson) return this.requestJson; var t = this.slotConfig.getPlatform(), e = d(this.win), n = !!h(e, "krg_debug"); "MobileApp" === t && this.win.__krg_page_url_override && (e = this.win.__krg_page_url_override); var i = { kargoID: null, clientID: "", tdID: "", crbIDs: {}, optOut: !1, usp: null, gdpr: { applies: !1, consent: "" }, gpp: { string: "", applicableSections: [] } }, o = r()(this.win, "Kargo.Plugin.Cerberus"); o && (i.optOut = o.isOptOut(), i.clientID = o.getClientId() || "", i.usp = o.getUSPrivacy(), i.gdpr.applies = o.gdprApplies(), i.gdpr.consent = o.gdprConsent(), i.gpp.string = o.gppString(), i.gpp.applicableSections = o.gppApplicableSections(), i.optOut || (i.kargoID = o.getLexId(), i.tdID = o.getTdID() || "")); var a = Ye(this.win, "krg_crb") || ""; return this.requestJson = { debug: n, adSlotIDs: [this.slotConfig.getId()], timestamp: Date.now(), timeout: this.TIMEOUT, userIDs: i, pageURL: e, rawCRB: a, socialCanvasSegments: this.socialCanvasSegments, socialEmbedURL: this.socialEmbedURL }, this.requestJson }, n.getKrakenCreativeData = function () { return this.krakenCreativeData }, n.setKrakenCreativeInfo = function () { t.prototype.setCreativeDataId.call(this), this.krakenCreativeData.creative && (this.creativeData.creativeId = this.krakenCreativeData.creative, this.creativeData.sourceName = Lr.KRAKEN) }, n.setResponse = function (t) { t.adm && (t.adm = dn.base64CheckAndConversion(this.win, t.adm)), this.responseJson = t }, n.setSocialCanvasSegments = function (t) { this.socialCanvasSegments = t }, n.setSocialEmbedURL = function (t) { this.socialEmbedURL = t }, n.getRequestUrl = function () { if (!this.requestUrl) { var t = window.JSON.stringify(this.getRequestJson()), e = a(this.win) ? 1 : 0, r = d(this.win), n = h(r, "ad_id") || h(r, "AD_ID"), i = { json: encodeURIComponent(t), adtag_version: "8.22.0", include_direct: 1, google_amp: e }; n && (i.ad_id = n); var o = Object.entries(i).map((function (t) { return t.join("=") })).join("&"); this.requestUrl = this.KRAKEN_AD_REQUEST_URL + "?" + o } return this.requestUrl }, n.extractCreativeData = function () { var t = xt(It().mark((function t(e) { var n, i, o, a, s, l, u, h, d, g, p = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (i = {}, !e.adm) { t.next = 5; break } i = pt(e.adm, "krg_ad_info"), t.next = 8; break; case 5: if (e.adm || e.adms || "open" === e.auction_type) { t.next = 8; break } return this.errorReporter.report(Rt, "No ADM or ADMS"), t.abrupt("return", Promise.reject(new Error("No ADM or ADMS from Kraken"))); case 8: return void 0 !== e.ias_tag_params && (this.creativeData.iasTagParams = e.ias_tag_params), r()(i, "asdata") ? (this.hephCreativeId = i.asdata.creid || null, this.creativeData.creativeId = this.hephCreativeId) : this.creativeData.creativeId = (null == (o = i) ? void 0 : o.creativeId) || null, a = e.adm_prefix, s = e.adm_suffix, a && (this.extraContent.prefix = dn.base64CheckAndConversion(this.win, a)), s && (this.extraContent.suffix = dn.base64CheckAndConversion(this.win, s)), t.next = 16, this.handleResponseSourceLogic(e); case 16: if (e.tracking && (this.creativeData.settings.tracking ? (0, c.h1)(this.creativeData.settings.tracking, e.tracking) : this.creativeData.settings.tracking = e.tracking), e.ad_format_id && (this.krakenFormatName = qr.getFormatByInhubID(e.ad_format_id)), !this.creativeData.format) { t.next = 33; break } if (!Jr(this.krakenFormatName || "", this.creativeData.format)) { t.next = 31; break } if (l = "Format Mismatch " + e.id + " (" + this.creativeData.format + " | " + this.krakenFormatName + ")", u = !0, f = this.krakenFormatName || "", v = this.creativeData.format || "", m = this.slotConfig, Jr(f, v) && !m.getFormatConfig(v) && cr[v].type === nr.HOVER && cr[f].type === nr.BANNER && (l = "Hover format banner slot mismatch - (" + this.creativeData.format + " | " + this.krakenFormatName + ")"), this.slotConfig.getFormatConfig(this.creativeData.format)) { t.next = 30; break } if (this.creativeData.format = this.krakenFormatName || null, this.slotConfig.getFormatConfig(this.creativeData.format)) { t.next = 30; break } return u = !1, l += " - Slot supports neither response format nor creative format - destroying", this.errorReporter.report(Rt, l, { creative: e.id }, u), t.abrupt("return", Promise.reject(new Error(l))); case 30: this.errorReporter.report(Rt, l, { creative: e.id }, u); case 31: t.next = 34; break; case 33: this.krakenFormatName && (this.creativeData.format = this.krakenFormatName); case 34: if (e.pageViewId && "isBrandedTakeover" in e && setTimeout((function () { var t = r()(p.win, "Kargo.Plugin.Cerberus"); t && t.handleBrandedTakeover(e.isBrandedTakeover, e.pageViewId) })), h = "open" !== e.auction_type, e.format || e.ad_format || e.ad_format_id || !h) { t.next = 41; break } this.errorReporter.report(Rt, "No Format in Response"), t.next = 53; break; case 41: if (this.creativeData.format || !e.format) { t.next = 45; break } this.creativeData.format = e.format, t.next = 53; break; case 45: if (!Jr(e.format || "", this.creativeData.format || "")) { t.next = 53; break } if (d = "Format Mismatch " + e.creative_id + "/\n      (Creative: " + this.creativeData.format + " | Reported: " + e.format + ")", this.errorReporter.report(Rt, d, { format: this.creativeData.format, source: "Kraken" }), this.slotConfig.getFormatConfig(this.creativeData.format)) { t.next = 53; break } if (this.creativeData.format = e.format || null, this.slotConfig.getFormatConfig(this.creativeData.format)) { t.next = 53; break } return this.logger.debug("Slot supports neither response format nor creative format - destroying"), t.abrupt("return", Promise.reject(new Error(d))); case 53: "open" === e.auction_type && this.setAdvertisingBrandingForOpen(e), "native" !== e.creative_type && "native" !== (null == (n = e.ext) ? void 0 : n.response_type) || (this.creativeData = gn.handleNativeResponseType(e, this.creativeData, this.errorReporter, this.slotConfig)), this.handleHTMLResponseType(e), (g = r()(e.tracking, "view", null)) && (this.kargoCreativeData.krakenViewabilityTracker = g.replace("{CONTEXT}", e.context)); case 58: case "end": return t.stop() }var f, v, m }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), n.validateResponse = function (t) { var e = this, n = function (t) { e.errorReporter.report(Rt, "Kraken response validation error: " + t) }; if ("number" == typeof t.format ? (n("Format number instead of string"), delete t.format) : "pmp" !== t.auction_type && "direct" !== t.auction_type || t.format || this.creativeData.format || t.ad_format || t.ad_format_id || n(t.auction_type + " missing format"), t.auction_type || (t.adms ? t.auction_type = "direct" : (n("Missing auction type"), t.auction_type = "open")), !t.adm && !t.adms) { var i = null; i = "Missing ad markup (adm)", "" === t.adm && (i = "Empty ad markup (adm)", void 0 !== t.adm && delete t.adm), n(i) } if (t.creative_type && "vast" !== t.creative_type || !t.creative_type && t.adm && !t.adm.includes("<VAST")) { var o = r()(t, "tracking.billable"); o && 0 !== o.length || n("No billable trackers") } return t }, n.fetchResponse = function () { var t = xt(It().mark((function t() { var e, r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.logger.debug("Kraken - Ad Request", "Request Params:", this.getRequestJson()), e = this.getRequestUrl(), this.isCustomRequestUrl() && this.logger.debug("Kraken - Using Custom Request Url: " + e), t.prev = 3, t.next = 6, this.getResponseJson(e); case 6: if (r = t.sent, this.validateAdResponse(r), !r.adm_request_url) { t.next = 11; break } return t.next = 11, this.fetchAdm(r); case 11: return t.next = 13, this.processResponse(r); case 13: t.next = 20; break; case 15: return t.prev = 15, t.t0 = t.catch(3), this.logger.debug("Kraken - Request failed", t.t0), t.next = 20, this.handlePassback(this.slotConfig.getPassbackConfig(), t.t0); case 20: case "end": return t.stop() } }), t, this, [[3, 15]]) }))); return function () { return t.apply(this, arguments) } }(), n.handlePassback = function () { var e = xt(It().mark((function e(r, n) { var i; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r.isEnabled()) { e.next = 3; break } throw this.logger.debug("Passback is not enabled, rethrowing error"), n; case 3: e.prev = 3, i = t.prototype.extractCreativeData.bind(this), vn(r, this, i), e.next = 13; break; case 8: throw e.prev = 8, e.t0 = e.catch(3), this.logger.debug("PASSBACK - Exception", e.t0), this.requestError = e.t0, e.t0; case 13: case "end": return e.stop() } }), e, this, [[3, 8]]) }))); return function (t, r) { return e.apply(this, arguments) } }(), n.getResponseJson = function () { var t = xt(It().mark((function t(e) { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.responseJson) { t.next = 4; break } t.t0 = this.responseJson, t.next = 7; break; case 4: return t.next = 6, P(e, this.win, {}); case 6: t.t0 = t.sent; case 7: return t.abrupt("return", t.t0); case 8: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), n.validateAdResponse = function (t) { if (!t || "noad" === t.creative_type || 0 === Object.entries(t).length) throw this.recordSocialCanvasBidResult(), this.errFactory.errNoResponse("JSON"); "SocialCanvas" === t.format && this.recordSocialCanvasBidResult({ creative_id: t.creative_id, deal_id: t.deal_id, biddable_id: t.biddable_id }) }, n.fetchAdm = function () { var t = xt(It().mark((function t(e) { var r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.prev = 0, t.next = 3, P(e.adm_request_url, this.win, {}); case 3: "string" == typeof (r = t.sent) && (e.adm = r), t.next = 10; break; case 7: throw t.prev = 7, t.t0 = t.catch(0), t.t0; case 10: case "end": return t.stop() } }), t, this, [[0, 7]]) }))); return function (e) { return t.apply(this, arguments) } }(), n.processResponse = function () { var t = xt(It().mark((function t(e) { var r, n; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return r = this.validateResponse(e), this.rawResponse = r, t.next = 4, this.extractCreativeData(r); case 4: n = { creativeId: this.hephCreativeId }, this.addTrackers(r, n), this.logger.debug("Kraken - Ad Response", this.getCreativeData()), this.logger.debug("Kraken - Metadata", this.getKrakenCreativeData()); case 8: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), n.recordSocialCanvasBidResult = function (t) { var e; null == (e = this.win.socialCanvas) || null == e.recordBidResult || e.recordBidResult(t) }, n.handleHTMLResponseType = function (t) { var e, r = "direct" === (null == t || null == (e = t.auction_type) ? void 0 : e.toLowerCase()); this.krakenCreativeData.advertiserDomain = t.advertiser_domain, this.krakenCreativeData.auctionType = t.auction_type, this.krakenCreativeData.creative || (this.krakenCreativeData.creative = t.id || t.creative_id || "", this.setKrakenCreativeInfo()), this.krakenCreativeData.krgImpId = t.krg_imp_id, this.krakenCreativeData.krakenDomain = t.kraken_domain || "", this.krakenCreativeData.dealId = t.deal_id, this.krakenCreativeData.dealName = t.deal_name, this.krakenCreativeData.size = t.size, this.krakenCreativeData.admRequestUrl = t.adm_request_url, this.krakenCreativeData.biddableId = r && (t.biddable_id || t.kraken_id) || "", this.krakenCreativeData.creativeFlags = t.creative_flags ? t.creative_flags : {} }, n.setAdvertisingBrandingForOpen = function (t) { if (this.creativeData.settings.branding = "advertisement", !this.creativeData.format) { var e = r()(this.creativeData, "settings", {}), n = this.slotConfig.getAllFormatConfigs ? this.slotConfig.getAllFormatConfigs() : {}, i = Dr.getSupportedPMPFormats(n); this.creativeData.format = qr.determineFormat(t.adm || "", t.size, e, i) } }, n.copyCreativeData = function () { this.creativeData = _n(_n({}, this.creativeData), this.extraContent) }, n.handleResponseSourceLogic = function () { var e = xt(It().mark((function e(r) { var n, i; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (n = "direct" === r.auction_type, e.prev = 1, !r.markup) { e.next = 8; break } return this.responseType = "HTML", e.next = 6, t.prototype.extractCreativeData.call(this, r.markup); case 6: e.next = 25; break; case 8: if (!n) { e.next = 17; break } return this.responseType = "Hephaestus", e.next = 12, yn(this, r); case 12: return i = e.sent, e.next = 15, t.prototype.extractCreativeData.call(this, i); case 15: e.next = 25; break; case 17: if (!r.adm) { e.next = 23; break } return this.responseType = "Kraken", e.next = 21, t.prototype.extractCreativeData.call(this, r.adm); case 21: e.next = 25; break; case 23: this.errorReporter.report(Rt, "Unable to extract creative data from any source"), Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: "no-crtve-data" }, this.slotConfig, this.logger); case 25: this.setExtraMacros(r), this.copyCreativeData(), e.next = 32; break; case 29: e.prev = 29, e.t0 = e.catch(1), this.logger.error(e.t0); case 32: case "end": return e.stop() } }), e, this, [[1, 29]]) }))); return function (t) { return e.apply(this, arguments) } }(), n.setExtraMacros = function (t) { this.setImpressionId(t.krg_imp_id); var e = t.creative_id || t.id; e && this.setExtraMacrosCreativeId(e, t.auction_type), t.biddable_id && this.setExtraMacrosLineItemId(t.biddable_id), t.deal_id && this.setExtraMacrosDealId(t.deal_id) }, e }(sn); function Cn(t, e, r, n, i) { var o, a = function (t) { var e, r = null, n = d(t), i = h(n, "krg_creative_id"), o = h(n, "krg_time"); if (o && 10 === o.length) e = o; else { var a = new Date, s = ("0" + a.getDate()).slice(-2), c = ("0" + (a.getMonth() + 1)).slice(-2); e = "" + a.getFullYear() + c + s + "00" } return i && (r = "https://kats.prod.kargo.com/api/kssp-creative-markup?creative_id=" + i + "&response_time_id=" + e + "&limit=1"), r }(t); if (n.getOverrideUrl() || i.override_url || a) { var s = new cn(t, e, n); a ? s.setRequestUrl(a, !1) : i.override_url && s.setRequestUrl(i.override_url), o = s } else if (i.html) { var c = new ln(t, e, n); c.setResponse(i.html), o = c } else o = new An(t, e, n), i.kraken_request_url ? o.setRequestUrl(i.kraken_request_url) : i.kraken ? o.setResponse(i.kraken) : i.socialCanvasSegments ? o.setSocialCanvasSegments(i.socialCanvasSegments) : i.socialEmbedURL && o.setSocialEmbedURL(i.socialEmbedURL), i.sourceElement && o.setSourceElement(i.sourceElement); return new Er(t, e, r, n, o, i) } function xn(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function En(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? xn(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : xn(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var In = function () { function t(t, e, r, n, i, o) { this.win = t, this.logger = e, this.krakenBidID = r, this.krakenHostname = n, this.config = i, this.container = o, this.renderEventFired = !1 } var e = t.prototype; return e.recordEvent = function (t, e, r, n) { if (void 0 === e && (e = 0), void 0 === r && (r = 0), void 0 === n && (n = 0), !this.renderEventFired) { var i = null; switch (t) { case Gt.KrakenEventType.Render: i = this.getRenderEvent(e, r, n); break; case Gt.KrakenEventType.AdTagReady: i = this.getAdTagReadyEvent(); break; default: return void this.logger.warn("Unknown Kraken event type: " + t) }try { var o = this.getEventURL(i); D(this.win, o), this.logger.debug("Kraken Metrics: " + t + " event reported", i) } catch (t) { this.logger.error("Kraken Metrics: Failed to report event", t) } this.renderEventFired = !0 } }, e.getEventURL = function (t) { var e = new URL("https://" + this.krakenHostname + "/api/v1/event/render"); return Object.keys(t).forEach((function (r) { var n = t[r]; e.searchParams.append(r, n.toString()) })), e.toString() }, e.getPageDomain = function (t) { return new URL(t).hostname }, e.getAdTagReadyEvent = function () { return this.getBaseEventFlags("adtag_ready") }, e.getRenderEvent = function (t, e, r) { var n = this.getBaseEventFlags("render"), i = d(this.win), a = 0; if (this.config) { var s = cr[this.config.format]; s && (a = s.id); var c = _r.indexOf(this.config.format) >= 0, l = ""; return this.container && this.container.getType() && (l = this.container.getType() || ""), En(En({}, n), {}, { execution: this.config.execution || "", mediatype: c ? "video" : "banner", sdk: "", container: l, pageurl: i, top: o(this.win) ? 0 : 1, format: a, sender: 0, rw: t, rh: e, ww: this.win.innerWidth, wh: this.win.innerHeight, sw: this.win.screen.width, sh: this.win.screen.height, dur: r }) } throw new Error("Creative config is required to generate render event") }, e.getBaseEventFlags = function (t) { var e = d(this.win); return { ctx: this.krakenBidID, cts: Date.now(), domain: this.getPageDomain(e), eventtype: t, sender: 0 } }, t }(); function On(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } var Dn = new E("AdTag"), Sn = function () { function t(t, e, r) { this.pluginsLoaded = !1, this.adRequests = {}, this.queuedRequests = [], this.selfUrl = "", this.AD_METRIC_RATE = 20, this.win = t, this.logger = e, this.creativeFactory = r, this.windowConfig = (0, c.xF)(t, "Kargo.Config") } var e = t.prototype; return e.init = function () { var t = xt(It().mark((function t() { var e, n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (t.prev = 0, e = r()(this.win, "Kargo.Config.getGlobalConfig", (function () { return null }))(), Lt.executeGlobalConditionalCheck(e, this.logger, this.win), Lt.executePreloadJS(e, this.logger, this.win), Lt.executePreloadCSS(e, this.win), e && e.checkPageVars && e.checkPageVars(this.win), this.pluginsLoaded || !e) { t.next = 12; break } return t.next = 9, er.loadPlugins(this.win, e); case 9: n = t.sent, this.logger.debug(n), this.pluginsLoaded = !0; case 12: i = 0; case 13: if (!(i < this.queuedRequests.length)) { t.next = 22; break } return o = this.queuedRequests[i], t.next = 17, this.processAdRequest(o); case 17: (a = t.sent) && this.logger.warn(a); case 19: i += 1, t.next = 13; break; case 22: this.queuedRequests = [], t.next = 29; break; case 25: return t.prev = 25, t.t0 = t.catch(0), this.logger.error(t.t0), t.abrupt("return", Promise.reject(t.t0)); case 29: case "end": return t.stop() } }), t, this, [[0, 25]]) }))); return function () { return t.apply(this, arguments) } }(), e.createAdRequest = function (t, e) { var r = null, n = null; if (this.logger.debug("New Ad Request for slot " + t + " with params:", e), t && this.windowConfig && (n = (0, c.xF)(this.win, "Kargo.Config.getSlotConfig")(t)), this.windowConfig) if (n) { var i = new Ot(this.win, this.logger), o = e && "object" == typeof e ? e : {}; r = Cn(this.win, this.logger, i, n, o), this.adRequests[r.getId()] = r } else this.logger.error("No Kargo SlotConfig for '" + t + "' set"); else this.logger.error("No Kargo Config instance"); return r }, e.requestAd = function () { var t = xt(It().mark((function t(e, r) { var n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if ((i = this.cleanAdParams(r)).sourceElement || (i.sourceElement = Pt(e, this.win, i.sourceWindow), i.sourceElement || this.reportSourceElementError(e)), i.positionElement = i.sourceElement, i.externalId = (null == (n = i.positionElement) ? void 0 : n.getAttribute("data-external-id")) || void 0, o = (0, c.xF)(this.win, "Kargo.Config.onSlotReady")) { t.next = 7; break } return t.abrupt("return", Dn.errNotSet("Config")); case 7: return t.next = 9, this.startSlotLoadTimeout(e, o); case 9: if (!t.sent) { t.next = 12; break } return t.abrupt("return"); case 12: if (a = this.createAdRequest(e, i)) { t.next = 15; break } return t.abrupt("return"); case 15: if (this.pluginsLoaded || i.kraken) { t.next = 19; break } this.queuedRequests.push(a), t.next = 20; break; case 19: return t.abrupt("return", this.processAdRequest(a)); case 20: case "end": return t.stop() } }), t, this) }))); return function (e, r) { return t.apply(this, arguments) } }(), e.startSlotLoadTimeout = function (t, e) { var r = this; return new Promise((function (n) { var i = r.win.setTimeout((function () { var e = "Ad Request timed out waiting for Ad Slot after 2000ms"; r.logger.error(e), r.logger.report(Dt, e, { slot: t, version: "8.22.0" }), n(!0) }), 2e3); e(t, xt(It().mark((function t() { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: r.win.clearTimeout(i), n(!1); case 2: case "end": return t.stop() } }), t) })))) })) }, e.cleanAdParams = function (t) { var e = function (t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? On(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : On(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t }({}, t); return e.sourceElement = e.source_element || e.sourceElement, e.sourceWindow = e.source_window || e.sourceWindow, delete e.source_element, delete e.source_window, e }, e.reportSourceElementError = function (t) { this.logger.report(St, "Could not determine source element", { slot: t, version: "8.22.0" }) }, e.processAdRequest = function () { var t = xt(It().mark((function t(e) { var r, n, i, o; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (e) { t.next = 2; break } return t.abrupt("return"); case 2: return t.prev = 2, t.next = 5, e.fetchResponse(); case 5: if (r = e.getCreativeConfig()) { t.next = 8; break } return t.abrupt("return", Dn.errNotSet("Creative Config")); case 8: if (n = e.getSource()) { t.next = 11; break } throw new Error("Source is null"); case 11: return i = new Ft(this.win, n, { slot: r.slot || "unknown", creative: r.creativeId || "", format: r.format || "unknown" }), (o = new Ut(e, this.win, this.logger, i)).preDrawJS(r.format, r.slot), t.next = 16, this.creativeFactory.createCreative(r, n); case 16: if (t.sent) { t.next = 19; break } return t.abrupt("return", Dn.errCant("create creative")); case 19: o.postDrawJS(r.format, r.slot), t.next = 26; break; case 22: return t.prev = 22, t.t0 = t.catch(2), this.logger.error(t.t0), t.abrupt("return", t.t0); case 26: case "end": return t.stop() } }), t, this, [[2, 22]]) }))); return function (e) { return t.apply(this, arguments) } }(), e.getAd = function (t, e) { var r, n, i, o, a, s, c = this; "object" != typeof t || e || (t = (null == (i = e = t) ? void 0 : i.kargo_id) || "", null == (o = e) || delete o.kargo_id); (e || (e = {}), qt.reportSafeFrame(this.win, this.logger, t), e.getAdTimestamp = Date.now(), null != (r = e.kraken) && r.krg_imp_id && null != (n = e.kraken) && n.kraken_domain) && new In(this.win, this.logger, (null == (a = e.kraken) ? void 0 : a.krg_imp_id) || "", (null == (s = e.kraken) ? void 0 : s.kraken_domain) || "").recordEvent(Gt.KrakenEventType.AdTagReady); if (zt.isDebugMode(this.win) || 1 === Math.floor(Math.random() * this.AD_METRIC_RATE)) { var l = { slot: t }; Wt.reportAdMetric({ type: "loaded", version: "8.22.0" }, l, this.logger) } return new Promise(function () { var r = xt(It().mark((function r(n, i) { var o; return It().wrap((function (r) { for (; ;)switch (r.prev = r.next) { case 0: return r.next = 2, c.requestAd(t, e); case 2: (o = r.sent) ? (c.logger.warn("Request for Slot " + t + " Failed with error: " + o.message), i(o)) : n(); case 4: case "end": return r.stop() } }), r) }))); return function (t, e) { return r.apply(this, arguments) } }()) }, e.loadAds = function () { var t, e = null == (t = this.win) ? void 0 : t.Kargo; if (null != e && e.ads && null != e && e.ads.length) { var r = null == e ? void 0 : e.ads.slice(0); for (e.ads = []; r.length;)this.getAd(r.shift()) } }, e.setSelfUrl = function (t) { this.selfUrl = t }, t }(); const Rn = Sn; var Tn = { PRODUCTION: "production", STAGING: "staging" }; var Vn = { checked: !1, passive: !1, optionsAsObject: !1 }, Ln = function (t) { if (t && !Vn.checked) { try { var e = Object.defineProperties({}, { capture: { get: function () { Vn.optionsAsObject = !0 } }, passive: { get: function () { Vn.passive = !0 } } }), r = function () { }; t.addEventListener("kargo-test", r, e), t.removeEventListener("kargo-test", r, e) } catch (t) { } Vn.checked = !0 } }; function Pn(t, e, r, n, i) { void 0 === n && (n = !1), void 0 === i && (i = !1); var o = "string" == typeof e ? [e] : e; Ln(t); var a = n; if (Vn.optionsAsObject && (a = { capture: n }, Vn.passive && (a.passive = i)), t.addEventListener) for (var s = 0; s < o.length; s += 1)t.addEventListener(o[s], r, a) } function Mn(t, e, r, n) { void 0 === n && (n = !1); var i = "string" == typeof e ? [e] : e; Ln(t); var o = n; if (Vn.optionsAsObject && (o = { capture: n }), t.removeEventListener) for (var a = 0; a < i.length; a += 1)t.removeEventListener(i[a], r, o) } !function () { function t(t) { this.handling = !1, this.listeners = [], this.handleAction = null, this.type = "", this.handling = t.handling || this.handling, this.listeners = t.listeners || this.listeners, this.handleAction = t.handleAction || this.handleAction, this.type = t.type || this.type } t.prototype.addListener = function (t) { t && this.listeners.push(t) }, t.prototype.handle = function () { for (var t = 0; t < this.listeners.length; t += 1) { var e = this.listeners[t]; this.handleAction ? this.handleAction(e, arguments) : console.log("handleAction function needed") } } }(); var Nn = "new-template-after-click", Fn = "new-template", Un = { newTemplate: function (t) { ut(t.rootElement.querySelector(".kargo-ad-content"), Fn) }, closeSwipeUp: function (t) { r()(t.config.settings.tracking, "dismiss", []).forEach((function (e) { D(t.win, e) })), t.onClose(), t.destroy() }, clickCreative: function (t) { var e = t.rootElement.querySelector("." + Fn); e && ut(e, Nn); t.onClick({}, { format: t.config.format, event: "click" }) }, clickSwipeUp: function (t) { var e = t.rootElement.querySelector("." + Fn); e && ut(e, Nn); t.onClick({}, { format: t.config.format, event: "click" }) }, swipeCreative: function (t) { var e = t.rootElement.querySelector("." + Fn); e && ut(e, Nn); t.onClick({}, { format: t.config.format, event: "swipe" }) } }; function Kn(t) { if (t) { if (t.includes("celtra-ad-v3")) return "celtra"; if (t.includes("storage.cloud.kargo.com/ad/network/kap/")) return "kap" } return "" } var jn = function () { function t(t, e, r, n) { this.win = t, this.logger = e, this.config = null, this.container = null, this.metricReporter = null, this.rootElement = null, this.sizeMonitor = null, this.isVisible = !1, this.isDisplayed = !1, this.isViewable = !1, this.isDestroyed = !1, this.timestamps = { start: Date.now(), displayed: null, firstVisible: null, viewable: null, destroyed: null }, this.tracking = new Ot(t, e), this.destroy = r, this.reportError = n } var e = t.prototype; return e.setVariables = function (t, e, r, n) { this.config = t, this.container = e, this.rootElement = r, this.metricReporter = n }, e.setContainerSize = function (t, e) { var r = this; if (this.container) { var n = this.container.getType(); this.logger.debug("Setting " + n + " Container Size: " + e + "x" + t), this.container.setContainerSize(e, t).catch((function (t) { var e = "Failed to set " + n + " Container Size"; t && (e += ": " + t), r.logger.debug(e) })) } else this.logger.log("No container at this time for creative. Config: " + this.config) }, e.onCreate = function (t) { var e, r, n = this; null !== (null == (e = this.config) ? void 0 : e.onCreate) && (null == (r = this.config) || null == r.onCreate || r.onCreate()), this.win.addEventListener("message", (function (e) { var r = function (t, e) { var r = t.data; if ("string" == typeof r && /^\{/.test(r)) try { return JSON.parse(r) } catch (t) { return e.log("Could not parse json: " + r), null } return t.data }(e, n.logger), i = Un["string" == typeof r ? r : ""]; i && i.bind(t)(t, r) })) }, e.onLoad = function () { var t, e, r, n = null == (t = this.config) ? void 0 : t.format; if (this.container && null !== this.container.getType() && "OutstreamVideo" !== n) { var i, o, a = this.container.getType(), s = cr[n].size, c = s.w, l = s.h; if ("GoogleAmp" === a) if ("Sidekick" === (null == (i = this.config) ? void 0 : i.format) && this.sizeMonitor) c = Math.max(this.sizeMonitor.currentSize.width, 140), l = Math.max(this.sizeMonitor.currentSize.height, 180); else if ("Hover" === (null == (o = this.config) ? void 0 : o.type)) { var u; c = (null == (u = this.config) || null == (u = u.sourceWindow) || null == (u = u.context) ? void 0 : u.initialIntersection.rootBounds.width) || c, l = 64 } this.setContainerSize(l, c) } null !== (null == (e = this.config) ? void 0 : e.onLoad) && (null == (r = this.config) || null == r.onLoad || r.onLoad()) }, e.onDisplay = function () { var t, e, n, i, o; this.logger.debug("Creative is displayed"); var a = Date.now(), s = Kn(null == (t = this.config) ? void 0 : t.content); if (this.metricReporter && this.metricReporter.reportTimeToDisplay(a, s), this.isDisplayed = !0, this.timestamps.displayed = Date.now(), null !== (null == (e = this.config) ? void 0 : e.onDisplay) && (null == (n = this.config) || null == n.onDisplay || n.onDisplay()), null != (i = this.config) && i.slot && this.tracking) { var c, l, u = null == (c = this.config) ? void 0 : c.slot, h = r()(this.config, ["source", "kargo", "kraken_slot_id"], null); if (h && (u += "-KRKSID-" + h), (null == (l = this.config) ? void 0 : l.source.type) !== Lr.PASSBACK) Fr("serve", u, this.config, this.tracking); else { var d, g = { server: null == (d = this.config) ? void 0 : d.source.type.toLowerCase() }; Fr("serve", u, this.config, this.tracking, g) } } if ((zt.isDebugMode(this.win) || 1 === Math.floor(20 * Math.random())) && this.metricReporter && this.metricReporter.adMetricReport("impression"), "lmt" === (null == (o = this.config) ? void 0 : o.source.tag) && this.tracking) { var p, f, v; this.tracking.kaelImpression("lmt-serve", null == (p = this.config) ? void 0 : p.id, null == (f = this.config) ? void 0 : f.id); var m, k, y = Mr(null == (v = this.config) ? void 0 : v.type, this.rootElement); if (y) this.tracking.kaelViewability("lmt-inviewtime", null == (m = this.config) ? void 0 : m.id, y, null == (k = this.config) ? void 0 : k.id) } }, e.onSizeChange = function (t, e) { var r, n; null !== (null == (r = this.config) ? void 0 : r.onSizeChange) && (null == (n = this.config) || null == n.onSizeChange || n.onSizeChange(t, e)) }, e.onVisible = function () { var t, e, r, n = this, i = Date.now(), o = this.win.setInterval((function () { var t, e; null != (t = n.config) && null != (t = t.sourceElement) && t.ownerDocument.defaultView || (Date.now() - i < 1e4 && (zt.isDebugMode(n.win) || 1 === Math.floor(100 * Math.random())) && n.reportError("Slot has refreshed within 10 seconds"), "Hover" === (null == (e = n.config) ? void 0 : e.type) && ((zt.isDebugMode(n.win) || 1 === Math.floor(500 * Math.random())) && n.reportError("Slot refreshed with detached script"), n.destroy()), n.win.clearTimeout(o)) }), 500); if (null != (t = this.config) && null != (t = t.settings) && t.enable_messaging) { var a, s = Ur(this.rootElement); if (s && s.contentWindow) s.contentWindow.postMessage((null == (a = this.config) ? void 0 : a.format) + "-onVisible", "*") } this.isVisible = !0, this.timestamps.firstVisible || (this.timestamps.firstVisible = Date.now()), null !== (null == (e = this.config) ? void 0 : e.onVisible) && (null == (r = this.config) || null == r.onVisible || r.onVisible()) }, e.onNotVisible = function () { var t, e, r; if (null != (t = this.config) && t.settings.enable_messaging) { var n, i = Ur(this.rootElement); if (i && i.contentWindow) i.contentWindow.postMessage((null == (n = this.config) ? void 0 : n.format) + "-onNotVisible", "*") } this.isVisible = !1, null !== (null == (e = this.config) ? void 0 : e.onNotVisible) && (null == (r = this.config) || null == r.onNotVisible || r.onNotVisible()) }, e.onViewable = function () { var t, e, n, i, o; this.isViewable = !0, this.timestamps.viewable = Date.now(), null !== (null == (t = this.config) ? void 0 : t.onViewable) && (null == (e = this.config) || null == e.onViewable || e.onViewable()); var a, s, c = this.config.slot, l = r()(this.config, ["source", "kargo", "kraken_slot_id"], null); (l && (c += "-KRKSID-" + l), null != (n = this.config) && n.slot && this.tracking && (null == (i = this.config) ? void 0 : i.source.type) !== Lr.PASSBACK && Fr("view", c, this.config, this.tracking), "lmt" === (null == (o = this.config) ? void 0 : o.source.tag) && this.tracking) && this.tracking.kaelImpression("lmt-view", null == (a = this.config) ? void 0 : a.id, null == (s = this.config) ? void 0 : s.id); Kr(this.rootElement) }, e.onMrcVideoViewable = function () { var t = this.config, e = t.slot, r = t.source, n = t.format; if (e && this.tracking && r.type !== Lr.PASSBACK) { var i = !1; _r.indexOf(n) >= 0 && (i = !0), i && Fr("view-predict-in-confirmed-502", e, this.config, this.tracking) } }, e.onCompleteViewable = function () { var t, e, r; null != (t = this.config) && t.slot && this.tracking && (null == (e = this.config) ? void 0 : e.source.type) !== Lr.PASSBACK && Fr("completeview", null == (r = this.config) ? void 0 : r.slot, this.config, this.tracking) }, e.onClick = function (t, e) { var n, i, o, a = this, s = null == (n = this.config) ? void 0 : n.slot, c = r()(this.config, ["source", "kargo", "kraken_slot_id"], null); c && (s += "-KRKSID-" + c); var l = null == (i = this.config) ? void 0 : i.settings.tracking.click; l && l.length && l.forEach((function (t) { D(a.win, t) })); var u = r()(e, "event", null), h = r()(this.config, "settings.tracking.click_to_expand", [])[0], d = r()(this.config, "settings.tracking.swipe_to_expand", [])[0]; "swipe" === u && d ? D(this.win, d) : "click" === u && h && D(this.win, h), s && this.tracking && (null == (o = this.config) ? void 0 : o.source.type) !== Lr.PASSBACK && Fr("click", s, this.config, this.tracking), this.metricReporter && this.metricReporter.adMetricReport("click") }, e.onClose = function () { var t, e, n, i; if (null != (t = this.config) && t.slot && this.tracking && (null == (e = this.config) ? void 0 : e.source.type) !== Lr.PASSBACK) { var o, a = null == (o = this.config) ? void 0 : o.slot, s = r()(this.config, ["source", "kargo", "kraken_slot_id"], null); s && (a += "-KRKSID-" + s), Fr("close", a, this.config, this.tracking) } null !== (null == (n = this.config) ? void 0 : n.onClose) && (null == (i = this.config) || null == i.onClose || i.onClose()) }, e.onDestroy = function () { var t, e; this.isDestroyed = !0, this.isVisible = !1, this.timestamps.destroyed = Date.now(), null !== (null == (t = this.config) ? void 0 : t.onDestroy) && (null == (e = this.config) || null == e.onDestroy || e.onDestroy()) }, t }(); function Hn(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } var Bn = function () { function t(t, e, r) { this.win = t, this.logger = e, this.config = r, this.AD_METRIC_RATE = 20, this.K_CONTENT = ".kargo-ad-content", this.creativeWrittenMetricReported = !1 } var e = t.prototype; return e.adMetricReport = function (t, e, r) { void 0 === e && (e = void 0), Wt.reportAdMetric(function (t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Hn(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Hn(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t }({ value: e, type: t, version: "8.22.0" }, r), this.config, this.logger) }, e.reportAdInViewMetric = function () { (zt.isDebugMode(this.win) || 1 === Math.floor(100 * Math.random())) && this.adMetricReport("inview-50-percent", 1) }, e.reportTimeToDisplay = function (t, e) { var r = t - this.config.getAdTimestamp, n = { snippetType: e }; (zt.isDebugMode(this.win) || this.creativeWrittenMetricReported) && (this.adMetricReport("time-to-display", r, n), this.creativeWrittenMetricReported = !1) }, e.reportTimeToCreative = function (t, e) { var r = t - this.config.getAdTimestamp, n = { snippetType: e }; (zt.isDebugMode(this.win) || 1 === Math.floor(Math.random() * this.AD_METRIC_RATE)) && (this.adMetricReport("time-to-creative", r, n), this.creativeWrittenMetricReported = !0) }, t }(), qn = function () { function t(t, e, r, n) { void 0 === n && (n = { once: !0 }), this.win = t, this.logger = e, this.rootElement = r, this.options = n, this.LISTENER_INTERVAL_PERIOD = 100, this.clickDetected = !1, this.watchingItems = [], this.callbacks = [], this.errored = !1 } var e = t.prototype; return e.eventHandler = function (t) { this.clickDetected && this.options.once || (this.logger.debug("Click Detected"), this.clickDetected = !0, this.callbacks.forEach((function (e) { return e(t) })), this.options.once && this.removeListener()) }, e.onClick = function (t) { this.callbacks.includes(t) || this.callbacks.push(t) }, e.attachListener = function () { var t = this; if (!this.listenerInterval) { var e = this.eventHandler.bind(this), r = function (n) { t.watchingItems.includes(n) ? (n.removeEventListener("click", e), n.addEventListener("click", e, { passive: !0 })) : (n.addEventListener("click", e, { passive: !0 }), n.kargoClickHandler = e, t.watchingItems.push(n)); (n.document ? Array.from(n.document.getElementsByTagName("iframe")) : Array.from(n.getElementsByTagName("iframe"))).forEach((function (e) { if (e.contentWindow) try { e.contentWindow.location.href, r(e.contentWindow) } catch (e) { t.errored || t.logger.debug(e), t.errored = !0 } })) }; r(this.rootElement), this.listenerInterval = this.win.setInterval((function () { r(t.rootElement) }), this.LISTENER_INTERVAL_PERIOD) } }, e.removeListener = function () { this.win.clearInterval(this.listenerInterval), this.watchingItems.forEach((function (t) { try { t.kargoClickHandler && t.removeEventListener("click", t.kargoClickHandler) } catch (t) { } })), this.listenerInterval = void 0, this.watchingItems = [] }, t }(), zn = 1230, Wn = 300, Gn = 744, Yn = 428, Zn = "core", Jn = "flex", Qn = "desktop-lighthouse", Xn = [Jn, Zn, Qn]; var $n = { findGWDElem: function (t) { return t.getElementsByClassName("GoogleActiveViewClass").item(0) }, getDimensions: function (t) { return { width: t.clientWidth, height: t.clientHeight } }, setDimensions: function (t, e) { t.style.width = e.width + "px", t.style.height = e.height + "px" }, collapse: function (t, e) { 50 === e && t && t.setAttribute("height", e + "px") } }; var ti = { getCeltraSize: function (t, e) { if (t) { var r = t.offsetWidth, n = t.offsetHeight; return { width: Math.min(e.width, r), height: Math.min(e.height, n) } } return e }, getConfigMinMax: function (t, e) { return t.maxDimension && (t.maxDimension.height && (e.height = Math.min(e.height, t.maxDimension.height)), t.maxDimension.width && (e.width = Math.min(e.width, t.maxDimension.width))), t.minDimension && (t.minDimension.height && (e.height = Math.max(e.height, t.minDimension.height)), t.minDimension.width && (e.width = Math.max(e.width, t.minDimension.width))), e }, getPlatformAdSize: function (t, e) { for (var r, n = 0; n < t.length; n += 1) { try { var i, o, a = null; if (t[n].contentWindow && null != (i = t[n].contentWindow) && i.document) a = null == (o = t[n].contentWindow) ? void 0 : o.document; a && (r = a.querySelector(".kargo-frame, .kargo-view")) } catch (t) { } if (r) break } return r && r.offsetHeight > 0 ? (e.height = Math.min(e.height, r.offsetHeight), e.width = Math.min(e.width, r.offsetWidth), { platformAd: !!r, platformSize: e }) : { platformAd: !!r, platformSize: void 0 } } }; var ei = function () { function t(t, e, r, n, i, o) { void 0 === n && (n = null), this.win = t, this.logger = e, this.iframeConfig = r, this.resolvedSource = n, this.socialCanvasCreatives = i, this.socialEmbedRenderDivId = o, this.writeComplete = !1, this.locationElement = null, this.iframe = null, this.canBustOutOfFrame = !0, this.creativeId = null, this.auctionType = void 0, this.currentSize = { width: 0, height: 0 }, this.callbacks = { sizeChange: [], contentLoad: [], error: [] }, this.AMP_INTERVAL = 100 } var e = t.prototype; return e.setLocationElement = function (t) { this.locationElement = t }, e.setCreativeApiMacros = function (t) { this.iframeConfig.creativeApiMacros = t }, e.setExtraParams = function (t) { this.iframeConfig.macros = Object.assign(this.iframeConfig.macros || {}, t) }, e.setTracking = function (t) { this.iframeConfig.tracking = t }, e.setIasTag = function (t) { this.iframeConfig.macros.iasTag = t }, e.setCreativeId = function (t) { this.creativeId = t }, e.setAuctionType = function (t) { this.auctionType = t }, e.setWrapper_height_offset = function (t) { this.iframeConfig.macros.wrapper_height_offset = t }, e.onSizeChange = function (t) { this.callbacks.sizeChange.indexOf(t) < 0 && this.callbacks.sizeChange.push(t) }, e.onContentLoad = function (t) { this.callbacks.contentLoad.indexOf(t) < 0 && this.callbacks.contentLoad.push(t) }, e.onError = function (t) { this.callbacks.error.indexOf(t) < 0 && this.callbacks.error.push(t) }, e.checkCreativeSize = function (t) { var e, r = this; if (this.iframe && this.iframe.contentDocument) { var n = this.iframe.contentDocument.body; if (n) { var i = { width: Math.max(n.scrollWidth, n.offsetWidth, n.clientWidth), height: Math.max(n.scrollHeight, n.offsetHeight, n.clientHeight) }; if (t) { var o = this.iframe.contentDocument.documentElement; i = { width: Math.max(o.scrollWidth, o.offsetWidth, o.clientWidth), height: Math.max(o.scrollHeight, o.offsetHeight, o.clientHeight) } } if (i.width = Math.min(i.width, this.win.innerWidth), this.iframeConfig.fullHeight || (i.height = Math.min(i.height, this.win.innerHeight)), "none" === (null == (e = this.iframe) ? void 0 : e.style.display)) { var a = this.iframe.previousElementSibling; if (a) { var s = $n.findGWDElem(a); if (s) { var c = $n.getDimensions(s); $n.setDimensions(a, c), $n.collapse(this.locationElement, c.height), i = c } } } var l = n.querySelector(".celtra-ad-v3"); l && (i = ti.getCeltraSize(l, i)); var u = n.querySelectorAll("iframe"), h = ti.getPlatformAdSize(u, i), d = h.platformAd, g = h.platformSize; g && (i = g); var p = this.iframe.contentDocument.getElementById("fabrik-outstream"); if (p && (i = { width: p.clientWidth, height: p.clientHeight }), (i = ti.getConfigMinMax(this.iframeConfig, i)).height += parseInt(n.style.paddingTop || "0", 10) + parseInt(n.style.paddingBottom || "0", 10), i.width += parseInt(n.style.paddingLeft || "0", 10) + parseInt(n.style.paddingRight || "0", 10), i.width !== this.currentSize.width || i.height !== this.currentSize.height) { if (d) this.locationElement.style.maxWidth = i.width + "px"; this.iframe.width = i.width.toString(), this.iframe.height = i.height.toString(), this.currentSize.width = i.width, this.currentSize.height = i.height, this.callbacks.sizeChange.forEach((function (t) { t(r.currentSize.width, r.currentSize.height) })) } } } }, e.monitor = function (t) { var e = this, r = function () { e.checkCreativeSize(t); var n = e.win.requestAnimationFrame(r); e.iframe && !function (t, e) { for (var r = t.parentNode; r;) { if (r === e) return !0; r = r.parentNode } return !1 }(e.iframe, e.win.document.body) && e.win.cancelAnimationFrame(n) }; this.iframeConfig.expansionCheck && r() }, e.fireBlockedTracker = function () { var t = this; if (this.iframeConfig && this.iframeConfig.tracking && this.iframeConfig.tracking.blocked) { var e = this.iframeConfig.tracking.blocked; Array.isArray(e) && e.length && e.forEach((function (e) { return D(t.win, e) })) } }, e.getFrame = function () { return this.iframe }, e.adContainerFailureReport = function () { var t = new v("Ad Container removed before Ad could display"); Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: "ad-contr-rmvd" }, this.iframeConfig, this.logger), this.callbacks.error.forEach((function (e) { return e(t) })) }, e.kapHeavyAdIntervention = function () { var t = this; a(this.win) || (i(window).onmessage = function (e) { try { var r = JSON.parse(e.data); if ("HeavyAdIntervention" === r.id) { var n, i, o, a, s = new Ft(t.win, t.resolvedSource || { logger: t.logger }), c = { creative: (null == (n = t.iframeConfig.macros) ? void 0 : n.creative) || void 0, format: null == (i = t.iframeConfig.macros) ? void 0 : i.format, slot: null == (o = t.iframeConfig.macros) ? void 0 : o.slot, version: null == (a = t.iframeConfig.macros) ? void 0 : a.adTagVersion }; s.report(St, "Ad blocked by browser: " + r.message, c), t.fireBlockedTracker() } } catch (t) { } }) }, e.assignMacros = function (t, e) { if ((this.iframeConfig.macros || this.iframeConfig.creativeApiMacros) && (t.Kargo || (t.Kargo = {}), this.iframeConfig.macros && (t.Kargo.PlatformMacros = this.iframeConfig.macros), this.iframeConfig.creativeApiMacros)) { t.Kargo.CreativeApi = {}; var r = this.iframeConfig.creativeApiMacros.macroConfig; if (r) { var n = new nn(this.win, this.logger, r.slotId); if (t.Kargo.CreativeApi.parseCreativeHTML = function (t) { return n.replaceAllMacros(t, r) }, e) { var i = t.Kargo.PlatformMacros; t.Kargo.PlatformMacros = JSON.parse(n.replaceAllMacros(JSON.stringify(i), r)) } } var o = this.iframeConfig.creativeApiMacros.apiMethods; o && Object.assign(t.Kargo.CreativeApi, o) } }, e.determineCanBustOutOfFrame = function (t) { return "open" !== this.auctionType || !!(t.includes("data:platform,kargo") || t.includes("window.Kargo.Native")) }, e.addBodyStyles = function (t, e) { var r = "margin: 0px; padding: 0px; overflow: hidden;"; this.iframeConfig.maxDimension && (this.iframeConfig.maxDimension.height && (r += "max-height: " + this.iframeConfig.maxDimension.height + "px;"), this.iframeConfig.maxDimension.width && (r += "max-width: " + this.iframeConfig.maxDimension.width + "px;")), this.iframeConfig.customCss && (r += this.iframeConfig.customCss), this.logger.debug("Creative is allowed to bust out of frame: " + this.canBustOutOfFrame), t.write('<html><head><script type="text/javascript">window.inDapIF = ' + this.canBustOutOfFrame + ';<\/script></head><body style="' + r + '">' + e + "</body></html>"), t.close() }, e.write = function (t) { var e, r = this; this.logger.debug("Writing Ad Content in iframe"); var n = this.iframeConfig, i = n.hide, o = n.width, a = n.height; if (this.iframe = ri(this.win, "kargo-creative", i, { width: o || 0, height: a || 0 }), this.canBustOutOfFrame = this.determineCanBustOutOfFrame(t), this.canBustOutOfFrame || (this.iframe.sandbox = "allow-forms allow-pointer-lock allow-scripts allow-top-navigation-by-user-activation allow-same-origin allow-popups allow-popups-to-escape-sandbox"), this.socialEmbedRenderDivId && (this.locationElement = this.win.document.querySelector("#" + this.socialEmbedRenderDivId), this.logger.debug("Writing iframe into " + this.socialEmbedRenderDivId + " element")), null == (e = this.locationElement) || e.appendChild(this.iframe), this.socialCanvasCreatives) { var s = this.socialCanvasCreatives.companion; null != s && s.renderDiv && s.creative && (!function (t, e, r) { var n, i = e.creative, o = e.dimensions, a = e.renderDiv, s = { width: +o.width, height: +o.height }, c = ri(t, "kargo-companion-creative", r, s), l = t.document.querySelector("#" + a); l && (l.appendChild(c), null == (n = c.contentWindow) || n.document.write('<html><head><script type="text/javascript">window.inDapIF = true;<\/script></head><body style="' + function (t) { return "margin: 0px; padding: 0px; overflow: hidden;   height: " + t.height + "px; width: " + t.width + "px" }(s) + '">' + i + "</body></html>")) }(this.win, s, this.iframeConfig.hide), this.logger.debug("Writing Companion in iframe appended to         " + s.renderDiv + " element")) } if (this.iframe.contentWindow) { var c = function () { var e; if (r.logger.debug("Ad Content Initial Load Complete"), null == (e = r.iframe) || e.removeEventListener("load", c), r.callbacks.contentLoad.forEach((function (t) { return t() })), "open" === r.auctionType) { var n, i, o = null == (n = r.iframe) || null == (n = n.contentWindow) ? void 0 : n.document.body, a = new RegExp("krg_ad_info", "g"), s = new RegExp(Pr, "g"); if (o) if (a.test(o.innerHTML) || s.test(o.innerHTML) || s.test(t) || (null == (i = r.resolvedSource) ? void 0 : i.kargoCreative)) new Ft(r.win, r.resolvedSource || { logger: r.logger }).report(St, "Kargo creative found in Open") } }; this.iframe.addEventListener("load", c), this.kapHeavyAdIntervention(); var l = this.iframe.contentWindow; this.assignMacros(l, t.includes(Pr)), t.indexOf("dcmads") > 0 && (this.iframeConfig.customCss += "text-align: center"), this.addBodyStyles(l.document, t); var u = t.indexOf("https://adsdk.microsoft.com/native-to-display/sdk.js") > 0; this.monitor(u) } else this.adContainerFailureReport() }, t }(); function ri(t, e, r, n) { var i = t.document.createElement("iframe"); return i.style.display = r ? "none" : "block", i.className = e, i.height = "" + n.height, i.width = "" + n.width, i.style.margin = "0px auto", i.style.textAlign = "center", i.style.border = "none", i } function ni(t, e) { var r = Array.from(t.querySelectorAll(e)); return r.length ? r : Array.from(t.querySelectorAll("iframe")).reduce((function (t, r) { return r.contentDocument ? t.concat(ni(r.contentDocument, e)) : t }), []) } function ii(t, e) { var r, n, i; (void 0 === e && (e = null), n = t instanceof ei ? t.iframeConfig : t, (null == (r = e) ? void 0 : r.format) === rr.SIDEKICK) ? n.expansionCheck = !1 : (n.width = "100%", "core" === (null == (i = e) ? void 0 : i.execution) && (n.maxDimension.width = Gn, n.minDimension.width = Wn), t.iframe && (t.iframe.parentElement.style.width = "100%", t.iframe.parentElement.style.maxWidth = "100%", t.iframe.width = "100%")) } var oi = "bannerVisible", ai = "interactiveAds", si = "bto-interactive-adhesive", ci = "static", li = "pickup"; function ui(t, e) { return $(e) && !t.settings.forceResponsive } function hi(t) { var e = t.format, r = t.execution; return e === rr.LIGHTHOUSE || null !== r && ["interscroller", "lighthouse", "desktop-lighthouse"].includes(r) } function di(t) { var e = t.getBoundingClientRect().x; e > 0 && (t.style.left = "-" + e + "px") } function gi(t, e) { Object.assign(t.style, { maxWidth: zn + "px", minWidth: "615px", width: e + "px" }) } function pi(t) { return Math.min(Math.max(t, 615), zn) } function fi(t, e) { var r; return (null == (r = t.execution) ? void 0 : r.includes(si)) || "banner" === t.settings.bto_interactive_type || ui(t, e) && "branded_takeover" === t.placementType } var vi = function (t, e, r, n, i) { var o = e.contentWindow.document, a = null == t ? void 0 : t.filter((function (t) { return !o.querySelector("." + t.tagName) })); if (o && a.length > 0) { var s = o.createDocumentFragment(); a.map((function (t) { return n.debug(t.tagName + " Tag Missing in Creative Iframe - Attaching again"), function (t, e, r) { var n = t.createElement("div"); n.classList.add(e); var i = t.createElement("script"); return i.src = r, [n, i] }(o, t.tagName, t.url).map((function (t) { return ht(t, "append", s) })), t })), ht(s, "append", o.body), i = r.setInterval((function () { vi(a, e, r, n, i) }), 100), r.setTimeout((function () { return r.clearInterval(i) }), 5e3) } else i && r.clearInterval(i) }, mi = new E("Creative"), ki = function () { function t(t, e) { this.sizeMonitor = null, this.visibilityMonitor = null, this.clickMonitor = null, this.metricReporter = null, this.template = null, this.container = null, this.ias = null, this.useOverlapDetection = !1, this.overlapMonitor = null, this.activeView = null, this.krakenMetrics = null, this.templateHtml = "", this.templateCss = "", this.source = null, this.socialEmbedLocationId = null, this.AD_METRIC_RATE = 20, this.SLOT_REFRESHED_REPORT_RATE = 100, this.win = t, this.logger = e, this.renderer = null, this.components = {}, this.socialCanvasCreatives = { companion: null }, this.creativeTypes = []; var r = +h(d(this.win), "krg_debug"); this.win.__krg_v6_proxy_enabled || 5 === r ? (this._config = (0, c.h1)({}, Vr), this.config = this._config, this.logger.debug("Creative config is proxified")) : this.config = (0, c.h1)({}, Vr), this.isCreativeLoaded = !1, this.isHidden = !0, this.eventHandler = new jn(this.win, this.logger, this.destroy.bind(this), this.reportError), this.rootElement = this.win.document.createElement("div") } var e = t.prototype; return e.getRenderConfig = function () { }, e.setComponents = function (t) { this.components = t, this.components.Ias && (this.ias = new this.components.Ias(this.win, this.logger, this)), this.template = this.template || new this.components.Template(this.win, this.templateHtml, this.templateCss), this.components.ActiveView && (this.activeView = new this.components.ActiveView(this.win, this.logger)) }, e.detectContainerEnvironment = function () { var t = this; return this.container = new Ht(this.config.sourceWindow || this.win), xt(It().mark((function e() { var r, n; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, null == (r = t.container) ? void 0 : r.detectEnvironment(); case 3: return null !== (n = e.sent) && t.logger.debug("Detected Container Type: " + n), e.abrupt("return", n); case 8: return e.prev = 8, e.t0 = e.catch(0), e.abrupt("return", t.logger.error(e.t0)); case 11: case "end": return e.stop() } }), e, null, [[0, 8]]) })))() }, e.setConfig = function (t) { var e = this.validateConfig(t); (0, c.h1)(this.config, e), this.win.__krg_creatives = this.win.__krg_creatives || 0, this.win.__krg_creatives += 1, this.config.localId = this.win.__krg_creatives, h(d(this.win), "krg_debug") && (this.config.debug = !0), h(d(this.win), "kapt_qa") && (this.config.staging = !0), this.config.id || (this.config.id = this.source && this.source.impressionId ? this.source.impressionId : (0, c.lk)(this.win), this.logger.report("IDENT", "Impression ID unset in creative, regenerated a new one")), this.config.debug && this.logger.setLevel(4), this.logger.setLabel(["CREATIVE", this.config.localId + " - " + (this.config.format || this.config.type).toUpperCase()]), this.logger.debug("Created with config:", this.config) }, e.getConfig = function () { return this.config }, e.validateConfig = function (t) { return Br.validateConfig(t, this.win) }, e.reportError = function (t, e) { void 0 === e && (e = {}); var r = t.krg_err_code || "CREATIVE", n = new Ft(this.win, this.source || { logger: this.logger }), i = this.config.creativeId || ""; n.report(r, t.message || t, { creative: i, format: this.config.format, slot: this.config.slot, source: (this.config.source || {}).type }, e.isWarning) }, e.display = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.eventHandler.isDisplayed) { t.next = 2; break } return t.abrupt("return"); case 2: if (this.config.positionElement) { t.next = 6; break } return this.reportError(mi.errNotSet("positionElement", "config")), this.destroy(), t.abrupt("return"); case 6: null == (e = this.template) || e.setDefaultTemplateVars(this.config.id, this.config.localId), this.setUpRootElement(), this.setUpMetricReporting(), this.setUpKrakenMetricsReporting(), this.setUpEventHandling(), this.setUpSizeMonitoring(), this.setUpVisibilityMonitoring(), this.setUpClickMonitoring(), this.setUpOverlapMonitoring(), this.onCreate(), Br.hideSourceIframe(this.config.sourceWindow), this.config.content = this.config.content || "", this.setUpThirdParties(), this.showContent(), this.isHidden = !1; case 21: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), e.setUpRootElement = function () { if (this.rootElement.className = "kargo-ad-v5 kargo-ad-" + this.config.localId + " kargo-ad-preload", this.config.externalId && (ut(this.rootElement, this.config.externalId), this.rootElement.setAttribute("data-external-id", this.config.externalId)), this.rootElement.setAttribute("data-id", this.config.id), this.rootElement.setAttribute("data-format", this.config.format), this.rootElement.setAttribute("data-slot", this.config.slot), this.template) { var t = this.template.replaceTemplateVars("html"), e = this.template.replaceTemplateVars("css"), r = this.config.css || ""; this.rootElement.innerHTML = t + '<style type="text/css">' + e + r + "</style>" } ht(this.rootElement, this.config.positionLocation, this.config.positionElement) }, e.setUpVisibilityMonitoring = function () { var t = this, e = _r.indexOf(this.config.format) > -1; this.components.VisibilityMonitor && (this.visibilityMonitor = new this.components.VisibilityMonitor(Br.getVisibilityCheckElement(this.config.type, this.rootElement), this.config.sourceElement, e), this.visibilityMonitor.onVisibleChange((function (e) { e ? (t.onVisible(), t.logger.debug("Visible")) : (t.onNotVisible(), t.logger.debug("Not Visible")) })), this.visibilityMonitor.onViewable((function () { var e; null == (e = t.metricReporter) || e.reportAdInViewMetric(), t.onViewable(), t.logger.debug("Viewable") })), this.visibilityMonitor.onMrcVideoViewable((function () { t.onMrcVideoViewable(), t.logger.debug("MRC Video Viewable") })), this.visibilityMonitor.onCompleteViewable((function () { t.onCompleteViewable(), t.logger.debug("Complete Viewable") })), this.visibilityMonitor.onMissingScript((function () { t.logger.debug("Current script removed from DOM"), t.destroy() })), this.visibilityMonitor.start()) }, e.setUpSizeMonitoring = function () { var t = this; if (this.components.SizeMonitor) { var e, r, n = this.rootElement.querySelector(Sr); this.sizeMonitor = new this.components.SizeMonitor(n), null == (e = this.sizeMonitor) || e.onSizeChange((function (e, r) { t.logger.debug("Size Change: " + e + "x" + r), t.checkSizeConstraints(), !t.isCreativeLoaded && r > 25 && e > 25 && (t.logger.debug("Creative Successfully Loaded"), t.setAsLoaded(), t.onLoad()), t.onSizeChange(e, r) })), null == (r = this.sizeMonitor) || r.start(), this.eventHandler.sizeMonitor = this.sizeMonitor } }, e.setUpMetricReporting = function () { this.metricReporter || (this.metricReporter = new Bn(this.win, this.logger, this.config)) }, e.setUpEventHandling = function () { this.eventHandler.setVariables(this.config, this.container, this.rootElement, this.metricReporter) }, e.setUpClickMonitoring = function () { var t = this; if (!this.clickMonitor) { var e = this.rootElement.querySelector(Sr); this.clickMonitor = new qn(this.win, this.logger, e), this.config.format !== rr.SWIPE_UP && this.clickMonitor.onClick((function (e) { t.onClick(e) })), this.clickMonitor.attachListener() } }, e.setUpOverlapMonitoring = function () { var t = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"); if (t && t().shouldCheckOverlap && t().shouldCheckOverlap() && this.components.OverlapMonitor) { var e = Br.getContentElement(this.rootElement), r = Br.getVisibilityCheckElement(this.config.type, this.rootElement); null !== e && (this.overlapMonitor = new this.components.OverlapMonitor(this.win, this.logger, e, r, this.config.sourceElement, this.config.id, this.config.slot)) } }, e.setCreativeTypes = function (t, e) { this.creativeTypes = t, e && (0, c.h1)(this.config, e), this.creativeTypes.includes("ivo") && ii(this.renderer, e) }, e.setUpKrakenMetricsReporting = function () { if (!this.krakenMetrics && this.config.source) { var t = this.config.source, e = t.krgImpId, r = t.krakenDomain; e && r && (this.krakenMetrics = new In(this.win, this.logger, e, r, this.config, this.container)) } }, e.setUpThirdParties = function () { this.ias && this.ias.isTrackingViewability() && Br.shouldAddIAS(this.config.source) && (this.config.content += this.ias.getTrackingTag()) }, e.getContentWrapper = function () { return this.rootElement.querySelector(Sr) }, e.showContent = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (e = this.getContentWrapper(), !this.config.content) { t.next = 16; break } return this.logger.debug("Writing content to contentWrapper"), t.prev = 3, t.next = 6, this.write(e, this.config.content); case 6: this.onDisplay(), t.next = 14; break; case 9: t.prev = 9, t.t0 = t.catch(3), this.reportError(t.t0), this.logger.error(t.t0), this.destroy(); case 14: t.next = 19; break; case 16: this.setAsLoaded(), this.onDisplay(), this.onLoad(); case 19: case "end": return t.stop() } }), t, this, [[3, 9]]) }))); return function () { return t.apply(this, arguments) } }(), e.destroy = function () { this.logger.debug("Destroying"), this.isHidden = !0, this.sizeMonitor && this.sizeMonitor.stop(), this.visibilityMonitor && this.visibilityMonitor.stop(), null != this.rootElement && vt(this.rootElement), this.onDestroy() }, e.getSocialCanvasCreatives = function (t, e) { var r = this.win.atob(t), n = $(this.win); return { creative: r || null, renderDiv: e, dimensions: { width: n ? "500" : "320", height: n ? "86" : "50" } } }, e.write = function (t, e) { var n, o, a, s, l, u, h, d, g, p, f = this; if (this.config.companion_div && ("social_embed_adhesion" === this.config.slotType && (this.logger.debug("social_embed_adhesion slot type detected"), this.socialEmbedLocationId = this.config.companion_div), this.config.settings.companion && (this.socialCanvasCreatives.companion = this.getSocialCanvasCreatives(this.config.settings.companion, this.config.companion_div))), hi(this.config) && !this.config.settings.forceResponsive && (e = e.replace("preview.js", "web.js")), this.config.previewMode) { var m = null; (m = e.match(/<div class="celtra-ad-v3">[\s\S]*?<\/div>/gi)) && (this.logger.debug("Preview Mode - Writing Ad Content Outside of Iframe"), this.getRenderConfig = function () { return { hide: !0 } }, m.map((function (r) { t.innerHTML += r, e = e.replace(r, "") }))) } var k = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"); if (k && k().isActiveViewRewriteEnabled()) try { this.activeView && this.activeView.isActiveViewWrapped(e) && (this.activeView.moveUp(t, e), e = this.activeView.remove(e)) } catch (t) { t instanceof Error || t instanceof v || "string" == typeof t ? t instanceof Error && "ActiveView: new active-view pixel" === t.message ? this.logger.debug("New active-view pixel fired") : this.reportError(t) : this.reportError(String(t)) } e = Br.addPrefixAndSuffix(e, this.config.prefix, this.config.suffix, this.logger); var y = this.win; t.ownerDocument && t.ownerDocument.defaultView && (y = t.ownerDocument.defaultView), this.renderer = new this.components.CreativeSandbox(y, this.logger, this.getRenderConfig(), this.source, this.socialCanvasCreatives, this.socialEmbedLocationId), null == (n = this.renderer) || n.setCreativeId(this.config.creativeId), null == (o = this.renderer) || o.setAuctionType(null == (a = this.config.source.auctionType) ? void 0 : a.toLowerCase()); var b = { creative: this.config.creativeId, format: this.config.format, slot: this.config.slot, source: this.config.source.type || "", creativeFlags: this.config.source.creativeFlags || {}, adTagVersion: "8.22.0", iasTagParams: this.config.iasTagParams }; if (null == (s = this.renderer) || s.setExtraParams(b), null == (l = this.renderer) || l.setTracking(this.config.settings.tracking), "Wrapper" === this.config.format) { var w, _, A = null, C = e.match(/<script[^>]*?skeleton.js"><\/script>/gi); if (C && C.length) A = C[0], null == (w = this.renderer) || w.setIasTag(A), e = e.replace(A, ""); if (this.config.settings.height_offset) null == (_ = this.renderer) || _.setWrapper_height_offset(this.config.settings.height_offset) } var x = r()(this.win, "Kargo.Plugin.Cerberus"), E = "direct" === (null == (u = this.config.source) || null == (u = u.auctionType) ? void 0 : u.toLowerCase()), I = { macroConfig: { lexId: x && x.getLexId() || "", slotId: this.config.slot || "", impressionId: this.config.id, hostname: r()(this.win, "location.hostname") || "", adFormat: this.config.format || "", creativeId: this.config.creativeId || "", creativeIdAlpha: E ? this.config.creativeId : "", creativeIdRtb: E ? "" : this.config.creativeId, lineItemId: E && (null == (h = this.config.source) ? void 0 : h.biddableId) || "", dealId: (null == (d = this.config.source) ? void 0 : d.dealId) || "" }, apiMethods: { getImpressionId: function () { return f.config.id }, isVisible: function () { return f.eventHandler.isVisible }, isViewable: function () { return f.eventHandler.isViewable }, hide: function () { return f.hide() }, show: function () { return f.show() }, destroy: function () { return f.destroy() }, setCreativeTypes: function (t, e) { return f.setCreativeTypes(t, e) }, reportError: function (t, e) { return void 0 === e && (e = {}), f.reportError(t, e) } } }; return null == (g = this.renderer) || g.setCreativeApiMacros(I), null == (p = this.renderer) || p.setLocationElement(t), i(window).Kargo.impressionId = this.config.id, new Promise((function (t, r) { var n, i, o, a; null == (n = f.renderer) || n.onContentLoad(t); var s, c = []; c.length > 0 && (null == (s = f.renderer) || s.onContentLoad((function () { var t; vi(c, (null == (t = f.renderer) ? void 0 : t.getFrame()) || null, f.win, f.logger) }))); null == (i = f.renderer) || i.onError(r), null == (o = f.renderer) || o.write(e); var l, u = Kn(e), h = Date.now() - 1; (null == (a = f.metricReporter) || a.reportTimeToCreative(h, u), f.krakenMetrics) && (null == (l = f.renderer) || l.onContentLoad((function () { var t; if (f.krakenMetrics) { var e = 0, r = !1; f.config && (r = _r.indexOf(f.config.format) >= 0); var n = null == (t = f.renderer) ? void 0 : t.getFrame(); if (n && r) { var i = n.contentDocument; if (i) { var o = ni(i, "video"); o.length && (e = o[0].duration) } } var a = 0, s = 0; if (f.sizeMonitor) { var c = f.sizeMonitor.currentSize; a = c.width, s = c.height } f.krakenMetrics.recordEvent(Gt.KrakenEventType.Render, a, s, e) } }))) })) }, e.show = function () { if (this.rootElement && this.isHidden) { ft(this.rootElement, Rr); var t = this.rootElement.childNodes[0]; t && (t.classList && t.classList.contains("kargo-ad-hover-slide-down-fast") && ft(t, "kargo-ad-hover-slide-down-fast"), ut(t, "kargo-ad-hover-slide-up-fast")) } this.isHidden = !1 }, e.hide = function () { if (this.rootElement && !this.isHidden) { var t = this.rootElement.childNodes[0]; t ? (ft(t, "kargo-ad-hover-slide-up-fast"), ut(t, "kargo-ad-hover-slide-down-fast")) : ut(this.rootElement, Rr) } this.isHidden = !0 }, e.setAsLoaded = function () { ft(this.rootElement, "kargo-ad-preload"), this.isCreativeLoaded = !0 }, e.checkSizeConstraints = function () { if (this.isCreativeLoaded && this.sizeMonitor) { var t = this.sizeMonitor.currentSize; if (t.height) if ("MiddleBanner" === this.config.format) t.height - 250 > 15 && this.reportError("SIZE: " + t.height + " is taller than allowed", { isWarning: !0 }) } }, e.getAnalytics = function () { var t = { localId: this.config.localId, id: this.config.id, type: this.config.type, format: this.config.format, execution: this.config.execution, kargoCreativeId: null, timestamps: this.eventHandler.timestamps }, e = r()(this.config, ["source", "kargo", "creativeId"], null); return e && (t.kargoCreativeId = e), t }, e.onCreate = function () { this.eventHandler.onCreate(this) }, e.onLoad = function () { this.eventHandler.onLoad() }, e.onDisplay = function () { this.eventHandler.onDisplay() }, e.onSizeChange = function (t, e) { this.eventHandler.onSizeChange(t, e) }, e.onVisible = function () { var t; this.eventHandler.onVisible(), null == (t = this.overlapMonitor) || t.start() }, e.onNotVisible = function () { var t; this.eventHandler.onNotVisible(), null == (t = this.overlapMonitor) || t.stop() }, e.onViewable = function () { this.eventHandler.onViewable() }, e.onMrcVideoViewable = function () { this.eventHandler.onMrcVideoViewable() }, e.onCompleteViewable = function () { this.eventHandler.onCompleteViewable() }, e.onClick = function (t, e) { this.eventHandler.onClick(t, e) }, e.onClose = function () { this.eventHandler.onClose() }, e.onDestroy = function () { var t; null == (t = this.overlapMonitor) || t.stop(), this.eventHandler.onDestroy() }, t }(); const yi = ki; var bi = function () { function t() { } return t.getPlatformMacros = function (t, e) { var r = { start: Array.from(new Set(t.tracking.start)), firstQuartile: t.tracking.firstQuartile, midpoint: t.tracking.midpoint, midQuartile: t.tracking.midpoint, thirdQuartile: t.tracking.thirdQuartile, complete: t.tracking.complete, mute: t.tracking.mute, unmute: t.tracking.unmute, replay: t.tracking.replay, error: t.tracking.error, expand: t.tracking.expand, dismiss: t.tracking.dismiss, clickTrackers: [] }; if (e && ("VideoAnchor" !== t.format || !e.isVpaid())) { r.start = r.start.concat(e.getImpressionTrackers()), r.error = r.error.concat(e.getErrorTrackers()), r.clickTrackers = r.clickTrackers.concat(e.getClickTrackers()); var n = e.getClickThroughUrl(); n && (r.clickUrl = n); var i = e.getTrackingEvents(); i && (r.start = r.start.concat(i.playback.start), r.firstQuartile = r.firstQuartile.concat(i.playback.firstQuartile), r.midpoint = r.midpoint.concat(i.playback.midpoint), r.midQuartile = r.midQuartile.concat(i.playback.midpoint), r.thirdQuartile = r.thirdQuartile.concat(i.playback.thirdQuartile), r.complete = r.complete.concat(i.playback.complete), r.mute = r.mute.concat(i.userActions.mute), r.unmute = r.unmute.concat(i.userActions.unmute), r.expand = r.expand.concat(i.userActions.playerExpand), r.dismiss = r.dismiss.concat(i.userActions.skip)) } return t.disableOutOfViewPause && (r.disableOutOfViewPause = t.disableOutOfViewPause), t.click_url && (r.clickUrl = t.click_url), t.click_url_prefix && (r.clickUrl ? r.clickUrl = t.click_url_prefix + r.clickUrl : r.clickUrlPrefix = t.click_url_prefix), t.ias_tag_params && (r.iasTagParams = t.ias_tag_params), r }, t.replacePlatformMacros = function (e, r, n) { var i = n, o = function (t, e) { void 0 === e && (e = !1), i.indexOf(t) < 0 && (e ? i = t + i : i += t) }; e.tracking.load.forEach((function (t) { o('<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="' + t + '" />') })), r && (r.getLoadTrackers().forEach((function (t) { t.indexOf("casalemedia.com/usermatch") > -1 ? o('<iframe style="display: none" src="' + t + '"></iframe>') : o('<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="' + t + '" />') })), r.getAdVerificationTrackers().forEach((function (t) { o('<script type="text/javascript" src="' + t + '"><\/script>', !0) }))); var a = t.getPlatformMacros(e, r), s = JSON.stringify(a).replace(/"/g, "&quot;").replace(/'/g, "\\'"); return i = (0, c.xP)(i, "{ADTAG_VALUES}", s) }, t }(), wi = function () { function t() { } return t.observeElement = function (t, e, r, n) { var i; void 0 === r && (r = !1); var o = "top", a = new IntersectionObserver((function (e) { e.some((function (e) { return i = o, o = e.intersectionRatio > .5 ? "top" : "bottom", r ? e.isIntersecting && (a.unobserve(t), n(e, o, i)) : n(e, o, i), !0 })) }), { threshold: e < .5 ? [e, 1 - e] : [e] }); return a.observe(t) }, t }(), _i = function () { function t() { } return t.interact = function (e, r, n, i, o) { var a, s = e.document.querySelector(".kargo-ad-v5.kargo-ad-" + o.data.localId + '[data-slot="' + o.data.adSlot + '"]'); if (a = r.percent >= 95 ? .95 : r.percent <= 5 ? .05 : r.percent / 100, s) if (n) { var c = !1; o.data.message === oi && wi.observeElement(s, a, !0, (function () { Mn(e, "message", t.interact), c || i({ message: ai, format: r.format }), c = !0 })) } else { var l = !1; o.data.message === oi && wi.observeElement(s, a, !1, (function (t, e, n) { !l && t.isIntersecting && (l = !0), t.boundingClientRect.y < 0 || l && (e === n || a >= .5) && i({ message: ai, format: r.format, adSlot: o.data.adSlot }) })) } }, t }(), Ai = __webpack_require__(5966), Ci = __webpack_require__(5964), xi = { hug_side: "bottom", branding: "kargo", wrapper_fill: !0, height_offset: 0, wrapper_override: !1, wrapper_id: null, wrapper_fn: null, horizontal_align: null, enable_entry_animation: !0, prevent_close: !1, vast_xml: null, vast_url: null, click_url_prefix: null, click_destination_url: null, tracking: { viewable: [], start: [], firstQuartile: [], midpoint: [], thirdQuartile: [], complete: [], error: [], mute: [], unmute: [], replay: [], expand: [], dismiss: [] }, interact_percent: 75, bto_interactive_type: null }, Ei = "tri-plex", Ii = __webpack_require__(9452), Oi = __webpack_require__(9028), Di = function (t) { var e = "(https:)?\\/\\/bs\\.serving-sys\\.com.*?"; return new RegExp('<script src=\\"' + e + '\\"><\\/scr\\+?ipt>[\\s]*?<noscript>[\\s]*?<a href=\\".*?' + e + '\\".*?>[\\s]*?<img src=\\"' + e + '\\".*?><\\/a>[\\s]*?<\\/noscript>').test(t.content) }, Si = function (t) { var e; return null == (e = t.content) ? void 0 : e.includes("servedbyivo.com") }; function Ri(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Ti(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Ri(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Ri(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var Vi = new E("Hover"), Li = function (t) { function e(e, r) { var n; return (n = t.call(this, e, r) || this).ampMode = null, n.useOverlapDetection = !0, n.templateHtml = Ai, n.templateCss = Ci, n.celtraInterval = null, n.platformMacros = null, n } Zt(e, t); var n = e.prototype; return n.validateConfig = function (e) { var r = (0, c.h1)({}, xi), n = (0, c.h1)({ settings: r }, e); if (n.type = "Hover", jr(n.slot, this.win) && (r.has_responsive_width = !1), r.vast_xml && (r.vast_xml = this.template.getHtml(r.vast_xml, xi.vast_xml)), r.tracking && Object.keys(r.tracking).forEach((function (t) { r.tracking[t] = or(r.tracking[t]) || [] })), "has_responsive_width" in r || (r.has_responsive_width = fr.includes(n.format)), void 0 !== e.enable_messaging && (r.enable_messaging = e.enable_messaging), -1 !== Cr.indexOf(n.format) && (r.horizontal_align || (r.horizontal_align = "right"), "standard-left" === r.execution && (r.horizontal_align = "left")), -1 !== vr.indexOf(n.format) && (r.wrapper_fill = !1), r.watch_to_unlock && (r.wrapper_fill = !1, r.branding = "none"), r.wrapper_override) { if (!n.positionElement) { if (r.wrapper_fn) try { if (n.positionElement = (0, c.zH)(this.win, r.wrapper_fn), n.positionLocation = "append", n.positionElement && this.win.jQuery && n.positionElement instanceof this.win.jQuery) { var i = n.positionElement; n.positionElement = i[0] } } catch (t) { n.positionElement = null, this.reportError("Javascript Error in  " + n.format + " Wrapper Function: " + t.name + " - " + t.message) } !n.positionElement && r.wrapper_id && (n.positionElement = this.win.document.getElementById(r.wrapper_id), n.positionLocation = "append") } } else n.positionElement = this.win.document.body, n.positionLocation = "append"; return t.prototype.validateConfig.call(this, n) }, n.detectContainerEnvironment = function () { var e = xt(It().mark((function e() { var r, n, i, o, a; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.prototype.detectContainerEnvironment.call(this); case 2: return r = e.sent, "GoogleAmp" === (n = this.container ? this.container.getType() : null) ? ("AMP-STICKY-AD" === (null == (o = this.config.sourceWindow) || null == (i = o.context) || null == (i = i.container) ? void 0 : i.toUpperCase()) ? (this.ampMode = "legacy", this.config.settings.wrapper_override = !0) : (this.ampMode = "sticky", o.document.body.style.backgroundColor = "transparent", this.config.settings.prevent_close = !0), a = o.document.querySelector("#c > script"), this.config.positionElement = a || this.config.sourceElement, this.config.positionLocation = "before") : null !== n && (this.config.settings.wrapper_override = !0, this.config.positionElement = this.config.sourceElement, this.config.positionLocation = "before"), e.abrupt("return", r); case 6: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), n.setHoverTemplateVars = function (t, e, r) { !function (t, e, r) { var n; e.settings.wrapper_override && (t.html = Ii, t.css = Oi), "Wrapper" === e.format ? t.setTemplateVar("HEIGHT_OFFSET", "0") : t.setTemplateVar("HEIGHT_OFFSET", (null == (n = e.settings.height_offset) ? void 0 : n.toString()) || ""), "top" === e.settings.hug_side && t.setTemplateVar("HUG_SIDE", "kargo-hover--top"), e.execution && e.execution === Ei && t.setTemplateVar("TRIPLEX", "kargo-triplex-execution"), "advertisement" === e.settings.branding ? t.setTemplateVar("BRANDING", "kargo-hover--branding-advertisement") : "none" === e.settings.branding && t.setTemplateVar("BRANDING", "kargo-hover--branding-none"), !0 === e.settings.wrapper_fill ? t.setTemplateVar("WRAPPER_FILL", "kargo-hover--wrapper-fill") : t.setTemplateVar("WRAPPER_FILL", "kargo-hover--wrapper-nofill"), "left" === e.settings.horizontal_align ? t.setTemplateVar("HORIZONTAL_ALIGN", "kargo-hover--align-left") : "right" === e.settings.horizontal_align && t.setTemplateVar("HORIZONTAL_ALIGN", "kargo-hover--align-right"), !0 === e.settings.has_responsive_width && t.setTemplateVar("WIDTH", "kargo-hover--responsive"), e.settings.breakout && t.setTemplateVar("IS_BREAKOUT", "kargo-hover--breakout"), e.settings.prevent_close && t.setTemplateVar("PREVENT_CLOSE", "kargo-hover--prevent-close"), "sticky" === r && "Sidekick" !== e.format && t.setTemplateVar("AMP_MODE", "kargo-hover--amp-sticky"), !0 === e.settings.is_one_sec_interstitial && t.setTemplateVar("FORMAT", "kargo-hover--one-sec-interstitial"), "peel-away" === e.execution && t.setTemplateVar("VERTICAL_ALIGN", "kargo-logo--top"), e.format === rr.DESKTOP_HOVER && ("desktop-hover-responsive" === e.execution ? t.setTemplateVar("DESKTOP_HOVER", "kargo-desktop-hover-responsive") : t.setTemplateVar("DESKTOP_HOVER", "kargo-desktop-hover")) }(t, e, r) }, n.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.setHoverTemplateVars(this.template, this.config, this.ampMode), t.prototype.display.call(this); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), n.getRenderConfig = function (t) { void 0 === t && (t = {}); var e = { width: 0, height: 0, expansionCheck: !0, customCss: "", maxDimension: {}, minDimension: { height: 0, width: 0 }, macros: this.platformMacros }, r = (0, c.h1)(e, t), n = this.config.format; if (n === rr.HOVER) { r.minDimension.width = 320, r.minDimension.height = 50, r.maxDimension.height = 77; var i = this.config.settings.tracking.interactive; i && (r.macros = r.macros ? Ti(Ti({}, r.macros), {}, { interactive: i }) : { interactive: i }) } return this.config.settings.watch_to_unlock && (r.height = 375, r.expansionCheck = !0), this.config.settings.has_responsive_width && (r.width = this.win.innerWidth, r.maxDimension.width = 440), this.config.execution === Ei && (r.width = 320, r.height = 150), Si(this.config) && n !== rr.SIDEKICK && (this.logger.debug("IVO hover detected. Applying vendor specific css."), ii(r)), r }, n.getVideoCreative = function () { var t = xt(It().mark((function t() { var e, r, n; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.video = new this.components.VideoAnchorComponent(this.win, this.logger, this.ias, this.destroy), (e = this.video).setSource(this.source), t.next = 5, e.setConfig(this.config); case 5: if (!(r = this.config.settings.vast_url || this.config.settings.vast_xml)) { t.next = 11; break } return t.next = 9, e.parseVast(r); case 9: t.next = 16; break; case 11: if (!this.config.content) { t.next = 15; break } e.html = this.config.content, t.next = 16; break; case 15: throw Vi.errNotSet("VAST or ViewStream snippet"); case 16: return t.prev = 16, t.next = 19, e.getVideoAnchorSnippet(); case 19: n = t.sent, this.config.content = n + (this.config.content || ""), this.platformMacros = bi.getPlatformMacros(e.config, e.vast), t.next = 30; break; case 24: if (t.prev = 24, t.t0 = t.catch(16), "VideoPlayer" === e.creativeType) { t.next = 29; break } return t.next = 29, e.transcodeVast(); case 29: throw t.t0; case 30: case "end": return t.stop() } }), t, this, [[16, 24]]) }))); return function () { return t.apply(this, arguments) } }(), n.initializeInteractiveAds = function () { var t = this.config.execution, e = r()(this.config.settings, "bto_interactive_type"), n = { animateOnce: !1, interactiveCallback: function (t) { !function (t) { if (null == t) throw new TypeError("Cannot destructure " + t) }(t) } }; if (null != t && t.includes(si) || e) if (t === si + "-" + li || e === li) n = this.createBtoPickupHover(), this.logger.debug("BTO-pickup hover detected."); else if (t === si + "-" + ci || e === ci) { var i = r()(this.config.settings, "tracking.interactive"); n = this.createBtoStaticHover(i), this.logger.debug("BTO-static hover detected.") } var o = { percent: this.config.settings.interact_percent, format: this.config.format }; Pn(this.win, "message", _i.interact.bind(this, this.win, o, n.animateOnce, n.interactiveCallback)) }, n.createBtoPickupHover = function () { var t = this; return { animateOnce: !0, interactiveCallback: function (e) { t.win.postMessage(e, "*"), t.eventHandler.isDestroyed || t.destroy() } } }, n.createBtoStaticHover = function (t) { var e = this; return { animateOnce: !1, interactiveCallback: function (r) { e.win.postMessage(r, "*"), t && D(e.win, t) } } }, n.onCreate = function () { var e = this; if (this.config.settings.watch_to_unlock) { for (var r = this.rootElement.querySelectorAll(".kargo-hover-close"), n = 0; n < r.length; n++)ut(r[n], "hide"); var i = function (t) { t.preventDefault() }; Pn(this.win.document.body, "touchmove", i), this.win.setTimeout((function () { e.destroy(), Mn(e.win.document.body, "touchmove", i) }), 7e3) } if (!this.config.settings.wrapper_override) for (var o = this.rootElement.querySelectorAll(".kargo-hover-close"), a = 0; a < o.length; a++)Pn(o[a], ["click", "touchstart"], (function (t) { t.preventDefault(); var r = new Event("kargo-hover-close"); if (e.win.dispatchEvent(r), e.config.settings.tracking.dismiss) for (var n = 0; n < e.config.settings.tracking.dismiss.length; n++)D(e.win, e.config.settings.tracking.dismiss[n]); e.onClose(), e.destroy() }), !0, !1); t.prototype.onCreate.call(this) }, n.onLoad = function () { var e = (0, c.xF)(this.win, "Kargo.CreativeRegister"); if (e) for (var r = e.getCreativesOfType("Hover"), n = 0; n < r.length; n++)r[n].getId() !== this.config.id && r[n].destroy(); !this.config.wrapper_override && e || this.show(), t.prototype.onLoad.call(this) }, n.onDisplay = function () { var e = this; if (null === (this.container ? this.container.getType() : null) && "bottom" === this.config.settings.hug_side && "ios" === Z(this.win) && "safari" === Y(this.win)) { var r = 0; this.checkHeightOffset = function () { var t, n, i, o, a = (t = e.win, n = t.document.documentElement || t.document.body, i = t.innerWidth || n.clientWidth || t.document.body.offsetWidth, o = t.innerHeight || n.clientHeight || t.document.body.offsetHeight, { x: i, y: o, screen: { w: t.screen.width, h: t.screen.height }, total_y: n.scrollHeight, orientation: i < o ? "portrait" : "landscape" }), s = 0; if ("landscape" === a.orientation && (s = a.screen.w - e.win.innerHeight), s !== r) { r = s; var c = e.rootElement.querySelector(".kargo-ad-hover"); c && (c.style.marginBottom = s + "px") } }, Pn(this.win, "resize", this.checkHeightOffset, !1, !0) } this.win.Kargo.externApi = this.win.Kargo.externApi || {}, this.win.Kargo.externApi.KAP_READY = function () { e.rootElement.querySelector(".kargo-ad-hover").classList.add("is-loaded") }, this.win.setTimeout((function () { e.win.Kargo.externApi.KAP_READY() }), 500), t.prototype.onDisplay.call(this) }, n.onSizeChange = function (e, r) { if (null !== this.overlapMonitor && this.overlapMonitor.checkOverlap(), r > 200 && "Wrapper" !== this.config.format && this.rootElement.querySelectorAll(".kargo-hover-close").forEach((function (t) { return ut(t, "expanded") })), this.config.format === rr.DESKTOP_HOVER || this.config.format === rr.HOVER) { var n, i = 200; if ("open" === (null == (n = this.config.source) || null == (n = n.auctionType) ? void 0 : n.toLowerCase()) && (i = "DesktopHover" === this.config.format ? 90 : 50), r > i) { var o = Vi.errNew(" " + this.config.format + " Height exceeded max of " + i + "px;\n          creative height: " + r + ";\n          viewport dimensions: " + this.win.innerWidth + " x " + this.win.innerHeight); Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: hn }, this.config, this.logger), this.reportError(o), this.destroy() } } t.prototype.onSizeChange.call(this, e, r) }, n.onVisible = function () { var e = this; (this.config.execution && this.config.execution.includes(si) || this.config.settings.bto_interactive_type) && this.initializeInteractiveAds(), this.config.settings.enable_messaging && window.addEventListener("message", (function (t) { var r = e.rootElement.querySelector(Tr).contentWindow; r && r.postMessage(t.data, "*") })); var r = this.container ? this.container.getType() : null, n = (0, c.xF)(this.win, "Kargo.CreativeRegister"), i = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"), o = !1; if (i && i()) { var a = i(); a.isHoverHidingDisabled && (o = a.isHoverHidingDisabled()) } var s = "branded_takeover" === this.config.placementType && ui(this.config, this.win); (this.config.settings.disable_hover_hiding || s) && (o = !0); var l = n.getCreativesOfType("Banner"); if (l.length) for (var u = 0; u < l.length; u++) { var h = -1 !== mr.indexOf(l[u].getFormat()), d = l[u].getConfig ? l[u].getConfig() : null, g = !!d && hi(d), p = !!d && fi(d, this.win); !(!o && null === r) || !l[u].isVisible() || h || g || p || this.hide() } t.prototype.onVisible.call(this) }, n.onViewable = function () { if (this.config.settings.tracking.viewable) for (var e = 0; e < this.config.settings.tracking.viewable.length; e++)D(this.win, this.config.settings.tracking.viewable[e]); t.prototype.onViewable.call(this) }, n.onDestroy = function () { var e = r()(this.config.settings, "tracking.interactive"); this.celtraInterval && clearInterval(this.celtraInterval), e && D(this.win, e), t.prototype.onDestroy.call(this) }, n.destroy = function () { this.checkHeightOffset && (Mn(this.win, "resize", this.checkHeightOffset), this.checkHeightOffset = null), t.prototype.destroy.call(this) }, e }(yi); const Pi = Li; var Mi; !function (t) { t.NATIVE = "https://storage.cloud.kargo.com/ad/network/tag/ad-native.js", t.NATIVE_STAGING = "https://storage.cloud.kargo.com/ad/network/tag/ad-native-stag.js" }(Mi || (Mi = {})); var Ni = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).setHoverTemplateVars = function (n, i, o) { t.prototype.setHoverTemplateVars.call(e, n, i, o); var a = e.template, s = e.config.settings.native; "aba-adhesion-display-2" === r()(s, "creativeOptimizer.template_id") && (a.setTemplateVar("WRAPPER_FILL", "kargo-hover--wrapper-nofill"), a.setTemplateVar("HORIZONTAL_ALIGN", "kargo-hover--align-right"), a.setTemplateVar("SIDEKICK_BRANDING", "kargo-sidekick-branding"), a.setTemplateVar("SIDEKICK_WIDTH", "140")) }, e } return Zt(e, t), e.prototype.display = function () { var e = xt(It().mark((function e() { var r, n, i; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (this.setHoverTemplateVars(this.template, this.config, this.ampMode), (r = this.config.settings.native).template_type = "Anchor", this.logger.debug("Native config: ", r), Object.keys(r || {}).length) { n = JSON.stringify(r); try { n = btoa(n) } catch (t) { if (t.message.includes("Latin1")) { n = (0, c.a)(n); try { n = btoa(n) } catch (t) { this.reportError("Native: Error encoding the creative. Fix attempted but failed"), Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: un }, this.config, this.logger) } } } i = "true" === h(d(this.win), "krg_qa") ? Mi.NATIVE_STAGING : Mi.NATIVE, this.config.content = (this.config.content || "") + '<script type="text/javascript" src="' + i + '"><\/script><script type="text/javascript">(function(){new window.Kargo.Native(JSON.parse(atob("' + n + '")));})();<\/script>' } return e.abrupt("return", t.prototype.display.call(this)); case 6: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), Fi = "Play mp4 with video player", Ui = "No MP4 available in VAST", Ki = __webpack_require__(4162), ji = __webpack_require__(820); function Hi(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Bi(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Hi(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Hi(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var qi = new E("Banner"), zi = { wrapper_id: null, wrapper_fn: null, branding: "kargo", enable_entry_animation: !0, native: {}, endcard_label: !1, vast_xml: null, vast_url: null, click_url_prefix: null, click_destination_url: null, tracking: { start: [], firstQuartile: [], midpoint: [], thirdQuartile: [], complete: [], error: [], mute: [], unmute: [], replay: [], expand: [], dismiss: [] } }, Wi = function (t) { function e(e, r) { var n; return (n = t.call(this, e, r) || this).templateHtml = Ki, n.templateCss = ji, n.platformMacros = null, n.interacted = !1, n.sidebarSlot = !1, n } Zt(e, t); var r = e.prototype; return r.validateConfig = function (e) { var r = (0, c.h1)({}, zi), n = (0, c.h1)({ settings: r }, e); if (n.type = "Banner", this.mobilized = !r.branding || "mobilized" === r.branding, !r.forceResponsive && $(this.win) && (r.has_responsive_width = !1), jr(n.slot, this.win) && (r.has_responsive_width = !1), "has_responsive_width" in r || (r.has_responsive_width = this.determineResponsive(n)), r.tracking && Object.keys(r.tracking).forEach((function (t) { r.tracking[t] = or(r.tracking[t]) || [] })), r.vast_xml && (r.vast_xml = this.template.getHtml(r.vast_xml, zi.vast_xml)), !n.positionElement && r.wrapper_fn) try { if (n.positionElement = (0, c.zH)(this.win, r.wrapper_fn), n.positionLocation = "append", n.positionElement && this.win.jQuery && n.positionElement instanceof this.win.jQuery) { var i = n.positionElement; n.positionElement = i[0] } } catch (t) { n.positionElement = null, this.reportError("Javascript Error in  " + n.format + " Wrapper Function: " + t.name + " - " + t.message) } return !n.positionElement && r.wrapper_id && (n.positionElement = this.win.document.getElementById(r.wrapper_id), n.positionLocation = "append"), n.positionElement || this.reportError(n.format + " position cannot be determined"), t.prototype.validateConfig.call(this, n) }, r.setFixedWidth = function () { this.template.setTemplateVar("WIDTH", ""), this.config.settings.has_responsive_width = !1, this.logger.log("A BYOC creative was found and the width responsive was set to false") }, r.detectContainerEnvironment = function () { var e = this; return xt(It().mark((function r() { var n; return It().wrap((function (r) { for (; ;)switch (r.prev = r.next) { case 0: return r.prev = 0, r.next = 3, t.prototype.detectContainerEnvironment.call(e); case 3: return n = r.sent, e.container && null !== e.container.getType() && "mobilized" === e.config.settings.branding && (e.config.settings.branding = "kargo", e.mobilized = !1), r.abrupt("return", n); case 8: return r.prev = 8, r.t0 = r.catch(0), r.abrupt("return", e.logger.error(r.t0)); case 11: case "end": return r.stop() } }), r, null, [[0, 8]]) })))() }, r.determineResponsive = function (t) { var e = !0; return qr.isRmResponsiveFormat(t.format) && t.content ? e = !t.content.includes('<img src="//dam.cdn.kargo.com') : qr.isUnresponsiveFormat(t.format) && (e = !1), e }, r.display = function () { var e = xt(It().mark((function e() { var r, n, i, o, a, s, c = this; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: n = this.template, i = hi(this.config), o = null == (r = this.config.source.creativeFlags) || null == (r = r.flourish) ? void 0 : r.css_template, "open" === this.config.source.auctionType && o && (this.logger.debug("Adding Flourish for open middle banner."), a = o.split("/").pop().replace(".css", ""), s = o.includes("banner") ? "FLOURISH_BANNER" : "FLOURISH_CONTENT", n.setTemplateVar(s, a), Wt.reportAdMetric({ type: "flourish", value: o, version: "8.22.0" }, this.config, this.logger)), o && o.includes("lightbox-glow") && requestAnimationFrame((function () { var t = c.rootElement.querySelector(".lightbox-glow-content"); if (t) for (var e = 0; e < 4; e++) { var r = document.createElement("span"); t.appendChild(r) } })), !0 !== this.config.settings.has_responsive_width || i || n.setTemplateVar("WIDTH", "kargo-banner-width"), i && n.setTemplateVar("WIDTH", "kargo-interscroller"), "advertisement" === this.config.settings.branding ? n.setTemplateVar("BRANDING", "kargo-banner--branding-advertisement") : "mobilized" === this.config.settings.branding ? n.setTemplateVar("BRANDING", "kargo-banner--branding-created") : "none" === this.config.settings.branding && n.setTemplateVar("BRANDING", "kargo-banner--branding-none"), t.prototype.display.call(this); case 9: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), r.getRenderConfig = function (t) { void 0 === t && (t = {}); var e = (0, c.h1)({ width: 320, height: 50, expansionCheck: !1, customCss: "", maxDimension: {}, minDimension: { width: 320, height: 50 }, macros: this.platformMacros }, t); return this.config.settings.has_responsive_width || (e.maxDimension.width = this.rootElement.clientWidth), qr.isDesktopFormat(this.config.format) || this.config.format === rr.FABRIK_OUTSTREAM || (e.maxDimension.width = Math.min(e.maxDimension.width, 440), this.config.settings.has_responsive_width && (e.width = "100%")), this.sidebarSlot && (e = (0, c.h1)(this.getSidebarSlotWidthConfig(e))), Si(this.config) && (this.logger.debug("IVO banner detected. Applying vendor specific css."), ii(e)), e }, r.getSidebarSlotWidthConfig = function (t) { var e = !!this.config.content && this.config.content.includes("celtra-ad-v3"), r = this.config.content.includes("dcmads"); return t.maxDimension && (t.maxDimension.width = 300), t.minDimension && (Di(this.config) || r || e || Si(this.config)) && (t.minDimension = Bi(Bi({}, t.minDimension), {}, { width: 300 })), t }, r.onCreate = function () { var e = this, r = this.rootElement.querySelector(".kargo-ad-content"); if (this.sidebarSlot = Dr.checkIfSidebarSlot(this.config.slot, this.win), !qr.isVideoBannerFormat(this.config.format)) { var n = ui(this.config, this.win) ? 300 : 440; if ("desktop-lighthouse" === this.config.execution && (n = zn), "flex" === this.config.execution || "core" === this.config.execution) return void t.prototype.onCreate.call(this); if (qr.isDesktopFormat(this.config.format)) r.style.maxWidth = this.getRenderConfig().width + "px"; else this.config.content.includes("dcmads") || Di(this.config) ? r.style.maxWidth = "max-content" : r.style.maxWidth = Math.min(this.win.screen.availWidth, n) + "px"; this.sidebarSlot && (r.style.maxWidth = this.getRenderConfig().maxDimension.width + "px", r.style.minWidth = this.getRenderConfig().minDimension.width + "px") } if (hi(this.config)) { var i = (200 - this.win.innerHeight).toString(); this.lighthouseObserver = new IntersectionObserver((function (t) { t[0].isIntersecting ? e.hideOrShowHovers("hide") : e.hideOrShowHovers("show") }), { rootMargin: i + "px 0px 0px 0px" }), this.lighthouseObserver.observe(this.rootElement) } t.prototype.onCreate.call(this) }, r.onLoad = function () { this.show(), t.prototype.onLoad.call(this) }, r.onDisplay = function () { var e = this.rootElement.querySelectorAll(".kargo-banner-optout"); Array.from(e).forEach((function (t) { ft(t, "hide"), ut(t, "show") })), t.prototype.onDisplay.call(this) }, r.onSizeChange = function (e, r) { if (!qr.isTallFormat(this.config.format) && r > 300) { var n = qi.errNew("Creative Height exceeded max of 300px;\n          element height: " + r + ";\n          viewport dim: " + this.win.innerWidth + " x " + this.win.innerHeight); Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: hn }, this.config, this.logger), this.reportError(n), this.destroy() } var i = this.rootElement.querySelector(".kargo-ad-banner"), o = this.rootElement.querySelector(".kargo-banner-optout"), a = "MiddleBanner" === this.config.format && 250 === r && (Q(this.win) || X(this.win)), s = -1 !== ur.indexOf(this.config.format); this.mobilized && (a || s) && (ut(i, "kargo-banner--branding-created"), ut(o, "kargo-branding-created")), t.prototype.onSizeChange.call(this, e, r) }, r.onVisible = function () { t.prototype.onVisible.call(this); var e = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"), r = !1; if (e && e()) { var n = e(); n.isHoverHidingDisabled && (r = n.isHoverHidingDisabled()) } if (fi(this.config, this.win)) { var i; r = !0; var o = this.container ? this.container.getType() : null, a = (0, c.xF)(this.win, "Kargo.CreativeRegister"), s = []; a && null === o && (s = a.getCreativesOfType("Hover")); var l = !1; !this.interacted && (0 === s.length || null != (i = s[0]) && i.isVisible()) && (l = !0), l && (this.win.postMessage({ message: oi, adSlot: this.config.slot, localId: this.config.localId }, "*"), this.interacted = !0) } r || this.hideOrShowHovers("hide") }, r.onNotVisible = function () { t.prototype.onNotVisible.call(this), this.hideOrShowHovers("show") }, r.onViewable = function () { t.prototype.onViewable.call(this) }, r.onDestroy = function () { var e; null == (e = this.lighthouseObserver) || e.unobserve(this.rootElement), t.prototype.onDestroy.call(this), this.hideOrShowHovers("show") }, r.hideOrShowHovers = function (t) { var e = this, r = this.container ? this.container.getType() : null, n = (0, c.xF)(this.win, "Kargo.CreativeRegister"); if (n && null === r) { var i = n.getCreativesOfType("Hover"), o = n.getCreativesOfType("Banner"), a = (0, c.xF)(this.win, "Kargo.getAdsOfType"); if (a) for (var s = a("Hover"), l = 0; l < s.length; l += 1)i.indexOf(s[l].ad_unit) < 0 && i.push(s[l].ad_unit); var u = o.some((function (t) { var r = qr.isDesktopFormat(t.getFormat()) || Dr.checkIfSidebarSlot(t.getConfig().slot, e.win); return t.isVisible() && !r })); if (!u && "show" === t || u && "hide" === t || hi(this.config)) for (var h = 0; h < i.length; h += 1)("hide" === t && !i[h].getConfig().settings.disable_hover_hiding || "show" === t || hi(this.config)) && i[h][t]() } }, e }(yi); const Gi = Wi; var Yi = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var n = e.prototype; return n.display = function () { var e = xt(It().mark((function e() { var n, i, o, a, s, l, u, g; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return this.logger.debug("Loading Native ads in its own space"), n = this.template, i = this.config.settings.native, e.next = 5, this.getKeyArtCreative(); case 5: o = e.sent, n.setTemplateVar("ABOVE", "above"), i.auctionType = r()(this.config, "source.auctionType"), i.video = o, o ? i.video = o : this.config.format = rr.ABA_DISPLAY, i.platform_version = this.config.platform_version, a = this.config.format, s = (i.video || {}).tracking, l = this.config.settings.tracking, s && Object.keys(s).forEach((function (t) { var e = l[t] || []; e.length && (s[t] = [].concat(s[t], e)) })), i.template_type = a === rr.NATIVE || a === rr.ABA_DISPLAY ? "Banner" : "VideoKeyArt", this.logger.debug("Native config: ", i), u = JSON.stringify(i); try { u = btoa(u) } catch (t) { if (t.message.includes("Latin1")) { u = (0, c.a)(u); try { u = btoa(u) } catch (t) { this.reportError("Native: Error encoding the creative. Fix attempted but failed"), Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: un }, this.config, this.logger) } } } return g = "true" === h(d(this.win), "krg_qa") ? Mi.NATIVE_STAGING : Mi.NATIVE, this.config.content = (this.config.content || "") + '<script type="text/javascript" src="' + g + '"><\/script><script type="text/javascript">(function(){new window.Kargo.Native(JSON.parse(atob("' + u + '")));})();<\/script>', e.abrupt("return", t.prototype.display.call(this)); case 22: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), n.getKeyArtCreative = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (this.video = new this.components.NativeVideoComponent(this.win, this.logger, this.ias, this.destroy), e = this.video, this.config.settings.native && this.config.settings.native.vast) { t.next = 4; break } return t.abrupt("return"); case 4: return t.prev = 4, e.setSource(this.source), t.next = 8, e.setConfig(this.config); case 8: return t.next = 10, e.parseVast(this.config.settings.native.vast); case 10: return t.next = 12, e.getNativeVideoSnippet(); case 12: return t.abrupt("return", t.sent); case 15: return t.prev = 15, t.t0 = t.catch(4), t.next = 19, e.transcodeVast(); case 19: if (t.t0.message.match(Fi)) { t.next = 21; break } throw t.t0; case 21: case "end": return t.stop() } }), t, this, [[4, 15]]) }))); return function () { return t.apply(this, arguments) } }(), n.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 300, height: 250, expansionCheck: !0 }) }, e }(Gi), Zi = Yi, Ji = Yi, Qi = __webpack_require__(7108); function Xi(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function $i(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Xi(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Xi(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var to = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.validateConfig = function (e) { var r, n = e || {}; return n.settings = n.settings || {}, "open" === (null == (r = n.source) ? void 0 : r.auctionType) ? n.settings.branding = "advertisement" : n.settings.branding = "mobilized", n.settings.has_responsive_width = !0, t.prototype.validateConfig.call(this, n) }, r.getVastExtensions = function (t, e) { for (var r = new RegExp('<Extension\\s+[^>]*?type="' + t + '"[^>]*?>\\s*?<!\\[CDATA\\[(.*?)\\]\\]>\\s*?<\\/Extension>', "g"), n = e.matchAll(r), i = [], o = n.next(); o && !o.done;) { var a = o.value; a && a[1] && i.push(a[1]), o = n.next() } return i }, r.getFabrikExtension = function (t) { var e = this.getVastExtensions("kargo-outstream", t); return e && 0 !== e.length ? JSON.parse(e[0]) : {} }, r.getLoadExtensionURLs = function (t) { return this.getVastExtensions("load", t) }, r.getRenderConfig = function (e) { var r; void 0 === e && (e = {}); var n = (0, c.h1)({ width: 300, height: 200, minDimension: { width: 300, height: 200 }, expansionCheck: !0 }, e); return null != (r = n = t.prototype.getRenderConfig.call(this, n)) && null != (r = r.maxDimension) && r.width && delete n.maxDimension.width, n }, r.display = function () { var e = xt(It().mark((function e() { var r, n, i, o, a, s, c, l, u, h = this; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ((r = this.template).css += Qi, r.setTemplateVar("ABOVE", "above"), n = this.config.settings.vast_xml) { e.next = 7; break } return this.destroyWithError(new Error("empty vast xml")), e.abrupt("return"); case 7: if ((i = this.getFabrikExtension(n)).template || i.templateURL) { e.next = 11; break } return this.destroyWithError(new Error("failed to fetch fabrik template name or url from vast xml")), e.abrupt("return"); case 11: return i.templateVars = i.templateVars || {}, this.logger.debug("Writing Fabrik template: " + (i.templateURL || i.template)), o = new this.components.FabrikTemplate(i.template, i.templateURL), a = $i({}, i.templateVars), null != i && i.execution && (a.EXECUTION = i.execution), null != i && i.companionsParameters && (s = i.companionsParameters, c = s.captions, l = s.eventsHandler, a.CAPTIONS_METADATA = c, l && (a.EVENTS_HANDLER_DATA = l)), Object.keys(a).forEach((function (t) { o.setMacroValue(t, a ? a[t] : "") })), o.setVastXML(this.config.settings.vast_xml), e.prev = 19, e.next = 22, o.getHTML(); case 22: u = e.sent, this.config.content += u, e.next = 30; break; case 26: return e.prev = 26, e.t0 = e.catch(19), this.destroyWithError(new Error('failed to fetch "' + i.template + '" template: ' + e.t0)), e.abrupt("return"); case 30: return "advertisement" === i.branding && (this.config.settings.branding = "advertisement", this.mobilized = !1), this.getLoadExtensionURLs(this.config.settings.vast_xml).forEach((function (t) { h.config.content += '<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="' + t + '" />' })), e.next = 34, t.prototype.display.call(this); case 34: case "end": return e.stop() } }), e, this, [[19, 26]]) }))); return function () { return e.apply(this, arguments) } }(), r.destroyWithError = function (t) { this.logger.error(t), this.reportError(t), this.destroy() }, e }(Gi), eo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e }(to), ro = function (t) { function e(e, r) { var n; return (n = t.call(this, e, r) || this).closeBtn = null, n } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { var e = { width: 0 }; return Di(this.config) && (e.height = 150, e.width = 320), this.config.execution === Ei && (e.width = 320, e.height = 150), t.prototype.getRenderConfig.call(this, e) }, r.onCreate = function () { var e = this; this.closeBtn = this.win.document.querySelector(".kargo-hover-close.unfilled"), (this.config.settings.isGwdAnchor || Di(this.config) || this.config.execution === Ei) && this.win.addEventListener("message", (function (t) { var r = t.data; "function" == typeof e[r] && (e[r](), e.logger.debug("Anchor post-message event: " + t.data)) })), t.prototype.onCreate.call(this) }, r.hideCloseBtn = function () { this.closeBtn && (this.closeBtn.style.display = "none") }, r.showCloseBtn = function () { this.closeBtn && (this.closeBtn.style.display = "block") }, r.gwdAnchorCollapse = function () { Ur(this.rootElement).height = "50" }, e }(Pi), no = new E("Video"), io = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).isVpaid = !1, e.vastDimensions = null, e.vpaidDimensions = null, e } Zt(e, t); var r = e.prototype; return r.display = function () { var e = xt(It().mark((function e() { var r, n, i; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return r = this.template, e.prev = 1, e.next = 4, this.getVideoCreative(); case 4: if (n = this.video, this.isVpaid = "VideoPlayer" === n.creativeType, "OutstreamVideo" === this.config.format && (r.setTemplateVar("VAST", "vast"), r.setTemplateVar("FADE", "unfaded"), this.config.settings.enable_entry_animation && r.setTemplateVar("BOLT", "kargo")), this.isVpaid && r.setTemplateVar("SHOW", "fade"), !0 === this.config.settings.has_responsive_width && r.setTemplateVar("WIDTH", "kargo-banner-width"), i = "Video Creative - ", this.logger.debug("" + i + n.creativeType), this.logger.debug(i + "Snippet Config", n.config), this.logger.debug(i + "Vast Config", n.vast ? n.vast.parsedVastResult : null), t.prototype.display.call(this), !this.isVpaid) { e.next = 19; break } return e.next = 17, n.loadVideoPlayer(); case 17: e.sent ? this.setLoaderSize(n.getDimensions()) : this.handleVideoDestroy(Ui); case 19: e.next = 24; break; case 21: e.prev = 21, e.t0 = e.catch(1), this.handleVideoDestroy(e.t0); case 24: case "end": return e.stop() } }), e, this, [[1, 21]]) }))); return function () { return e.apply(this, arguments) } }(), r.getVerticalRenderConfig = function (t) { var e = (0, c.h1)({}, t), r = null; this.vastDimensions && this.vastDimensions.width && this.vastDimensions.height && (r = this.vastDimensions.width / this.vastDimensions.height); var n = this.hasVerticalTemplate(this.config.content); if (r) { if (r < 1) { var i = 457 * this.vastDimensions.width / this.vastDimensions.height; e.width = i, e.customCss = " width: " + i + "px; height: 457px" } } else n && (e.customCss += " width: 259px; height: 460px", e.width = 258, e.maxDimension.width = 258); return e }, r.hasVerticalTemplate = function (t) { if (t.includes("kit-version=")) { var e = (this.config.content.match(/data-ad-execution="(.*?)"/) || [])[1]; if (e && "Viewstream Vertical" === e) return !0 } return ["vertical: 'true'", "vertical: true"].some((function (e) { return t.includes(e) })) }, r.getRenderConfig = function () { var e = this.config.format, r = { customCss: "text-align: center,", width: 300, height: 200, maxDimension: { height: this.sidebarSlot ? 600 : 460 }, minDimension: null, expansionCheck: !0, hide: this.isVpaid }, n = t.prototype.getRenderConfig.call(this, r); this.config.settings.forceResponsive && (n.fullHeight = !0); var i = this.hasVerticalTemplate(this.config.content); if (qr.isVideoBannerFormat(e) && $(this.win) && !i && !this.config.settings.forceResponsive && (n.maxDimension.width = 300), this.sidebarSlot = !!this.config.slot && Dr.checkIfSidebarSlot(this.config.slot, this.win), qr.isVideoBannerFormat(e) && !1 === this.sidebarSlot) { var o = this.getVerticalRenderConfig(n); o && (n = (0, c.h1)(n, o)) } return n }, r.setLoaderSize = function (t) { var e = this.rootElement.querySelector(".kargo-loader"), r = t.width / t.height; if (e.style.width = "300px", 1 === r) e.style.height = "300px"; else if (r < 1) { var n = this.getRenderConfig().width; e.style.width = n + "px", e.style.height = 8 * n / 5 + "px" } else e.style.height = 300 / r + "px" }, r.onCreate = function () { var e = this.rootElement.querySelector(".kargo-ad-content"), r = !1; this.vastDimensions && this.vastDimensions.height && this.vastDimensions.width && this.vastDimensions.height > this.vastDimensions.width && (r = !0, ut(e, "center-vertical")); var n = r || "NonVastOutstreamVideo" === this.config.format, i = n ? this.getRenderConfig().width : 300; (this.isVpaid || n || ui(this.config, this.win)) && (e.style.minWidth = i + "px", e.style.width = i + "px", e.style.maxWidth = i + "px"), t.prototype.onCreate.call(this) }, r.onSizeChange = function (e, r) { this.shouldHideLoader() && this.hideLoader(), t.prototype.onSizeChange.call(this, e, r) }, r.onVisible = function () { if ("OutstreamVideo" === this.config.format) { var e = this.rootElement.querySelector(".kargo-overlay"), r = this.rootElement.querySelector(".kargo-ad-content"); ft(this.rootElement.querySelector(".kargo-banner-optout"), "hide"), ut(r, "fade"), ut(e, "fade") } t.prototype.onVisible.call(this) }, r.shouldHideLoader = function () { return -1 !== ["NonVastOutstreamVideo", "OutstreamVideo"].indexOf(this.config.format) }, r.hideLoader = function () { ut(this.rootElement.querySelector(".kargo-loader"), "hide") }, r.getVideoCreative = function () { var t = xt(It().mark((function t() { var e, r, n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.video = new this.components.ViewstreamComponent(this.win, this.logger, this.ias, this.destroy), e = this.video, r = !0, t.prev = 3, e.setSource(this.source), t.next = 7, e.setConfig(this.config); case 7: if (!(n = this.config.settings.vast_url || this.config.settings.vast_xml)) { t.next = 13; break } return t.next = 11, e.parseVast(n); case 11: t.next = 19; break; case 13: if (!this.config.content) { t.next = 18; break } e.html = this.config.content, r = !1, t.next = 19; break; case 18: throw no.errNotSet("VAST or ViewStream snippet"); case 19: return t.next = 21, e.getViewStreamSnippet(); case 21: i = t.sent, r && (this.config.content = i + (this.config.content || "")), this.platformMacros = bi.getPlatformMacros(e.config, e.vast), e.vast && (o = e.vast.getMediaFiles()[0], a = o.width && o.height ? o.width / o.height : null, this.vastDimensions = { width: (o || {}).width, height: (o || {}).height }, null === a || a >= 1 ? (this.logger.debug("Get a horizontal video, set width to 100%. Video ratio: " + a), this.config.settings.has_responsive_width = !0) : (this.logger.debug("Get a vertical video, set width to 300px. Video ratio: " + a), this.config.settings.has_responsive_width = !1)), t.next = 38; break; case 27: return t.prev = 27, t.t0 = t.catch(3), t.next = 31, e.transcodeVast(); case 31: if (!t.t0.message.match(Fi)) { t.next = 37; break } this.logger.debug("Attempting to play MP4 from VAST"), this.config.settings.has_responsive_width = !0, e.creativeType = "VideoPlayer", t.next = 38; break; case 37: throw t.t0; case 38: case "end": return t.stop() } }), t, this, [[3, 27]]) }))); return function () { return t.apply(this, arguments) } }(), r.handleVideoDestroy = function (t) { this.logger.error(t), this.video && this.video.fireErrorTrackers(400), this.reportError(t), this.destroy() }, e }(Gi), oo = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.display = function () { var e = xt(It().mark((function e() { var r, n, i = this; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: (r = this.template).setTemplateVar("WIDTH", "desktop"), n = sr.filter((function (t) { return t.name === i.config.format }))[0], r.setTemplateVar("DESKTOP_WIDTH", n.size.w.toString()), t.prototype.display.call(this); case 5: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), r.getRenderConfig = function (e) { void 0 === e && (e = {}); var r = t.prototype.getRenderConfig.call(this, e); return r.minDimension.width = r.width, r.minDimension.height = r.height, r.maxDimension.width = r.width, r.maxDimension.height = r.height, r }, e }(Gi), ao = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 970, height: 250 }) }, e }(oo), so = Gi, co = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { var e = { width: 0 }; return Di(this.config) && (e.expansionCheck = !1, e.customCss = "width: 100%;", e.height = 150, e.minDimension = null), t.prototype.getRenderConfig.call(this, e) }, r.display = function () { var e = xt(It().mark((function e() { var r, n; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: r = this.template, n = "kargo-sidekick-branding kargo-breakaway-branding", "standard-left" === this.config.execution && (n += " breakaway-left-align", r.setTemplateVar("LEFT_ALIGN", "left-align")), r.setTemplateVar("SIDEKICK_BRANDING", n), t.prototype.display.call(this); case 5: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), lo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.template.setTemplateVar("FORMAT", "kargo-hover--breakout"), t.prototype.display.call(this); case 3: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), uo = __webpack_require__(4490), ho = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 970, height: 200, has_responsive_width: !0 }) }, r.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.template && (this.template.html = uo), this.template.setTemplateVar("FORMAT", "kargo-hover--desktop-breakout"), this.config.settings.wrapper_fill = !1, t.prototype.display.call(this); case 5: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), go = __webpack_require__(2164), po = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 728, height: 90 }) }, r.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.template && (this.template.html = go), t.prototype.display.call(this); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), fo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.template.setTemplateVar("RUNWAY", "kargo-desktop-runway-close"), t.prototype.display.call(this); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(ho), vo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 300, height: 600, expansionCheck: !0 }) }, e }(oo), mo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { var e = t.prototype.getRenderConfig.call(this); return e.height = "max" === this.config.execution ? 50 : 250, e.maxDimension.height = 460, e.expansionCheck = !0, e }, e }(Gi), ko = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.onCreate = function () { var e = this.config.execution, r = this.rootElement.querySelector(".kargo-ad-content"); e && Xn.includes(e) && ui(this.config, this.win) && this.handleFlexWidth(r), t.prototype.onCreate.call(this) }, r.handleFlexWidth = function (t) { var e = this.rootElement.parentNode.offsetWidth, r = this.config, n = r.execution, i = r.format; t.style.minWidth = Wn + "px", t.style.width = e + "px", t.style.maxWidth = Gn + "px"; var o = Math.min(Math.max(e, Wn), Gn); this.logger.debug(i + " " + n + ": setting width to " + o + "px") }, r.getRenderConfig = function () { var e = t.prototype.getRenderConfig.call(this, { height: 350, minDimension: { height: 350 }, expansionCheck: !0 }); return this.config.execution === Zn && (e.minDimension.width = Wn, e.maxDimension.width = Gn), e }, e }(Gi), yo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { var e = t.prototype.getRenderConfig.call(this, { width: 970, height: 90, expansionCheck: !0 }); return delete e.maxDimension.height, e }, e }(oo), bo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 728, height: 90, expansionCheck: !0 }) }, e }(oo), wo = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 320, height: 460, expansionCheck: !0 }) }, r.onCreate = function () { var e, r = this.rootElement.querySelector(".kargo-ad-content"), n = this.rootElement.parentNode.offsetWidth; if (r && (di(r), null != (e = this.config.execution) && e.includes("desktop") && ui(this.config, this.win))) { gi(r, n); var i = pi(n); this.logger.debug("Desktop Lighthouse: setting width to " + i + "px") } t.prototype.onCreate.call(this) }, e }(Gi), _o = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 300, minDimension: { width: 300, height: 250 }, expansionCheck: !0 }) }, e }(Gi), Ao = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.logger.debug("NonVastOutstreamVideo loaded in its own space"), t.prototype.display.call(this); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), r.onSizeChange = function (e, r) { var n = this.rootElement.querySelector(".kargo-ad-content"), i = this.rootElement.querySelector(".kargo-creative"); i && (n.style.maxWidth = i.clientWidth + "px"), t.prototype.onSizeChange.call(this, e, r) }, e }(io), Co = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.logger.debug("OutstreamVideo loaded in its own space"), t.prototype.display.call(this); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), r.validateConfig = function (e) { var r = e || {}; return r.settings = r.settings || {}, "open" === (r.source || {}).auctionType && "OutstreamVideo" === r.format && (r.settings.branding = "advertisement"), t.prototype.validateConfig.call(this, r) }, r.onDisplay = function () { if (!this.isVpaid) { var e = this.rootElement.querySelector(".kargo-loader"), r = $(this.win) ? 300 : Math.min(this.rootElement.clientWidth, 440); e.style.width = r + "px"; var n = 9 * r / 16; e.style.height = n + "px" } t.prototype.onDisplay.call(this) }, r.onLoad = function () { var e = this; if (this.container && null !== this.container.getType()) { var r = cr[this.config.format].size; this.vastDimensions && this.vastDimensions.width && this.vastDimensions.height && (r.h = this.vastDimensions.height * r.w / this.vastDimensions.width); var n = this.container.getType(); this.logger.debug("Setting Container Size: " + r.w + "x" + r.h), this.container.setContainerSize(r.w, r.h).catch((function (t) { var r = "Failed to set " + n + " Container Size"; t && (r += ": " + t), e.logger.debug(r) })) } t.prototype.onLoad.call(this) }, e }(io), xo = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { var e = { width: 0 }; return Di(this.config) && (e.expansionCheck = !1, e.customCss = "width: 100%;", e.height = 150, e.minDimension = null), t.prototype.getRenderConfig.call(this, e) }, r.display = function () { var e = xt(It().mark((function e() { var r; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: (r = this.template).setTemplateVar("SIDEKICK_BRANDING", "kargo-sidekick-branding kargo-breakaway-branding"), r.setTemplateVar("RUNWAY", "runway-close-position"), t.prototype.display.call(this); case 4: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi); function Eo(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Io(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Eo(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Eo(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var Oo = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { var e = ui(this.config, this.win) ? this.getSidekickSize(this.win.innerHeight) : 140, r = { width: e, height: e, minDimension: { width: e, height: e } }, n = this.config.settings.tracking.interactive; return n && (r.macros = r.macros ? Io(Io({}, r.macros), {}, { interactive: n }) : { interactive: n }), (Di(this.config) || Si(this.config)) && ii(r, this.config), t.prototype.getRenderConfig.call(this, r) }, r.getSidekickSize = function (t) { var e = Math.ceil(.25 * t); return e = Math.min(Math.max(e, 200), 320) }, r.display = function () { var e = xt(It().mark((function e() { var r, n; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: r = this.template, n = ui(this.config, this.win) ? this.getSidekickSize(this.win.innerHeight) : 140, n = a(this.win) ? 100 : n, r.setTemplateVar("SIDEKICK_BRANDING", "kargo-sidekick-branding"), r.setTemplateVar("SIDEKICK_WIDTH", "" + n), r.setTemplateVar("SIDEKICK_HEIGHT", "" + n), t.prototype.display.call(this); case 7: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), Do = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.validateConfig = function (e) { var r = t.prototype.validateConfig.call(this, e); return $(this.win) && (r.settings.has_responsive_width = !0), r }, r.getRenderConfig = function () { var e = t.prototype.getRenderConfig.call(this); return e.width = 320, e.height = 180, $(this.win) && (e.width = 500, e.height = 281), e }, r.destroy = function () { if (this.socialCanvasCreatives) { var t = this.socialCanvasCreatives; if (t.companion && t.companion.renderDiv) { var e = t.companion.renderDiv, r = this.win.document.querySelector("#" + e), n = null == r ? void 0 : r.querySelector(".kargo-companion-creative"); n && (this.logger.debug("Destroying Companion"), vt(n)) } } }, e }(Gi), So = __webpack_require__(9246), Ro = __webpack_require__(9783), To = "new-template", Vo = "new-template-after-click", Lo = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.onLoad = function () { var e = this.rootElement.querySelector(Tr).contentWindow, r = (0, c.xF)(e, "Kargo.PlatformMacros"); r && (r.destroySwipeUp = this.closeSwipeUp.bind(this), r.swipeUp = this.expandSwipe.bind(this), r.clickUp = this.expandClick.bind(this)), t.prototype.onLoad.call(this) }, r.expandClick = function () { var t = this.rootElement.querySelector("." + To); t && ut(t, Vo); this.onClick({}, { format: this.config.format, event: "click" }) }, r.expandSwipe = function () { var t = this.rootElement.querySelector("." + To); t && ut(t, Vo); this.onClick({}, { format: this.config.format, event: "swipe" }) }, r.closeSwipeUp = function () { var t = new Event("kargo-hover-close"); if (this.win.dispatchEvent(t), this.config.settings.tracking.dismiss) for (var e = 0; e < this.config.settings.tracking.dismiss.length; e++)D(this.win, this.config.settings.tracking.dismiss[e]); this.onClose(), this.destroy() }, r.display = function () { var e = xt(It().mark((function e() { var r; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: this.template && (this.template.html = So, this.template.css = Ro), t.prototype.display.call(this), r = this.rootElement.querySelector(".kargo-ad-content"), "v3" === this.config.execution && ut(r, To); case 4: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), Po = Gi, Mo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function (e) { void 0 === e && (e = {}); var r = (0, c.h1)({ width: 970, height: 250, minDimension: { width: 970, height: 250 } }, e); return t.prototype.getRenderConfig.call(this, r) }, e }(to), No = __webpack_require__(1712), Fo = __webpack_require__(4590), Uo = "https://storage.cloud.kargo.com/ad/campaign/rm/SurabhiM/adtag/uptick/placeholder.jpg", Ko = "uptick-ad-content", jo = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).shouldAnimate = !0, e.destroyAd = !1, e.placeholderImage = Uo, e.uptickCookie = "krg-uptickDisplayed=true", e.trackerTimeoutId = null, e } Zt(e, t); var n = e.prototype; return n.onCreate = function () { var e = this; this.kargoAdContent = this.rootElement.querySelector(".kargo-ad-content"); var r = this.kargoAdContent.querySelector(".kargo-uptick-close-" + this.config.localId); r && (r.addEventListener("click", this.handleClose.bind(this)), r.addEventListener("touchstart", this.handleClose.bind(this))), (this.isDemoModeActive() || !ui(this.config, this.win) && !this.checkForUptickCookie()) && wi.observeElement(this.rootElement, 0, !1, (function (t) { t.boundingClientRect.bottom <= 0 && e.shouldAnimate && !e.destroyAd && e.handleUpTick() })), t.prototype.onCreate.call(this) }, n.setPlaceholderImage = function () { var t = this.rootElement.querySelector("iframe"); if (!t || !t.contentDocument) return this.logger.warn("Iframe not found or inaccessible in rootElement."), void (this.placeholderImage = Uo); var e = t.contentDocument.querySelector(".i-c-0-placeholder div"), r = (e ? window.getComputedStyle(e).backgroundImage : Uo).match(/^url\(["']?(.*?)["']?\)$/); this.placeholderImage = (null == r ? void 0 : r[1]) || Uo }, n.handleUpTick = function () { this.setPlaceholderImage(), this.win.postMessage({ message: "uptick", adSlot: this.config.slot, localId: this.config.localId }, "*"), this.win.addEventListener("message", this.sendUptickMessage.bind(this)) }, n.sendUptickMessage = function (t) { if ("string" == typeof t.data) { var e = t.data.split("|")[0], r = t.data.match(/timeout=(\d+)/), n = r ? parseInt(r[1], 10) : 5e3; "uptickReceived" === e && (this.activateUpTick(n), this.win.removeEventListener("message", this.sendUptickMessage)) } }, n.activateUpTick = function (t) { var e, r = this, n = this.rootElement.querySelector(".kargo-branding-kargo"); n && (ft(n, "show"), ut(n, "hide")), this.addPlaceholderVenti(), this.setFixedPosition(), this.showCloseButton(), this.setUptickCookie(), null != (e = this.config.settings) && e.top_padding && (ft(this.kargoAdContent, "no-padding"), this.kargoAdContent.style.paddingTop = this.config.settings.top_padding + "px"), this.trackerTimeoutId = setTimeout((function () { r.rootElement.querySelector("." + Ko) && r.fireUptickTracker("uptick_sticky_view") }), 1e3), setTimeout((function () { r.resetUpTick() }), t) }, n.setFixedPosition = function () { ut(this.kargoAdContent, Ko), ft(this.kargoAdContent, "kargo-banner-width") }, n.clearTimeout = function () { this.trackerTimeoutId && (clearTimeout(this.trackerTimeoutId), this.trackerTimeoutId = null) }, n.resetUpTick = function () { this.clearTimeout(), this.hideCloseButton(), ft(this.kargoAdContent, Ko), ut(this.kargoAdContent, "kargo-banner-width"), ut(this.kargoAdContent, "no-padding"); var t = this.rootElement.querySelector(".kargo-branding-kargo"); t && (ft(t, "hide"), ut(t, "show")), this.win.postMessage({ message: "uptickReset", adSlot: this.config.slot, localId: this.config.localId }, "*"), this.isDemoModeActive() || this.destroyAd || (this.shouldAnimate = !1), this.removePlaceholderVenti() }, n.isDemoModeActive = function () { return "true" === new URLSearchParams(window.location.search).get("demo") }, n.showCloseButton = function () { var t = this.kargoAdContent.querySelector(".kargo-uptick-close-" + this.config.localId); null != t && t.classList.contains("hide") && (ft(t, "hide"), ut(t, "show")) }, n.handleClose = function (t) { t.preventDefault(), this.win.dispatchEvent(new Event("kargo-uptick-close-" + this.config.localId)), this.logger.debug("Uptick closed"), this.destroyAd = !0, this.resetUpTick(), this.fireUptickTracker("uptick_sticky_close") }, n.hideCloseButton = function () { var t = this.win.document.querySelector(".kargo-uptick-close-" + this.config.localId); t && (ft(t, "show"), ut(t, "hide")) }, n.addPlaceholderVenti = function () { var t; this.removePlaceholderVenti(); var e = this.win.document.createElement("div"); e.classList.add("tempBanner"), e.classList.add("tempBanner-" + this.config.localId), e.style.backgroundImage = "url(" + this.placeholderImage + ")", null == (t = this.rootElement.parentElement) || t.appendChild(e) }, n.removePlaceholderVenti = function () { this.win.document.querySelectorAll(".tempBanner-" + this.config.localId).forEach((function (t) { return t.remove() })) }, n.setUptickCookie = function () { var t = new Date; t.setTime(t.getTime() + 288e5), this.win.document.cookie = this.uptickCookie + "; expires=" + t.toUTCString() + "; path=/" }, n.checkForUptickCookie = function () { return this.win.document.cookie.includes(this.uptickCookie) }, n.display = function () { var e = xt(It().mark((function e() { var r; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: (r = this.template).html = No, r.css += Fo, r.setTemplateVar("CLOSEBUTTON", "kargo-uptick-close-" + this.config.localId), t.prototype.display.call(this); case 5: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), n.fireUptickTracker = function (t) { var e = this, n = r()(this.config.settings.tracking, t); n && n.length > 0 && (n = "string" == typeof n ? [n] : n).forEach((function (r) { D(e.win, r), e.logger.debug("Fired " + t + " tracker") })) }, e }(Gi), Ho = function (t) { function e() { return t.apply(this, arguments) || this } Zt(e, t); var r = e.prototype; return r.onCreate = function () { var e = this.config.execution, r = this.rootElement.querySelector(".kargo-ad-content"); e && Xn.includes(e) && ui(this.config, this.win) && this.handleFlexWidth(r), hi(this.config) && di(r), t.prototype.onCreate.call(this) }, r.handleFlexWidth = function (t) { var e = this.rootElement.parentNode.offsetWidth; if (ut(t, Jn), this.config.execution === Qn) { gi(t, e); var r = pi(e); this.logger.debug("Desktop Lighthouse: setting width to " + r + "px") } else { t.style.minWidth = Wn + "px", t.style.width = e + "px"; var n = Gn; e < 650 && e > Yn && (n = Yn), t.style.maxWidth = n + "px"; var i = Math.min(Math.max(e, Wn), Gn); this.logger.debug("Venti " + this.config.execution + ": setting width to " + i + "px"), (zt.isDebugMode(this.win) || Math.random() < .2) && Wt.reportAdMetric({ type: "venti-flex-size", version: "8.22.0", value: i }, this.config, this.logger) } }, r.onSizeChange = function (e, r) { var n = this.rootElement.parentNode.offsetWidth, i = this.rootElement.querySelector(".kargo-ad-content"), o = this.config.execution; o && Xn.includes(o) && ui(this.config, this.win) && (i.style.maxWidth = n < 650 && n > Yn ? Yn + "px" : n <= Yn ? n + "px" : Gn + "px"), t.prototype.onSizeChange.call(this, e, r) }, r.getRenderConfig = function () { var e = t.prototype.getRenderConfig.call(this); return "composer" !== this.config.settings.creative_origin && (e.minDimension.height = 460), this.config.execution !== Zn && this.config.execution !== Jn || (e.minDimension.width = Wn, e.minDimension.height = 250, e.maxDimension.width = Gn), e.height = 460, e.expansionCheck = !0, e }, e }(Gi), Bo = __webpack_require__(3930), qo = new E("Hover"), zo = function (t) { function e(e, r) { return t.call(this, e, r) || this } Zt(e, t); var r = e.prototype; return r.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 0, height: 0, minDimension: null }) }, r.display = function () { var e = xt(It().mark((function e() { var r, n, i, o, a = this; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (this.logger.debug("Video Anchor loaded in its own space"), this.template && (this.template.html = Bo, this.template.css = Ci), r = this.template, r.setTemplateVar("SIDEKICK_WIDTH", "80"), r.setTemplateVar("FORMAT", "kargo-hover--videoanchor"), r.setTemplateVar("HORIZONTAL_ALIGN", "kargo-hover--align-left"), n = function (t) { a.video && a.video.fireErrorTrackers(400), a.reportError(t), a.destroy() }, tt(this.win)) { e.next = 12; break } n(qo.errNoSupport("Autoplay")), e.next = 28; break; case 12: return e.prev = 12, e.next = 15, this.getVideoCreative(); case 15: i = this.video, o = "Video Creative - ", this.logger.debug("" + o + i.creativeType), this.logger.debug(o + "Snippet Config", i.config), this.logger.debug(o + "Vast Config", i.vast ? i.vast.parsedVastResult : null), this.logger.debug(o + "Anchor Config", i.anchorConfig), t.prototype.display.call(this), e.next = 28; break; case 24: e.prev = 24, e.t0 = e.catch(12), this.logger.error(e.t0), n(e.t0); case 28: case "end": return e.stop() } }), e, this, [[12, 24]]) }))); return function () { return e.apply(this, arguments) } }(), r.closeVideoAnchor = function () { var t = new Event("kargo-hover-close"); if (this.win.dispatchEvent(t), this.config.settings.tracking.dismiss) for (var e = 0; e < this.config.settings.tracking.dismiss.length; e++)D(this.win, this.config.settings.tracking.dismiss[e]); this.onClose(), this.destroy() }, r.onLoad = function () { var e = this.rootElement.querySelector(Tr).contentWindow, r = (0, c.xF)(e, "Kargo.PlatformMacros"); r && (r.destroy = this.closeVideoAnchor.bind(this)); var n = e.document.body; n && (n.style.position = "static", n.style.bottom = "0"), t.prototype.onLoad.call(this) }, r.onSizeChange = function (e, r) { var n; if (r > 200) { n = this.rootElement.querySelectorAll(".kargo-hover-link"); for (var i = 0; i < n.length; i += 1)ut(n[i], "hide") } t.prototype.onSizeChange.call(this, e, r) }, e }(Pi), Wo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e }(to), Go = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e }(to), Yo = function (t) { function e() { return t.apply(this, arguments) || this } return Zt(e, t), e.prototype.getRenderConfig = function () { return t.prototype.getRenderConfig.call(this, { width: 160, height: 600, expansionCheck: !0 }) }, e }(oo), Zo = "kargo-hover--branding-none", Jo = "kargo-hover-close-progress", Qo = "kargo-wrapper", Xo = function (t) { function e(e, r) { var n; return (n = t.call(this, e, r) || this).hideBranding = !0, n.isBreakout = !1, n.registerEventListener(), n } Zt(e, t); var r = e.prototype; return r.registerEventListener = function () { var t = this; this.win.addEventListener("message", (function (e) { t.logger.debug("Received message: ", e.data); var r = t.rootElement.querySelector(".kargo-ad-hover"); "kargo-wrapper-breakout-complete" === e.data ? (t.isBreakout && (r.style.display = "none", setTimeout((function () { r.style.display = "block" }), 100)), t.showBranding(), t.showCloseButton()) : "kargo-wrapper-breakout-begin" === e.data && (t.isBreakout = !0, t.hideCloseButton()) })) }, r.showBranding = function () { var t = this.rootElement.querySelector("." + Zo); t && "none" !== this.config.settings.branding && (this.logger.debug("showing branding"), ft(t, Zo), "kargo" !== this.config.settings.branding && ut(t, "kargo-hover--branding-" + this.config.settings.branding)) }, r.showCloseButton = function () { Array.from(this.rootElement.querySelectorAll(".kargo-hover-close")).some((function (t) { return !!lt(t, Qo) && (ft(t, Qo), ft(t, Jo), !0) })) }, r.hideCloseButton = function () { Array.from(this.rootElement.querySelectorAll(".kargo-hover-close")).some((function (t) { var e = t.getBoundingClientRect(); return !(!e.height || !e.width) && (ut(t, Qo), ut(t, Jo), !0) })) }, r.onLoad = function () { if (t.prototype.onLoad.call(this), this.hideBranding) { this.logger.debug("hiding the wrapper branding"); var e = this.rootElement.querySelector(".kargo-ad-hover"); if (e) { ut(e, Zo); var r = this.config.settings.branding; "kargo" !== r && "none" !== r && ft(e, "kargo-hover--branding-" + this.config.settings.branding) } } this.hideCloseButton() }, r.display = function () { var e = xt(It().mark((function e() { return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return "breakout" === this.config.execution && (this.config.content = this.config.content.replace(/\/wrapper.min.js/g, "/wrapper-breakout.min.js"), this.logger.warn("Redirecting breakout execution to use breakout template")), e.abrupt("return", t.prototype.display.call(this)); case 2: case "end": return e.stop() } }), e, this) }))); return function () { return e.apply(this, arguments) } }(), e }(Pi), $o = ["GoogleActiveViewClass", "GoogleActiveViewElement"], ta = /<script>(var url|\(function\(\) {var u) = '([\s\S]*?)';[\s\S]*?<\/script>/i, ea = /<script>function gen_\d+_debug_ping/i, ra = /id="(DfaVisibilityIdentifier_[\s\S]*?)"/i, na = /https?:\/\/(?:www\.)?googleads.g.doubleclick.net\/dbm\/ad\?dbm.*?/i, ia = /https?:\/\/(?:www\.)?ad.doubleclick.net\/dbm\/ad\?dbm_*?/i, oa = new E("ActiveView"), aa = function () { function t(t, e) { this.win = t, this.logger = e, this.activeViewClass = "", this.activeViewVisibilityIdentifier = "" } var e = t.prototype; return e.isActiveViewWrapped = function (t) { for (var e = 0; e < $o.length; e += 1) { if (t.indexOf($o[e]) > 0) return this.activeViewClass = $o[e], !0 } return !1 }, e.moveUp = function (t, e) { var r = e.match(ta); if (e.match(ea)) throw oa.errNew("new active-view pixel"); if (!r) throw oa.errCant("find Active View script tag"); if (!r[2].match(na) && !r[2].match(ia)) throw oa.errInvalid("Active View script URL"); var n = document.createElement("script"); n.src = r[2], t.className += " " + this.activeViewClass; var i = e.match(ra); if (!i) throw oa.errCant("find Active View visibility identifier"); this.activeViewVisibilityIdentifier = i[1], t.setAttribute("id", this.activeViewVisibilityIdentifier), ht(n, "append", t) }, e.remove = function (t) { var e; try { e = t.replace(' class="' + this.activeViewClass + '"', ""), this.activeViewVisibilityIdentifier && (e = e.replace(' id="' + this.activeViewVisibilityIdentifier + '"', "")), e = e.replace(ta, "") } catch (t) { throw oa.errCant("remove Active View elements from creative: " + t) } return e }, t }(), sa = function () { function t(t, e) { this.templateName = t, this.overrideTemplateURL = e, this.content = "", this.css = "", this.macros = {} } var e = t.prototype; return e.getHTML = function () { var t = xt(It().mark((function t() { var e, r, n, i, o; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.content) { t.next = 2; break } return t.abrupt("return", this.content); case 2: return t.next = 4, this.fetchContent(this.templateURL()); case 4: return e = (e = t.sent).replace("$\\[VAST_XML]", "$[VAST_XML]"), r = new DOMParser, n = r.parseFromString(this.replaceMacros(e), "text/html"), this.css && ((i = n.createElement("style")).innerHTML = this.css, n.getElementsByTagName("body")[0].appendChild(i)), n.head.childNodes.length && ((o = n.body).prepend.apply(o, n.head.childNodes), n.head.innerHTML = ""), t.abrupt("return", n.body.innerHTML); case 11: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), e.setVastXML = function (t) { this.macros.ENCODED_VAST_XML = btoa(t) }, e.setMacroValue = function (t, e) { this.macros[t] = e }, e.templateURL = function () { return this.overrideTemplateURL ? this.overrideTemplateURL : "https://storage.cloud.kargo.com/ad/network/tag/templates/" + this.templateName + ".html" }, e.fetchContent = function () { var t = xt(It().mark((function t(e) { var r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, fetch(e); case 2: if (!(r = t.sent).ok) { t.next = 5; break } return t.abrupt("return", r.text()); case 5: return t.abrupt("return", Promise.reject(new Error("fabrik template request failed with status " + r.status + ": " + r.statusText))); case 6: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), e.replaceMacros = function (t) { var e = this; return t.replace(/\$[{[]([A-Z_]+)[}\]]/g, (function (t, r) { return e.macros[r] || "" })) }, t }(), ca = function () { function t(t, e, r) { void 0 === r && (r = null), this.win = t, this.logger = e, this.creative = r } var e = t.prototype; return e.isTrackingViewability = function () { var t = !0, e = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"); if (e) { var r = e(); r && r.isIasViewabilityEnabled && ((t = r.isIasViewabilityEnabled()) || this.logger.debug("Not loading IAS because IAS is disabled globally")) } if (this.creative) { var n = this.creative.getConfig(); (n.source || {}).type === Lr.PASSBACK && t && (this.logger.debug("Not loading IAS because type is Passback"), t = !1), _r.indexOf(n.format) > -1 && n.format !== rr.NATIVE_VIDEO_KEY_ART && n.format !== rr.ABA_VIDEO && t && (this.logger.debug("Not loading IAS because format is Video"), t = !1), void 0 === n.iasTagParams && t && (this.logger.debug("Not adding IAS due to missing config `iasTagParams`"), t = !1) } return t }, e.getTrackingTag = function () { if (null === this.creative) return ""; var t = this.creative.getConfig(); if (!t.iasTagParams) return ""; var e = Mr(t.type, this.creative.rootElement); null === e && (this.logger.debug("Unable to find visibility element, defaulting to root element"), e = this.creative.rootElement); var r = "krg-crt-" + t.id; e.classList.contains(r) || e.classList.add(r); var n = t.iasTagParams.replace(/\{\{AdPath\}\}/g, encodeURIComponent("." + r)); return this.logger.debug("Generating IAS tag parameters:", n), '<script type="text/javascript" src="' + ("https://pixel.adsafeprotected.com/jload?" + n) + '"><\/script>' }, e.getVideoData = function () { if (null === this.creative) return ""; var t = this.creative.getConfig(); return t.iasTagParams ? t.iasTagParams : "" }, t }(), la = function () { function t(t) { this.node = t, this.currentSize = { width: 0, height: 0 }, this.callbacks = { onSizeChange: [] }, this.interval = null } var e = t.prototype; return e.onSizeChange = function (t) { this.callbacks.onSizeChange.indexOf(t) < 0 && this.callbacks.onSizeChange.push(t) }, e.checkSize = function () { if (this.node.clientWidth !== this.currentSize.width || this.node.clientHeight !== this.currentSize.height) { this.currentSize.width = this.node.clientWidth, this.currentSize.height = this.node.clientHeight; for (var t = 0; t < this.callbacks.onSizeChange.length; t++)this.callbacks.onSizeChange[t](this.currentSize.width, this.currentSize.height) } }, e.start = function () { var t = this; this.interval || (this.interval = setInterval((function () { t.checkSize() }), 100)) }, e.stop = function () { this.interval && clearInterval(this.interval) }, t }(), ua = function () { function t(t, e, r) { this.win = t, this.html = e, this.css = r, this.replacementVars = {} } var e = t.prototype; return e.getHtml = function (t, e) { var r; if ("string" == typeof t) { if (0 === (r = t.trim()).indexOf("&lt;")) { var n = this.win.document.createElement("div"); n.innerHTML = r, r = n.childNodes[0].nodeValue } } else r = e; return r }, e.replaceTemplateVars = function (t) { var e; "html" == t ? (e = this.html, t = this.html) : (e = this.css, t = this.css); for (var r = /VAR_([A-Z_]*)/g, n = r.exec(t); n;)e = void 0 !== this.replacementVars[n[1]] && null !== this.replacementVars[n[1]] ? (0, c.xP)(e, n[0], this.replacementVars[n[1]]) : e.replace(n[0], ""), n = r.exec(t); return e }, e.setTemplateVar = function (t, e) { this.replacementVars[t] = e }, e.setDefaultTemplateVars = function (t, e) { this.setTemplateVar("ID", t), void 0 !== e && this.setTemplateVar("LOCAL_ID", e.toString()) }, t }(); function ha(t, e) { var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (r) return (r = r.call(t)).next.bind(r); if (Array.isArray(t) || (r = function (t, e) { if (t) { if ("string" == typeof t) return da(t, e); var r = {}.toString.call(t).slice(8, -1); return "Object" === r && t.constructor && (r = t.constructor.name), "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? da(t, e) : void 0 } }(t)) || e && t && "number" == typeof t.length) { r && (t = r); var n = 0; return function () { return n >= t.length ? { done: !0 } : { done: !1, value: t[n++] } } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function da(t, e) { (null == e || e > t.length) && (e = t.length); for (var r = 0, n = Array(e); r < e; r++)n[r] = t[r]; return n } var ga = new E("Vast"), pa = function () { function t(t) { this.win = t, this.parsedVastResult = null, this.inputVastStr = null, this.parser = this.win.Kargo.VastParser } var e = t.prototype; return e.replaceVastMacros = function (t, e) { return void 0 === e && (e = {}), this.parser.replaceVastMacros(t, e) }, e.parse = function () { var t = xt(It().mark((function t(e) { var r = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return this.inputVastStr = e, t.next = 3, new Promise((function (t, n) { var i = function (e, i) { e ? n(e) : i ? (r.parsedVastResult = i, t()) : n(ga.errNew("Vast failed to parse")) }; 0 == e.trim().indexOf("<") ? r.parser.parseString(e, i) : r.parser.parseUrl(e, i) })); case 3: case "end": return t.stop() } }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), e.getParsedVastUrl = function () { var t = null; return this.inputVastStr && 0 !== this.inputVastStr.trim().indexOf("<") && (t = this.inputVastStr), t }, e.getParsedVastXml = function () { var t = null; return this.inputVastStr && 0 === this.inputVastStr.trim().indexOf("<") && (t = this.inputVastStr), t }, e.getUUID = function () { return this.parsedVastResult ? this.parsedVastResult.uuid : null }, e.getRawXml = function () { return this.parsedVastResult ? this.parsedVastResult.rawXmlResults : [] }, e.getLinearCreative = function () { return r()(this.parsedVastResult, ["ad", "creatives", "linear"], null) }, e.getMediaFiles = function () { return r()(this.getLinearCreative(), ["mediaFiles"], []) }, e.getVpaidVideo = function () { for (var t, e = null, r = 0, n = 0, i = 0, o = ha(this.getMediaFiles()); !(t = o()).done;) { var a = t.value; if (!e && a.apiFramework && "application/javascript" === a.type && (e = Object.assign({}, a)), a.width && a.height) { var s = a.width * a.height; (!i || i < s) && (r = a.width, n = a.height, i = s) } } return e && (e.width = r, e.height = n), e }, e.getNonVpaidSource = function () { var t = null, e = this.getMediaFiles(); return e.length && (t = this.getHighestQualityVid(e)), t }, e.getHighestQualityVid = function (t) { var e = t.filter((function (t) { return "video/mp4" === t.type })); if (!e.length) return null; var r = e.sort((function (t, e) { return t.width - e.width })); return e.filter((function (t) { return t && t.width && t.width < 700 })).filter((function (t) { return t && t.bitrate && t.bitrate >= 400 && t.bitrate <= 700 })).sort((function (t, e) { return e.width * e.bitrate - t.width * t.bitrate }))[0] || r[0] }, e.isVpaid = function () { return !!this.getVpaidVideo() }, e.hasMediaFile = function () { for (var t, e = ha(this.getMediaFiles()); !(t = e()).done;) { if (!t.value.apiFramework) return !0 } return !1 }, e.getErrorTrackers = function () { return r()(this.parsedVastResult, ["ad", "error"], []) }, e.getImpressionTrackers = function () { return r()(this.parsedVastResult, ["ad", "impression"], []) }, e.getViewableImpressionTrackers = function () { return r()(this.parsedVastResult, ["ad", "viewabletracker"], []) }, e.getClickThroughUrl = function () { return r()(this.getLinearCreative(), ["videoClicks", "clickThrough"], null) }, e.getClickTrackers = function () { return r()(this.getLinearCreative(), ["videoClicks", "clickTracking"], []) }, e.getLoadTrackers = function () { return r()(this.parsedVastResult, ["ad", "extensions", "load"], []) }, e.getAdVerificationTrackers = function () { return r()(this.parsedVastResult, ["ad", "adverifications"], []) }, e.getTrackingEvents = function () { return r()(this.getLinearCreative(), ["trackingEvents"], null) }, e.getPlaybackEvents = function () { return r()(this.getTrackingEvents(), ["playback"], null) }, e.getUserEvents = function () { return r()(this.getTrackingEvents(), ["userActions"], null) }, e.getAdParameters = function () { return r()(this.getLinearCreative(), ["adParameters"], null) }, t }(), fa = function (t, e) { return t + e & 4294967295 }, va = function (t, e, r, n, i, o) { return e = fa(fa(e, t), fa(n, o)), fa(e << i | e >>> 32 - i, r) }, ma = function (t, e, r, n, i, o, a) { return va(e & r | ~e & n, t, e, i, o, a) }, ka = function (t, e, r, n, i, o, a) { return va(e & n | r & ~n, t, e, i, o, a) }, ya = function (t, e, r, n, i, o, a) { return va(e ^ r ^ n, t, e, i, o, a) }, ba = function (t, e, r, n, i, o, a) { return va(r ^ (e | ~n), t, e, i, o, a) }, wa = function (t, e) { var r = t[0], n = t[1], i = t[2], o = t[3]; r = ma(r, n, i, o, e[0], 7, -680876936), o = ma(o, r, n, i, e[1], 12, -389564586), i = ma(i, o, r, n, e[2], 17, 606105819), n = ma(n, i, o, r, e[3], 22, -1044525330), r = ma(r, n, i, o, e[4], 7, -176418897), o = ma(o, r, n, i, e[5], 12, 1200080426), i = ma(i, o, r, n, e[6], 17, -1473231341), n = ma(n, i, o, r, e[7], 22, -45705983), r = ma(r, n, i, o, e[8], 7, 1770035416), o = ma(o, r, n, i, e[9], 12, -1958414417), i = ma(i, o, r, n, e[10], 17, -42063), n = ma(n, i, o, r, e[11], 22, -1990404162), r = ma(r, n, i, o, e[12], 7, 1804603682), o = ma(o, r, n, i, e[13], 12, -40341101), i = ma(i, o, r, n, e[14], 17, -1502002290), n = ma(n, i, o, r, e[15], 22, 1236535329), r = ka(r, n, i, o, e[1], 5, -165796510), o = ka(o, r, n, i, e[6], 9, -1069501632), i = ka(i, o, r, n, e[11], 14, 643717713), n = ka(n, i, o, r, e[0], 20, -373897302), r = ka(r, n, i, o, e[5], 5, -701558691), o = ka(o, r, n, i, e[10], 9, 38016083), i = ka(i, o, r, n, e[15], 14, -660478335), n = ka(n, i, o, r, e[4], 20, -405537848), r = ka(r, n, i, o, e[9], 5, 568446438), o = ka(o, r, n, i, e[14], 9, -1019803690), i = ka(i, o, r, n, e[3], 14, -187363961), n = ka(n, i, o, r, e[8], 20, 1163531501), r = ka(r, n, i, o, e[13], 5, -1444681467), o = ka(o, r, n, i, e[2], 9, -51403784), i = ka(i, o, r, n, e[7], 14, 1735328473), n = ka(n, i, o, r, e[12], 20, -1926607734), r = ya(r, n, i, o, e[5], 4, -378558), o = ya(o, r, n, i, e[8], 11, -2022574463), i = ya(i, o, r, n, e[11], 16, 1839030562), n = ya(n, i, o, r, e[14], 23, -35309556), r = ya(r, n, i, o, e[1], 4, -1530992060), o = ya(o, r, n, i, e[4], 11, 1272893353), i = ya(i, o, r, n, e[7], 16, -155497632), n = ya(n, i, o, r, e[10], 23, -1094730640), r = ya(r, n, i, o, e[13], 4, 681279174), o = ya(o, r, n, i, e[0], 11, -358537222), i = ya(i, o, r, n, e[3], 16, -722521979), n = ya(n, i, o, r, e[6], 23, 76029189), r = ya(r, n, i, o, e[9], 4, -640364487), o = ya(o, r, n, i, e[12], 11, -421815835), i = ya(i, o, r, n, e[15], 16, 530742520), n = ya(n, i, o, r, e[2], 23, -995338651), r = ba(r, n, i, o, e[0], 6, -198630844), o = ba(o, r, n, i, e[7], 10, 1126891415), i = ba(i, o, r, n, e[14], 15, -1416354905), n = ba(n, i, o, r, e[5], 21, -57434055), r = ba(r, n, i, o, e[12], 6, 1700485571), o = ba(o, r, n, i, e[3], 10, -1894986606), i = ba(i, o, r, n, e[10], 15, -1051523), n = ba(n, i, o, r, e[1], 21, -2054922799), r = ba(r, n, i, o, e[8], 6, 1873313359), o = ba(o, r, n, i, e[15], 10, -30611744), i = ba(i, o, r, n, e[6], 15, -1560198380), n = ba(n, i, o, r, e[13], 21, 1309151649), r = ba(r, n, i, o, e[4], 6, -145523070), o = ba(o, r, n, i, e[11], 10, -1120210379), i = ba(i, o, r, n, e[2], 15, 718787259), n = ba(n, i, o, r, e[9], 21, -343485551), t[0] = fa(r, t[0]), t[1] = fa(n, t[1]), t[2] = fa(i, t[2]), t[3] = fa(o, t[3]) }, _a = function (t) { var e, r = []; for (e = 0; e < 64; e += 4)r[e >> 2] = t.charCodeAt(e) + (t.charCodeAt(e + 1) << 8) + (t.charCodeAt(e + 2) << 16) + (t.charCodeAt(e + 3) << 24); return r }, Aa = "0123456789abcdef".split(""), Ca = function (t) { for (var e = "", r = 0; r < 4; r++)e += Aa[t >> 8 * r + 4 & 15] + Aa[t >> 8 * r & 15]; return e }, xa = function (t) { return function (t) { for (var e = 0; e < t.length; e++)t[e] = Ca(t[e]); return t.join("") }(function (t) { var e, r = t.length, n = [1732584193, -271733879, -1732584194, 271733878]; for (e = 64; e <= t.length; e += 64)wa(n, _a(t.substring(e - 64, e))); t = t.substring(e - 64); var i = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; for (e = 0; e < t.length; e++)i[e >> 2] |= t.charCodeAt(e) << (e % 4 << 3); if (i[e >> 2] |= 128 << (e % 4 << 3), e > 55) for (wa(n, i), e = 0; e < 16; e++)i[e] = 0; return i[14] = 8 * r, wa(n, i), n }(t)) }; function Ea(t) { return xa(t) } "5d41402abc4b2a76b9719d911017c592" !== xa("hello") && (fa = function (t, e) { var r = (65535 & t) + (65535 & e); return (t >> 16) + (e >> 16) + (r >> 16) << 16 | 65535 & r }); var Ia = new E("Video"), Oa = function () { function t() { } return t.submitVastForTranscoding = function () { var e = xt(It().mark((function e(r, n, i, o) { var a, s; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r && r.getUUID()) { e.next = 2; break } return e.abrupt("return", !1); case 2: return e.next = 4, t.isVastSubmitted(r, i); case 4: if (!(a = e.sent)) { e.next = 9; break } return s = new Date(a).toString(), o.debug("VAST already submitted at " + s), e.abrupt("return", !1); case 9: return e.prev = 9, e.next = 12, t.sendTranscodingRequest(r, n, i); case 12: return o.debug("VAST submitted for transcoding"), e.abrupt("return", !0); case 16: return e.prev = 16, e.t0 = e.catch(9), o.debug("Error. VAST not submitted for transcoding: ", e.t0), e.abrupt("return", !1); case 20: case "end": return e.stop() } }), e, null, [[9, 16]]) }))); return function (t, r, n, i) { return e.apply(this, arguments) } }(), t.isVastSubmitted = function () { var e = xt(It().mark((function e(r, n) { var i, o; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r) { e.next = 4; break } throw new Error("No Vast to Transcode"); case 4: return i = Ea(r.getUUID()), o = t.getS3Path(n) + "submit/" + i, e.abrupt("return", new Promise((function (t) { V(o, 0, 0, !1, (function (e, r) { t(e ? null : r.uploadTime) })) }))); case 7: case "end": return e.stop() } }), e) }))); return function (t, r) { return e.apply(this, arguments) } }(), t.sendTranscodingRequest = function () { var e = xt(It().mark((function e(r, n, i) { var o, a; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r) { e.next = 4; break } throw new Error("No Vast to Transcode"); case 4: return e.next = 6, new Promise((function (t) { o = { ad_markup: r && r.getRawXml()[0], creative_origin: n.creative_origin, creative_id: n.creative_id, request_origin: "adtag", parameters: { format: n.format } }, t() })); case 6: return a = t.getPostUrl(i), e.abrupt("return", new Promise((function (t, e) { L(a, o, 0, 0, !1, (function (r, n) { r ? e(r) : t(n) })) }))); case 8: case "end": return e.stop() } }), e) }))); return function (t, r, n) { return e.apply(this, arguments) } }(), t.fetchProcessedVastData = function () { var e = xt(It().mark((function e(r, n, i) { var o, a, s, c; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (n && n.getUUID()) { e.next = 4; break } throw Ia.errNotSet("Vast UUID to fetch processed video"); case 4: return o = Ea(n.getUUID()), a = "json" === r ? t.getS3Path(i) + "config/" + o + ".json" : t.getS3Path(i) + "snippet/" + o + ".html", s = null, e.prev = 9, e.next = 12, new Promise((function (t, e) { V(a, 0, 0, false, (function (r, n) { r ? e(r) : t(n) })) })); case 12: s = e.sent, e.next = 18; break; case 15: throw e.prev = 15, e.t0 = e.catch(9), new Error(Fi); case 18: if (!("string" == typeof s && "html" === r || "object" == typeof s && "json" === r)) { e.next = 20; break } return e.abrupt("return", s); case 20: throw (c = Ia.errNew("Unrecognized Processed Video data response")).krg_err_code = "VAST", c; case 23: case "end": return e.stop() } }), e, null, [[9, 15]]) }))); return function (t, r, n) { return e.apply(this, arguments) } }(), t.getS3Path = function (t) { var e = "https://storage.cloud.kargo.com/ad/kstream/prod/", r = d(t); return h(r, "krg_qa") ? e = "https://storage.cloud.kargo.com/ad/kstream/staging/" : h(r, "krg_dev") && (e = "https://storage.cloud.kargo.com/ad/kstream/dev/"), e }, t.getPostUrl = function (t) { var e = "https://kstream-service.prod.kargo.com/api/process"; return h(d(t), "krg_qa") && (e = "https://kstream-service.dev.kargo.com/api/process"), e }, t }(), Da = function () { function t(t, e, r, n) { this.win = t, this.logger = e, this.ias = r, this.destroy = n, this.vast = null, this.html = null, this.creativeType = null, this.resolvedSource = null, this.config = { test: !1, impressionId: null, click_url_prefix: null, click_url: null, videoPlayerLocation: null, endcardUrl: null, tracking: { start: [], firstQuartile: [], midpoint: [], thirdQuartile: [], complete: [], mute: [], unmute: [], replay: [], error: [], expand: [], dismiss: [], load: [], click: [] }, ias_tag_params: null, creative_origin: null, creative_id: null, disableOutOfViewPause: !1, startOnFullView: !1, format: null, execution: null, destroyAd: null }, this.AD_METRIC_RATE = 20 } var e = t.prototype; return e.setConfig = function () { var t = xt(It().mark((function t(e) { var n, i, o, a, s, l, u, g, p, f, v = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (n = e.source, i = e.settings, o = i.tracking || {}, a = null, s = e.creativeId || null, l = !1, u = {}, t.prev = 6, !n) { t.next = 14; break } if (a = n.auctionType || null, !n.dealId) { t.next = 13; break } return t.next = 12, this.confirmStartFullView(n.dealId); case 12: l = t.sent; case 13: n.creativeId && (a = "km", s = n.creativeId); case 14: return g = !1, "true" === h(d(this.win), "krg_qa") && (g = !0), p = !0, (f = r()(this.win, ["Kargo", "Config", "getGlobalConfig"], null)) && !f().isIasViewabilityEnabled() && (p = !1), u = { test: i.va_test || g || !1, impressionId: e.id, click_url_prefix: i.click_url_prefix || null, click_url: i.click_destination_url || null, videoPlayerLocation: ".kargo-ad-" + e.localId + " .kargo-ad-content", endcardUrl: i.endcard_label, tracking: { start: o.start || [], firstQuartile: o.firstQuartile || [], midpoint: o.midpoint || [], thirdQuartile: o.thirdQuartile || [], complete: o.complete || [], mute: o.mute || [], unmute: o.unmute || [], replay: o.replay || [], error: o.error || [], expand: o.expand || [], dismiss: o.dismiss || [], load: o.receive || [], click: o.click || [] }, ias_tag_params: this.ias && p ? this.ias.getVideoData() : null, creative_origin: a, creative_id: s, disableOutOfViewPause: !!i.disable_out_of_view_pause || "open" === a, startOnFullView: l, format: e.format, execution: e.execution, destroyAd: function () { return v.destroy() } }, (0, c.h1)(this.config, u), t.abrupt("return"); case 24: t.prev = 24, t.t0 = t.catch(6), this.logger.error(t.t0); case 27: case "end": return t.stop() } }), t, this, [[6, 24]]) }))); return function (e) { return t.apply(this, arguments) } }(), e.setSource = function (t) { this.resolvedSource = t }, e.confirmStartFullView = function () { var t = xt(It().mark((function t(e) { var r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (e) { t.next = 2; break } return t.abrupt("return", !1); case 2: return t.prev = 2, t.next = 5, P("https://storage.cloud.kargo.com/ad/network/tag/start-full-view.json", this.win, { timeout: 1e3 }); case 5: return r = t.sent, t.abrupt("return", r.data.includes(e)); case 9: return t.prev = 9, t.t0 = t.catch(2), this.logger.error(t.t0), t.abrupt("return", !1); case 13: case "end": return t.stop() } }), t, this, [[2, 9]]) }))); return function (e) { return t.apply(this, arguments) } }(), e.parseVast = function () { var t = xt(It().mark((function t(e) { var r = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.abrupt("return", new Promise((function (t, n) { T("https://storage.cloud.kargo.com/ad/network/tag/VastParser.min.js", r.win, null, function () { var i = xt(It().mark((function i(o) { var a; return It().wrap((function (i) { for (; ;)switch (i.prev = i.next) { case 0: if (!o) { i.next = 4; break } n(o), i.next = 10; break; case 4: return r.vast = new pa(r.win), i.next = 7, r.vast.parse(e); case 7: null != (a = r.vast.parsedVastResult) && null != (a = a.ad) && a.wrappers && r.vast.parsedVastResult.ad.wrappers.length && r.reportVPAIDWrapper(r.vast.parsedVastResult.ad.wrappers.length), r.reportVideoType(), t(); case 10: case "end": return i.stop() } }), i) }))); return function (t) { return i.apply(this, arguments) } }()) }))); case 1: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), e.reportVPAIDWrapper = function (t) { (zt.isDebugMode(this.win) || 1 === Math.floor(100 * Math.random())) && Wt.reportAdMetric({ value: t, type: "vpaid-wrappers", version: "8.22.0" }, this.config, this.logger) }, e.reportVideoType = function () { if ((zt.isDebugMode(this.win) || 1 === Math.floor(Math.random() * this.AD_METRIC_RATE)) && this.resolvedSource.type === Lr.KRAKEN) { var t = this.vast.isVpaid() ? "vpaid" : "vast", e = { slot: this.resolvedSource.macroUtil.macroConfig.slotId, source: this.resolvedSource, format: this.config.format }; Wt.reportAdMetric({ value: 1, type: "video-type", version: "8.22.0", videoType: t }, e, this.logger) } }, e.fireErrorTrackers = function (t) { var e = this, r = this.config.tracking.error; if (this.vast) { var n = this.vast.getErrorTrackers().map((function (r) { return e.vast.replaceVastMacros(r, { errorCode: t }) })); r = r.concat(n) } r.forEach((function (t) { return D(e.win, t) })) }, e.transcodeVast = function () { var t = xt(It().mark((function t() { return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, Oa.submitVastForTranscoding(this.vast, this.config, this.win, this.logger); case 2: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), t }(), Sa = new E("Video"), Ra = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).anchorConfig = { kstream: { spriteSheetUrls: { small: null, large: null }, audioUrl: null }, video: { url: null, width: null, height: null, hasAudio: !0, duration: null, ratio: null, vastUrl: null, vastXml: null }, companion: { url: null, width: null, height: null } }, e } Zt(e, t); var r = e.prototype; return r.getVideoAnchorSnippet = function () { var t = xt(It().mark((function t() { var e, r, n, i, o, a, s, c; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (this.vast) { t.next = 2; break } throw Sa.errNotSet("VAST tag required for VideoAnchor"); case 2: if (e = this.vast, this.anchorConfig.video.vastUrl = e.getParsedVastUrl(), this.anchorConfig.video.vastXml = e.getParsedVastXml(), this.creativeType = "VideoAnchor", e.hasMediaFile() || e.isVpaid()) { t.next = 10; break } throw Sa.errGet("MediaFile or VPAID js", "VAST tag"); case 10: if (e.isVpaid()) { t.next = 32; break } return t.prev = 11, t.next = 14, Oa.fetchProcessedVastData("json", e, this.win); case 14: i = t.sent, (o = i).video && (this.anchorConfig.video.url = o.video.url, this.anchorConfig.video.width = o.video.width, this.anchorConfig.video.height = o.video.height, this.anchorConfig.video.hasAudio = o.video.hasAudio, this.anchorConfig.video.duration = o.video.duration, this.anchorConfig.video.ratio = o.video.ratio), o.kstream && (this.anchorConfig.kstream.audioUrl = o.kstream.audioUrl, o.kstream.spriteSheetUrls && (this.anchorConfig.kstream.spriteSheetUrls.small = o.kstream.spriteSheetUrls.small, this.anchorConfig.kstream.spriteSheetUrls.large = o.kstream.spriteSheetUrls.large)), t.next = 30; break; case 20: if (t.prev = 20, t.t0 = t.catch(11), !e.getNonVpaidSource()) { t.next = 29; break } a = e.getNonVpaidSource(), this.anchorConfig.video.url = a.url, this.anchorConfig.video.width = a.width, this.anchorConfig.video.height = a.height, t.next = 30; break; case 29: throw Ui; case 30: t.next = 33; break; case 32: this.creativeType = "VideoPlayer"; case 33: return null != (r = this.vast.parsedVastResult) && null != (r = r.ad) && r.creatives.companion && "Kargo" === (null == (n = this.vast.parsedVastResult) ? void 0 : n.ad.system) && (s = this.vast.parsedVastResult.ad.creatives.companion, this.anchorConfig.companion.url = s.iframeResource, this.anchorConfig.companion.width = parseInt(s.width), this.anchorConfig.companion.height = parseInt(s.height)), t.next = 36, this.getVideoAnchorTemplate(); case 36: return c = t.sent, this.html = c, this.html = this.replaceAnchorMacros(this.html), t.abrupt("return", this.html); case 40: case "end": return t.stop() } }), t, this, [[11, 20]]) }))); return function () { return t.apply(this, arguments) } }(), r.getTemplateUrl = function () { return "alternate-expand" === this.config.execution ? "https://storage.cloud.kargo.com/ad/network/kap/video-anchor/video-anchor-test/video-anchor-template-v6.html" : this.config.test ? "https://storage.cloud.kargo.com/ad/network/tag/video-anchor-test.html" : "https://storage.cloud.kargo.com/ad/network/tag/video-anchor-template-v6.html" }, r.getVideoAnchorTemplate = function () { var t = this, e = this.getTemplateUrl(); return new Promise((function (r, n) { V(e, t.win, 0, !1, (function (t, i) { if (t || !i) { var o = Sa.errGet("VideoAnchor template', 'url:  " + e); n(o) } else r(i) })) })) }, r.getAnchorMacros = function () { var t = (0, c.h1)({}, this.config, this.anchorConfig); t.creative_id && (t.creativeId = t.creative_id); var e = this.vast && this.vast.isVpaid() || !1; if (t.isVpaid = e, this.vast && !e) { var r = this.vast.getTrackingEvents(); r && (t.tracking.start = this.vast.getImpressionTrackers().concat(t.tracking.start).concat(r.playback.start), t.tracking.firstQuartile = t.tracking.firstQuartile.concat(r.playback.firstQuartile), t.tracking.midpoint = t.tracking.midpoint.concat(r.playback.midpoint), t.tracking.thirdQuartile = t.tracking.thirdQuartile.concat(r.playback.thirdQuartile), t.tracking.complete = t.tracking.complete.concat(r.playback.complete), t.tracking.mute = t.tracking.mute.concat(r.userActions.mute), t.tracking.unmute = t.tracking.unmute.concat(r.userActions.unmute), t.tracking.click = t.tracking.click.concat(this.vast.getClickTrackers()), t.tracking.error = t.tracking.error.concat(this.vast.getErrorTrackers())) } return t }, r.replaceAnchorMacros = function (t) { var e = this.getAnchorMacros(), r = encodeURIComponent(JSON.stringify(e)).replace(/"/g, "&quot;").replace(/'/g, "\\'"), n = t; return n = (0, c.xP)(n, "%%macroConfig%%", r), n = bi.replacePlatformMacros(this.config, this.vast, n) }, e }(Da), Ta = function () { function t(t, e) { this.win = t, this.logger = e, this.vast = null, this.videoPlayerConfig = null, this.resolvedSource = null, this.isClickable = 0 } var e = t.prototype; return e.getVideoPlayerConfig = function (t, e) { var r, n = this, i = t ? t.getVpaidVideo() : null, o = !i && t ? t.getNonVpaidSource() : null, s = t ? t.getLinearCreative() : null, l = e.click_url; !l && t && t.getClickThroughUrl() && (l = t.getClickThroughUrl()), l && (this.isClickable = 1, l = l.replace("[CACHEBUSTING]", this.getCachebustValue())); var u = { amp_iframe: a(this.win), sidebar_slot: Dr.checkIfSidebarSlot(null == (r = this.resolvedSource) ? void 0 : r.creativeData.slot, this.win), debug: !1, player: { location: e.videoPlayerLocation }, ias_tag_params: e.ias_tag_params || null, autoplay: tt(this.win), endcard_url: e.endcardUrl, disableOutOfViewPause: e.disableOutOfViewPause, startOnFullView: e.startOnFullView, adParams: t ? t.getAdParameters() : null, destroyAd: e.destroyAd, reportErr: function (t) { return n.reportErr(t) }, error: e.tracking.error, ad_verifications: t ? t.getAdVerificationTrackers() : [], viewableImpressionTrackers: { viewable: t ? t.getViewableImpressionTrackers() : [] }, uuid: e.impressionId || null, duration: s && s.duration ? s.duration / 1e3 : null, videos: { dimensions: this.getDimensions(t), vpaidUrl: i ? i.url : null, source: o ? o.url : null, click_url: l, tracking: { start: e.tracking.start, firstQuartile: e.tracking.firstQuartile, midpoint: e.tracking.midpoint, thirdQuartile: e.tracking.thirdQuartile, complete: e.tracking.complete, mute: e.tracking.mute, unmute: e.tracking.unmute, click: t ? t.getClickTrackers() : [], click_url_prefix: e.click_url_prefix || null }, load: e.tracking.load } }, h = (0, c.xF)(this.win, "Kargo.Config.getGlobalConfig"); h && h() && h().isDebug() && (u.debug = !0); var d = t ? t.getTrackingEvents() : null; if (d) { var g = u.videos.tracking; g.start = g.start.concat(d.playback.start).concat(t.getImpressionTrackers()), g.firstQuartile = g.firstQuartile.concat(d.playback.firstQuartile), g.midpoint = g.midpoint.concat(d.playback.midpoint), g.thirdQuartile = g.thirdQuartile.concat(d.playback.thirdQuartile), g.complete = g.complete.concat(d.playback.complete), g.mute = g.mute.concat(d.userActions.mute), g.unmute = g.unmute.concat(d.userActions.unmute) } return u.error = u.error.concat(t ? t.getErrorTrackers() : []), u.videos.load = u.videos.load.concat(t ? t.getLoadTrackers() : []), u }, e.reportErr = function (t) { new Ft(this.win, this.resolvedSource || { logger: this.logger }).report("VIDEO-PLAYER", "VPAID Error " + t.code + ": " + t.message, {}), 900 !== t.code && 901 !== t.code || Wt.reportAdMetric({ type: "failure", version: "8.22.0", errCode: "vpaid-" + t.code }, this.videoPlayerConfig, this.logger) }, e.setSource = function (t) { this.resolvedSource = t }, e.getDimensions = function (t) { var e = { width: null, height: null }, r = t ? t.getVpaidVideo() : null, n = !r && t ? t.getNonVpaidSource() : null, i = r || n || null; return i && (e.width = i.width, e.height = i.height), e }, e.getCachebustValue = function () { return Math.random().toString().substr(2, 8) }, e.createVideoPlayer = function () { var t = xt(It().mark((function t(e, r) { var n, i, o, a, s = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (n = this.getVideoPlayerConfig(e, r), (i = n.videos).vpaidUrl || i.source) { t.next = 4; break } return t.abrupt("return", null); case 4: if (o = i.vpaidUrl ? "VPAID" : "MP4", this.logger.debug("Video " + o + " Creative - VideoPlayer Config", this.getVideoPlayerConfig(e, r)), a = "https://storage.cloud.kargo.com/ad/network/tag/Kargo-VideoPlayer.js", "true" === h(d(this.win), "krg_qa") && (a = "https://storage.cloud.kargo.com/ad/network/tag/Kargo-VideoPlayer-stag.js"), (zt.isDebugMode(this.win) || 1 === Math.floor(10 * Math.random())) && this.reportVPAIDClickable(), !this.win.Kargo.VideoPlayer) { t.next = 14; break } return this.player = new this.win.Kargo.VideoPlayer(n), t.abrupt("return", this.player); case 14: return t.abrupt("return", new Promise((function (t, e) { T(a, s.win, null, (function (r) { r ? e(r) : (s.player = new s.win.Kargo.VideoPlayer(n), t(s.player)) })) }))); case 15: case "end": return t.stop() } }), t, this) }))); return function (e, r) { return t.apply(this, arguments) } }(), e.reportVPAIDClickable = function () { var t; t = this.resolvedSource ? { slot: this.resolvedSource.creativeData.slot, format: this.resolvedSource.creativeData.format } : { format: "OutstreamVideo" }, Wt.reportAdMetric({ type: "vpaid-clickable", version: "8.22.0", vpaidClickable: this.isClickable }, t, this.logger) }, t }(), Va = new E("Video"), La = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).videoPlayer = null, e } Zt(e, t); var r = e.prototype; return r.getDimensions = function () { return this.videoPlayer.getVideoPlayerConfig(this.vast, this.config).videos.dimensions }, r.loadVideoPlayer = function () { var t = xt(It().mark((function t() { var e; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return e = null, this.videoPlayer || (this.videoPlayer = new Ta(this.win, this.logger), this.videoPlayer.setSource(this.resolvedSource), e = this.videoPlayer.createVideoPlayer(this.vast, this.config)), t.abrupt("return", e); case 3: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), r.getViewStreamSnippet = function () { var t = xt(It().mark((function t() { var e, r; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.vast) { t.next = 23; break } if (this.vast.hasMediaFile() || this.vast.isVpaid()) { t.next = 5; break } throw Va.errGet("MediaFile or VPAID js", "VAST tag"); case 5: if (!this.vast.isVpaid() || this.vast.hasMediaFile() && !tt(this.win)) { t.next = 14; break } return this.creativeType = "VideoPlayer", e = "", this.config.tracking.load.forEach((function (t) { e += '<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="' + t + '" />' })), this.vast.getLoadTrackers().forEach((function (t) { t.indexOf("casalemedia.com/usermatch") > -1 ? e += '<iframe style="display: none" src="' + t + '"></iframe>' : e += '<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="' + t + '" />' })), this.vast.getAdVerificationTrackers().forEach((function (t) { e = '<script type="text/javascript" src="' + t + '"><\/script>' + e })), t.abrupt("return", e); case 14: return t.next = 16, Oa.fetchProcessedVastData("html", this.vast, this.win); case 16: return r = t.sent, this.creativeType = "Platform", this.html = r, this.html = bi.replacePlatformMacros(this.config, this.vast, this.html), t.abrupt("return", this.html); case 21: t.next = 28; break; case 23: if (!this.html) { t.next = 27; break } return t.abrupt("return", bi.replacePlatformMacros(this.config, this.vast, this.html)); case 27: throw Va.errNotSet("VAST or ViewStream snippet"); case 28: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), e }(Da), Pa = new E("Video"), Ma = function (t) { function e() { var e; return (e = t.apply(this, arguments) || this).nativeVideoKeyArtConfig = { video_url: null, vpaid_enabled: !1, click_url: null, tracking: { start: [], firstQuartile: [], midpoint: [], thirdQuartile: [], complete: [], unmute: [], mute: [], rewind: [], click: [] } }, e } return Zt(e, t), e.prototype.getNativeVideoSnippet = function () { var t = xt(It().mark((function t() { var e, r, n, i, o, a, s; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!this.vast) { t.next = 27; break } if (e = this.vast, this.creativeType = rr.ABA_VIDEO, e.hasMediaFile() || e.isVpaid()) { t.next = 7; break } throw Pa.errGet("MediaFile or VPAID js", "VAST tag"); case 7: if (r = this.vast.getTrackingEvents()) for (n in this.nativeVideoKeyArtConfig.tracking) (i = r.playback[n] || r.userActions[n]) && (this.nativeVideoKeyArtConfig.tracking[n] = [].concat(this.nativeVideoKeyArtConfig.tracking[n], i)); if (this.vast.getClickThroughUrl() && (this.nativeVideoKeyArtConfig.click_url = this.vast.getClickThroughUrl()), o = this.vast.getClickTrackers(), this.nativeVideoKeyArtConfig.tracking.click = this.nativeVideoKeyArtConfig.tracking.click.concat(o), this.nativeVideoKeyArtConfig.vpaid_enabled = e.isVpaid(), !e.isVpaid()) { t.next = 18; break } this.nativeVideoKeyArtConfig.vpaid_url = e.getParsedVastUrl(), this.nativeVideoKeyArtConfig.vpaid_xml = e.getParsedVastXml().replace(/'/g, '\\"'), t.next = 24; break; case 18: return t.next = 20, Oa.fetchProcessedVastData("json", e, this.win); case 20: a = t.sent, (s = a).video && (this.nativeVideoKeyArtConfig.video_url = s.video.url), s.kstream && (this.nativeVideoKeyArtConfig.audio_url = s.kstream.audioUrl, s.kstream.spriteSheetUrls && (this.nativeVideoKeyArtConfig.sprite = s.kstream.spriteSheetUrls.default)); case 24: return t.abrupt("return", this.nativeVideoKeyArtConfig); case 25: t.next = 28; break; case 27: throw Pa.errNotSet("VAST tag required for ABA Video"); case 28: case "end": return t.stop() } }), t, this) }))); return function () { return t.apply(this, arguments) } }(), e }(Da), Na = [{ name: "DFP", viewPercent: .5, timeInView: 1e3, callbackName: "onViewable" }, { name: "MrcVideo", viewPercent: .5, timeInView: 2e3, callbackName: "onMrcVideoViewable" }, { name: "CompleteView", viewPercent: .95, timeInView: 2e3, callbackName: "onCompleteViewable" }]; function Fa(t, e) { var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (r) return (r = r.call(t)).next.bind(r); if (Array.isArray(t) || (r = function (t, e) { if (t) { if ("string" == typeof t) return Ua(t, e); var r = {}.toString.call(t).slice(8, -1); return "Object" === r && t.constructor && (r = t.constructor.name), "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? Ua(t, e) : void 0 } }(t)) || e && t && "number" == typeof t.length) { r && (t = r); var n = 0; return function () { return n >= t.length ? { done: !0 } : { done: !1, value: t[n++] } } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function Ua(t, e) { (null == e || e > t.length) && (e = t.length); for (var r = 0, n = Array(e); r < e; r++)n[r] = t[r]; return n } function Ka(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function ja(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Ka(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Ka(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var Ha, Ba = function () { function t(t, e, r) { this.element = t, this.sourceElement = e, this.isVideo = r, this.callbacks = { onVisibleChange: [], onViewable: [], onMrcVideoViewable: [], onCompleteViewable: [], onMissingScript: [] }, this.mutationObserver = null } var e = t.prototype; return e.start = function () { var t = this; this.checkVisibility(), this.checkHasScript(), Na.forEach((function (e) { var r = ja(ja({}, e), {}, { timeInView: t.isVideo && "DFP" === e.name ? 2e3 : e.timeInView }); t.checkViewability(r) })) }, e.stop = function () { this.mutationObserver && this.mutationObserver.disconnect() }, e.checkVisibility = function () { var t = this; wi.observeElement(this.element, 0, !1, (function (e) { var r = e.isIntersecting; (0, c.lP)(t, t.callbacks.onVisibleChange, [r]) })) }, e.checkHasScript = function () { var t = this, e = (this.sourceElement.ownerDocument || {}).defaultView; this.mutationObserver = new MutationObserver((function (r) { for (var n, i = Fa(r); !(n = i()).done;) { var o = n.value; null != o && o.removedNodes.length && Array.from(o.removedNodes).includes(t.sourceElement) && e && (0, c.lP)(t, t.callbacks.onMissingScript) } })), this.sourceElement.ownerDocument && this.mutationObserver.observe(this.sourceElement.ownerDocument, { attributes: !0, childList: !0, subtree: !0 }) }, e.checkViewability = function (t) { var e = this, r = t.viewPercent, n = t.timeInView, i = t.callbackName, o = !1, a = !1, s = null; wi.observeElement(this.element, r, !1, (function (t) { a || (o = t.intersectionRatio > r, s || (s = window.setTimeout((function () { o ? (a = !0, (0, c.lP)(e, e.callbacks[i])) : (clearTimeout(s), s = null) }), n))) })) }, e.onVisibleChange = function (t) { this.callbacks.onVisibleChange.indexOf(t) < 0 && this.callbacks.onVisibleChange.push(t) }, e.onViewable = function (t) { this.callbacks.onViewable.indexOf(t) < 0 && this.callbacks.onViewable.push(t) }, e.onMrcVideoViewable = function (t) { this.callbacks.onMrcVideoViewable.indexOf(t) < 0 && this.callbacks.onMrcVideoViewable.push(t) }, e.onCompleteViewable = function (t) { this.callbacks.onCompleteViewable.indexOf(t) < 0 && this.callbacks.onCompleteViewable.push(t) }, e.onMissingScript = function (t) { this.callbacks.onMissingScript.indexOf(t) < 0 && this.callbacks.onMissingScript.push(t) }, t }(), qa = function () { function t(t) { this.window = t } return t.prototype.getAllAdSlots = function () { var t = this.window.googletag; if (!t || "function" != typeof t.pubads) return []; try { return t.pubads().getSlots() || [] } catch (t) { return console.error("Error getting GPT ad slots:", t), [] } }, t.prototype.isGptAdElement = function (t) { var e = this; if (!t) return !1; var r = this.getAllAdSlots(), n = t.id; if (n) { var i = r.find((function (t) { try { return t.getSlotElementId() === n } catch (t) { return !1 } })); return !!i } return r.some((function (r) { try { var n = r.getSlotElementId(), i = e.window.document.getElementById(n); return i && i.contains(t) } catch (t) { return !1 } })) }, t.prototype.getAdSlotInfoForElement = function (t) { if (!t) return null; var e = this.getAllAdSlots(), r = t.id; if (r) { var n = e.find((function (t) { try { return t.getSlotElementId() === r } catch (t) { throw t } })); if (n) return this.extractSlotInfo(n) } for (var i = 0, o = e; i < o.length; i++) { var a = o[i]; try { var s = a.getSlotElementId(), c = this.window.document.getElementById(s); if (c && c.contains(t)) return this.extractSlotInfo(a) } catch (t) { throw t } } return null }, t.prototype.extractSlotInfo = function (t) { try { return { id: t.getSlotElementId(), path: t.getAdUnitPath(), sizes: t.getSizes ? t.getSizes() : [], targeting: t.getTargetingMap ? t.getTargetingMap() : {}, responseInformation: t.getResponseInformation ? t.getResponseInformation() : null } } catch (e) { return console.error("Error extracting slot info:", e), { id: t.getSlotElementId() } } }, t.prototype.refreshAdsForElements = function (t) { if (!t || 0 === t.length) return !1; var e = this.window.googletag; if (!e || "function" != typeof e.pubads) return !1; for (var r = this.getAllAdSlots(), n = [], i = function (t) { var e = o.getAdSlotInfoForElement(t); if (e) { var i = r.find((function (t) { t.getSlotElementId(), e.id })); i && n.push(i) } }, o = this, a = 0, s = t; a < s.length; a++) { i(s[a]) } if (n.length > 0) try { return e.pubads().refresh(n), !0 } catch (t) { return console.error("Error refreshing ads:", t), !1 } return !1 }, t }(); !function (t) { t[t.KEEP_OLD = 0] = "KEEP_OLD", t[t.KEEP_BOTH = 1] = "KEEP_BOTH", t[t.KEEP_NEW = 2] = "KEEP_NEW" }(Ha || (Ha = {})); var za = function () { function t(e, r, n, i, o, a, s, c) { this.domains = [], this.logger = e, this.point = r, this.creative = n, this.element = i, this.startingPoint = o, this.kargoD = Date.now() - a, this.parents = t.checkAndCacheParents(i), this.id = s, this.slotId = c } t.callbackForEachParent = function (t, e, r) { void 0 === r && (r = !1); for (var n = r ? t : t.parentElement; null !== n;) { if (!e(n)) return !1; n = n.parentElement } return !0 }, t.checkAndCacheParents = function (e) { if (void 0 !== e.KrgParents) return e.KrgParents; var r = 0; return t.callbackForEachParent(e, (function () { return r++, !0 })), e.KrgParents = r, e.KrgParents }, t.checkAndCacheStyle = function (t) { return void 0 !== t.KrgStyle || (t.KrgStyle = getComputedStyle(t)), t.KrgStyle }, t.checkAndCacheSticky = function (e) { if (void 0 !== e.KrgSticky) return e.KrgSticky; var r = ["fixed", "sticky"], n = [], i = null; return t.callbackForEachParent(e, (function (e) { n.push(e); var o = t.checkAndCacheStyle(e).position; return !r.includes(o) || (i = e, !1) }), !0), n.forEach((function (t) { t.KrgSticky = i })), i }, t.checkAndCacheZIndex = function (e) { if (void 0 !== e.KrgZIndex) return e.KrgZIndex; var r = null; t.callbackForEachParent(e, (function (e) { var n = t.checkAndCacheStyle(e).zIndex, i = Number(n); return Number.isNaN(i) ? (null === r && (r = n), !0) : (r = i, !1) }), !0); var n = null === r ? "na" : r; return e.KrgZIndex = n, n }, t.getElemInfo = function (e) { var r = e.getBoundingClientRect(); return { z: t.checkAndCacheZIndex(e), x: Math.round(r.x), y: Math.round(r.y), w: Math.round(r.width), h: Math.round(r.height) } }; var e = t.prototype; return e.deconflict = function (t) { return t.element === this.element ? t.point.isOverCreative !== this.point.isOverCreative && this.point.isOverCreative ? Ha.KEEP_NEW : Ha.KEEP_OLD : t.parents === this.parents ? Ha.KEEP_BOTH : t.parents < this.parents && t.element.contains(this.element) ? t.point.isOverCreative || !this.point.isOverCreative ? Ha.KEEP_OLD : Ha.KEEP_NEW : t.parents > this.parents && this.element.contains(t.element) ? this.point.isOverCreative || !t.point.isOverCreative ? Ha.KEEP_NEW : Ha.KEEP_OLD : Ha.KEEP_BOTH }, e.get = function () { for (var e = { kargoOnTop: this.point.isOverCreative ? 0 : 1, tag: this.element.tagName.toLowerCase(), class: this.element.classList.toString().slice(0, 100), classT: this.element.classList.toString().length > 100 ? 1 : 0, id: this.element.id, obj: t.getElemInfo(this.element), kargo: t.getElemInfo(this.creative), element: this.element, kargoD: this.kargoD }, r = this.startingPoint; null !== r && r !== this.element;) { if ("IFRAME" === r.tagName && void 0 !== r.src && "" !== r.src) try { this.domains.push(new URL(r.src).host) } catch (t) { this.logger.error("iframe domain", r.src, t) } r = r.parentElement } return this.domains.length > 0 && (e.domains = this.domains), e }, e.hasBeenSent = function () { if (this.element.KrgPixelsSent && this.element.KrgPixelsSent.includes(this.id)) return !0; for (var t = this.element.parentElement; t;) { if (t.KrgPixelsSent && t.KrgPixelsSent.includes(this.id)) return !0; t = t.parentElement } return !1 }, e.setAsSent = function () { this.element.KrgPixelsSent = this.element.KrgPixelsSent || [], this.element.KrgPixelsSent.push(this.id) }, t }(), Wa = function () { function t(t, e, r, n, i, o, a) { this.categoriesJson = null, this.containsCheckElements = [], this.timer = null, this.lastCheck = 0, this.deltaRanges = [{ until: 5e3, freq: 1e3 }, { until: 3e4, freq: 5e3 }, { freq: 1e4 }], this.deltaRangeIdx = 0, this.pixelCounts = new Map, this.showDebugElements = !1, this.lastShowPoints = 0, this.pointDivs = [], this.returnPointStyleTimeout = null, this.win = t, this.logger = new it(e.win, void 0, e.level, e.reportingEnabled), this.logger.setLabel([].concat("string" == typeof e.label ? [e.label] : e.label, ["OverlapMonitor"])), this.startTime = Date.now(), this.id = o, this.slotId = a, this.tracking = new Ot(this.win, this.logger), this.gptUtil = new qa(this.win), this.containsCheckElements.push(r), null === n || this.containsCheckElements.includes(n) || this.containsCheckElements.push(n), null === i || this.containsCheckElements.includes(i) || this.containsCheckElements.push(i), this.container = r, null !== n && n.classList.contains("kargo-hover--wrapper-fill") && (this.container = n), this.logger.log("Monitoring overlap", r), "true" === h(d(this.win), "krg_overlap") && (this.showDebugElements = !0, this.showPoints()) } t.getGridStep = function (t) { var e = Math.ceil(t / 25); return e < 2 && (e = 2), t / e }; var e = t.prototype; return e.timerHandler = function () { var t, e = Date.now(); if (!(e < this.deltaRanges[this.deltaRangeIdx].freq + this.lastCheck)) { var r = e - this.startTime, n = null == (t = this.deltaRanges[this.deltaRangeIdx]) ? void 0 : t.until; this.deltaRanges.length > this.deltaRangeIdx + 1 && n && r >= n && this.deltaRangeIdx++, this.checkOverlap() } }, e.buildCheckGrid = function (e) { if (void 0 === e && (e = !1), null === this.container) return []; var r = [], n = this.container.getBoundingClientRect(); if (0 === n.width || 0 === n.height) return []; for (var i = n.width - 2, o = t.getGridStep(i), a = n.left + 1, s = a + i, c = this.win.innerWidth, l = n.height - 2, u = t.getGridStep(l), h = n.top + 1, d = h + l, g = this.win.innerHeight, p = function (t, r) { return e || t <= r && t >= 0 }, f = function (t, e, r) { return { x: t, y: e, isOverCreative: r, xr: t - n.left, yr: e - n.top } }, v = a; Math.floor(v) <= s; v += o)if (p(v, c)) { var m = n.top - 1; p(m, g) && r.push(f(v, m, !1)); var k = n.bottom + 1; p(k, g) && r.push(f(v, k, !1)); for (var y = h; Math.floor(y) <= d; y += u)if (p(y, g)) { if (v === a) { var b = n.left - 1; p(b, c) && r.push(f(b, y, !1)); var w = n.right + 1; p(w, c) && r.push(f(w, y, !1)) } r.push(f(v, y, !0)) } } return r }, e.checkGridPoint = function (t) { var e = this.win.document.elementFromPoint(t.x, t.y); if (null === e || null === this.container || "HTML" === e.tagName) return null; var r = this.containsCheckElements.reduce((function (t, r) { return t || !(e !== r && !e.contains(r) && !r.contains(e)) }), !1); if (t.isOverCreative && !r) { var n = za.checkAndCacheSticky(e) || e; return new za(this.logger, t, this.container, n, e, this.startTime, this.id, this.slotId) } if (!t.isOverCreative && !r) { var i = za.checkAndCacheSticky(e); if (null !== i) return new za(this.logger, t, this.container, i, e, this.startTime, this.id, this.slotId) } return null }, e.combinePixels = function (t, e) { return void 0 === e && (e = !1), t.filter((function (t) { return null !== t && (e || !t.hasBeenSent()) })).sort((function (t, e) { return t.parents > e.parents ? 1 : -1 })).reduce((function (t, e) { for (var r = 0; r < t.length; r++) { var n = e.deconflict(t[r]); if (n === Ha.KEEP_OLD) return t; if (n === Ha.KEEP_NEW) return t[r] = e, t } return t.push(e), t }), []) }, e.checkOverlap = function () { var t = this; this.lastCheck = Date.now(); try { this.showDebugElements && (this.showPoints(), this.flashPoints()) } catch (t) { this.logger.error("Error flashing check points", t) } try { var e = this.buildCheckGrid(); if (0 === e.length) return void this.stop(); var r = e.map((function (e) { return t.checkGridPoint(e) })); this.showDebugElements && this.combinePixels(r, !0).forEach((function (e) { var r = e.get(); if (!r.element.querySelector(".krg-overlap-outline")) { var n = document.createElement("div"); n.style.position = "absolute", n.style.left = "0px", n.style.right = "0px", n.style.top = "0px", n.style.bottom = "0px", n.style.pointerEvents = "none", n.style.outline = "solid 3px red", n.classList.add("krg-overlap-outline"), r.element.appendChild(n), setTimeout((function () { r.element.removeChild(n) }), t.deltaRanges[t.deltaRangeIdx].freq / 2) } })); var n = this.combinePixels(r), i = this.updateAndFilterEligiblePixels(n); n.length > 0 && this.sendPixels(i) } catch (t) { this.logger.error(t), this.stop() } }, e.sendPixels = function () { var t = xt(It().mark((function t(e) { var r = this; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, Promise.all(e.map(function () { var t = xt(It().mark((function t(e) { var n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return i = e.get(), t.next = 3, r.getCategories(e.element); case 3: return o = t.sent, r.gptUtil.isGptAdElement(e.element) && o.push("has_gpt"), a = { screen_w: r.win.innerWidth, screen_h: r.win.innerHeight, ad_dur: i.kargoD, obj: i.obj, ad: i.kargo, tag: i.tag, domains: i.domains || [], class: i.class || "", categories: o, position: (null == (n = i.element.KrgStyle) ? void 0 : n.position) || "", id: i.id || "", slot_id: r.slotId }, r.logger.log("New " + (i.kargoOnTop ? "kargo-over" : "kargo-under") + " pixel", e.element, e, a), e.setAsSent(), t.abrupt("return", r.tracking.kaelCustomEvent("overlap", i.kargoOnTop ? "kargo-over" : "kargo-under", "overlap", a, r.id)); case 9: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }())); case 2: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), e.start = function () { this.stop(), this.timer = setInterval(this.timerHandler.bind(this), 100) }, e.stop = function () { null !== this.timer && (clearInterval(this.timer), this.timer = null) }, e.showPoints = function () { var t = this; this.pointDivs.length > 0 && this.pointDivs.forEach((function (t) { null !== t.parentElement && t.parentElement.removeChild(t) })); var e = this.buildCheckGrid(!0); this.pointDivs = e.sort((function (t, e) { return t.isOverCreative === e.isOverCreative || t.isOverCreative ? 1 : -1 })).map((function (e) { var r = document.createElement("div"); return r.style.borderRadius = "50%", r.style.height = "3px", r.style.width = "3px", r.style.zIndex = "2147483647", r.style.position = "absolute", r.style.top = e.yr - 1.5 + "px", r.style.left = e.xr - 1.5 + "px", r.style.pointerEvents = "none", r.style.backgroundColor = e.isOverCreative ? "fuchsia" : "blue", r.style.border = "solid 1px white", r.setAttribute("default-color", r.style.backgroundColor), t.container.appendChild(r), r })) }, e.setPointStyle = function (t) { void 0 === t && (t = !0), t && (this.returnPointStyleTimeout = null), this.pointDivs.forEach((function (e) { e.style.backgroundColor = t ? e.getAttribute("default-color") || "purple" : "black" })) }, e.flashPoints = function () { null !== this.returnPointStyleTimeout && clearTimeout(this.returnPointStyleTimeout), this.setPointStyle(!1), this.returnPointStyleTimeout = setTimeout(this.setPointStyle.bind(this), 100) }, e.getCategories = function () { var t = xt(It().mark((function t(e) { var r, n, i, o, a; return It().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (s = d(this.win), c = void 0, (c = document.createElement("a")).href = s, r = /\./.test(c.host) ? c.host : "", n = [], null !== this.categoriesJson) { t.next = 6; break } return t.next = 5, P("https://storage.cloud.kargo.com/ad/network/tag/ad-stacking-categories.json", this.win, {}); case 5: this.categoriesJson = t.sent; case 6: return this.categoriesJson && "object" == typeof this.categoriesJson && (i = this.categoriesJson[r] || {}, (o = this.findMatchingCategories(i, e)).forEach((function (t) { return n.push(t) })), 0 === o.length && (a = this.categoriesJson["*"] || {}, this.findMatchingCategories(a, e).forEach((function (t) { return n.push(t) })))), e && this.hasVideo(e) && n.push("has_video"), t.abrupt("return", n); case 9: case "end": return t.stop() }var s, c }), t, this) }))); return function (e) { return t.apply(this, arguments) } }(), e.updateAndFilterEligiblePixels = function (t, e) { var r = this; void 0 === e && (e = 2); var n = [], i = new Set(t.map((function (t) { return t.element }))); return this.pixelCounts.forEach((function (t, o) { !i.has(o) && document.body.contains(o) ? r.isElementFullyBehindCreative(o) && (t.count += 1, t.count >= e && (n.push(t.pixel), r.pixelCounts.delete(o))) : document.body.contains(o) || r.pixelCounts.delete(o) })), t.forEach((function (t) { var i = t.element, o = r.pixelCounts.get(i) || { pixel: t, count: 0 }; o.count += 1, r.pixelCounts.set(i, o), o.count >= e && (n.push(t), r.pixelCounts.delete(i)) })), n }, e.findMatchingCategories = function (t, e) { var r = []; return Object.entries(t).forEach((function (t) { var n = t[0], i = t[1]; Array.isArray(i) && e && i.some((function (t) { return e.matches(t) || e.querySelectorAll(t).length > 0 })) && r.push(n) })), r }, e.hasVideo = function (t) { return t.querySelectorAll("video").length > 0 }, e.isElementFullyBehindCreative = function (t) { var e = this.container.getBoundingClientRect(), r = t.getBoundingClientRect(); return !(e.right <= r.left || e.left >= r.right || e.bottom <= r.top || e.top >= r.bottom) }, t }(); function Ga(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Ya(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Ga(Object(r), !0).forEach((function (e) { At(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Ga(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } var Za = { ActiveView: aa, CreativeSandbox: ei, FabrikTemplate: sa, Ias: ca, SizeMonitor: la, Template: ua, Video: Da, VideoAnchorComponent: Ra, ViewstreamComponent: La, NativeVideoComponent: Ma, VisibilityMonitor: Ba }, Ja = ["ABAAdhesionDisplay", "ABADisplay", "ABAVideo", "Anchor", "Billboard", "BottomBanner", "Breakaway", "Breakout", "DesktopBreakout", "DesktopHover", "DesktopRunway", "FabrikOutstream", "HalfPage", "HighRise", "Hover", "KeyArt", "LargeLeaderboard", "Leaderboard", "Lighthouse", "MiddleBanner", "Native", "NativeAnchor", "NativeVideoKeyArt", "NonVastOutstreamVideo", "OutstreamVideo", "Runway", "Sidekick", "SocialCanvas", "SwipeUp", "TopBanner", "Uptick", "Venti", "VideoAnchor", "WideSkyscraper", "Wrapper"], Qa = function () { function e(t, e, r) { this.win = t, this.logger = e, this.moduleLoader = r } var r = e.prototype; return r.cleanFormat = function (t) { if (!Ja.includes(t)) for (var e = 0, r = Ja; e < r.length; e++) { var n = r[e]; if (t.toLowerCase() === n.toLowerCase()) { t = n; break } } return t }, r.createCreative = function () { var e = xt(It().mark((function e(r, n) { var o, a, s, l, u, h, d, g, p, f, v, m, k, y; return It().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (a = new E("CreativeFactory"), s = window, l = i(s), u = new it(l), h = Za, r.format = this.cleanFormat(r.format), d = r.format, (g = t[d]) || (g = "Hover" === d ? Pi : Gi), "viewstream" === r.execution && (g = io), p = new g(l, u), f = { show: function () { return p.show() }, hide: function () { return p.hide() }, destroy: function () { return p.destroy() }, isVisible: function () { return p.eventHandler.isVisible }, isViewable: function () { return p.eventHandler.isViewable }, isDisplayed: function () { return p.eventHandler.isDisplayed }, isDestroyed: function () { return p.eventHandler.isDestroyed }, getLocalId: function () { return p.config.localId }, getId: function () { return p.config.id }, getFormat: function () { return p.config.format }, getType: function () { return p.config.type }, getSlotId: function () { return p.config.slot }, getAnalytics: function () { return p.getAnalytics() }, getConfig: function () { return (0, c.h1)({}, p.config) } }, !(v = null == (o = r.source.creativeFlags) || null == (o = o.flourish) ? void 0 : o.css_template)) { e.next = 25; break } return e.prev = 14, e.next = 17, P(v, this.win, {}); case 17: m = e.sent, p.templateCss += m, u.debug("Loaded css flourish template from: " + v), e.next = 25; break; case 22: e.prev = 22, e.t0 = e.catch(14), u.error("Error loading flourish css template from: " + v, e.t0); case 25: return k = function (t) { p.reportError(t), p.destroy() }, e.prev = 26, y = Ya({}, h), p.useOverlapDetection && (y.OverlapMonitor = Wa), p.setComponents(y), p.source = n, p.setConfig(r), e.prev = 32, e.next = 35, p.detectContainerEnvironment(); case 35: if (s.Kargo && s.Kargo.CreativeRegister) { e.next = 37; break } throw a.errCant("Add creative to creative register"); case 37: s.Kargo.CreativeRegister.add(f), p.display(), e.next = 44; break; case 41: e.prev = 41, e.t1 = e.catch(32), k(e.t1); case 44: e.next = 49; break; case 46: e.prev = 46, e.t2 = e.catch(26), k(e.t2); case 49: return e.abrupt("return", f); case 50: case "end": return e.stop() } }), e, this, [[14, 22], [26, 46], [32, 41]]) }))); return function (t, r) { return e.apply(this, arguments) } }(), e }(); const Xa = Qa; const $a = function () { function t() { this.globalConfig = null, this.slotConfigs = {}, this.globalCallbacks = [], this.slotCallbacks = {} } var e = t.prototype; return e.setGlobalConfig = function (t) { if ("object" == typeof t) { this.globalConfig = t; for (var e = 0; e < this.globalCallbacks.length; e += 1)this.globalCallbacks[e](); this.globalCallbacks = [] } }, e.getGlobalConfig = function () { return this.globalConfig }, e.setSlotConfig = function (t) { if ("object" == typeof t && t.getId && "function" == typeof t.getId) { var e = t.getId(); if (e && (this.slotConfigs[t.getId()] = t, this.slotCallbacks[e])) { for (var r = 0; r < this.slotCallbacks[e].length; r += 1)this.slotCallbacks[e][r](); this.slotCallbacks[e] = [] } } }, e.getSlotConfig = function (t) { return this.slotConfigs[t] || null }, e.onGlobalReady = function (t) { "function" == typeof t && (this.globalConfig ? t() : this.globalCallbacks.push(t)) }, e.onSlotReady = function (t, e) { "function" == typeof e && (this.slotConfigs[t] ? e() : (this.slotCallbacks[t] = this.slotCallbacks[t] || [], this.slotCallbacks[t].push(e))) }, t }(); const ts = function () { function t() { this.enableOverlapDetection = null, this.config = { debug: !1, environment: Tn.PRODUCTION, trackLatency: !0, publisher_id: null, property_id: null, conditional_check: null, pre_js: null, pre_css: null, settings: { enable_active_view_rewrite: !0, enable_cerberus: !0, enable_ias_viewability: !0, disable_hover_hiding: !1, overlap_detection_sample: 1 } } } var e = t.prototype; return e.setConfig = function (t) { (0, c.h1)(this.config, t) }, e.getConfig = function () { return this.config }, e.checkPageVars = function (t) { var e = d(t), r = h(e, "krg_disable_hiding"); void 0 !== t.__krg_cerberus && (this.config.settings.enable_cerberus = t.__krg_cerberus), (t.__krg_disable_hiding || "true" === r) && (this.config.settings.disable_hover_hiding = !0), h(e, "krg_debug") && (this.config.debug = !0); var n = h(e, "krg_overlap"); n && (Number.isNaN(Number(n)) ? (this.enableOverlapDetection = !0, this.config.settings.overlap_detection_sample = 100) : this.config.settings.overlap_detection_sample = Number(n)), void 0 !== t.__krg_track_latency && (this.config.trackLatency = t.__krg_track_latency); var i = h(e, "krg_latency"); "true" === i ? this.config.trackLatency = !0 : "false" === i && (this.config.trackLatency = !1) }, e.getEnvironment = function () { return this.config.environment }, e.isDebug = function () { return this.config.debug }, e.isLatencyTracked = function () { return this.config.trackLatency }, e.getPublisherId = function () { return this.config.publisher_id }, e.getPropertyId = function () { return this.config.property_id }, e.getConditionalCheckFunc = function () { return this.config.conditional_check }, e.getPreLoadCss = function () { return this.config.pre_css }, e.getPreLoadFunc = function () { return this.config.pre_js }, e.getEnabledPlugins = function () { var t = ["IframeBuster"]; return this.config.settings.enable_cerberus && t.push("Cerberus"), t }, e.isActiveViewRewriteEnabled = function () { return this.config.settings.enable_active_view_rewrite }, e.isIasViewabilityEnabled = function () { return this.config.settings.enable_ias_viewability }, e.isHoverHidingDisabled = function () { return this.config.settings.disable_hover_hiding }, e.shouldCheckOverlap = function () { if (null !== this.enableOverlapDetection) return this.enableOverlapDetection; var t = 100 * Math.random(); return this.enableOverlapDetection = t <= this.config.settings.overlap_detection_sample, this.enableOverlapDetection }, t }(); var es = function () { function t() { this.config = { kargo_id: null, platform: null, position: null, allow_responsive: !0, allow_multiple: !1, override_url: null, passback_js: null, fail_callback: null, conditional_check: null, pre_js: null, post_js: null, pre_css: null }, this.forceSource = null, this.formatConfigs = {} } var e = t.prototype; return e.setConfig = function (t) { t.settings = t.settings && this.renameToABA(t.settings), (0, c.h1)(this.config, t) }, e.renameToABA = function (t) { var e = this; return Array.isArray(t) ? t.map((function (t) { return t.format = e.replaceFormatName(t.format), t })) : (t.format = this.replaceFormatName(t.format), t) }, e.replaceFormatName = function (t) { var e = t; return "Native" === t ? e = rr.ABA_DISPLAY : "NativeVideoKeyArt" === t ? e = rr.ABA_VIDEO : "NativeAnchor" === t && (e = rr.ABA_ADHESION_DISPLAY), e }, e.getConfig = function () { return this.config }, e.checkPageVars = function (t) { var e = d(t); h(e, "krg_server") && (this.forceSource = h(e, "krg_server")) }, e.setFormatConfig = function (t) { t.getFormat && "function" == typeof t.getFormat && (this.formatConfigs[t.getFormat()] = t) }, e.getFormatConfig = function (t) { var e = null; return this.formatConfigs[t] && (e = this.formatConfigs[t]), e }, e.getAllFormatConfigs = function () { return this.formatConfigs }, e.getId = function () { return this.config.kargo_id }, e.getPlatform = function () { return this.config.platform }, e.getPosition = function () { return this.config.position }, e.getOverrideUrl = function () { return this.config.override_url }, e.getPassbackConfig = function () { var t = this, e = this; return { isEnabled: function () { return (null === t.forceSource || t.forceSource === Lr.PASSBACK) && null != e.config.passback_js }, getHtml: function () { return e.config.passback_js }, getFormat: function () { var t; switch (e.config.position) { case "top": t = "TopBanner"; break; case "mid": t = "MiddleBanner"; break; case "bottom": t = "BottomBanner"; break; case "hover": t = "Hover" }return e.config.passback_format || t }, getSize: function () { var t = "320x50"; return "mid" !== e.config.position && "int" !== e.config.position || (t = "300x250"), t } } }, e.allowsResponsiveCreatives = function () { return this.config.allow_responsive }, e.getFailedRequestFunc = function () { return this.config.fail_callback }, e.getConditionalCheckFunc = function () { return this.config.conditional_check }, e.getCss = function () { return this.config.pre_css }, e.getPreDrawFunc = function () { return this.config.pre_js }, e.getPostDrawFunc = function () { return this.config.post_js }, t }(); const rs = es; var ns = ["type", "format", "approved", "custom_css", "preload_callback", "success_callback", "ignore_slot_pre_css", "ignore_slot_pre_js", "ignore_slot_post_js"], is = function () { function t() { this.config = { format: null, approved: { direct: !1, pmp: !1 }, custom_css: null, preload_callback: null, success_callback: null, ignore_slot_pre_css: !1, ignore_slot_pre_js: !1, ignore_slot_post_js: !1 } } var e = t.prototype; return e.setConfig = function (t) { (0, c.h1)(this.config, t) }, e.getConfig = function () { return this.config }, e.getFormat = function () { return this.config.format }, e.isApprovedForDirect = function () { return this.config.approved.direct }, e.isApprovedForPMP = function () { return this.config.approved.pmp }, e.getCss = function () { return this.config.custom_css }, e.getPreDrawFunc = function () { return this.config.preload_callback }, e.getPostDrawFunc = function () { return this.config.success_callback }, e.isIgnoreSlotCss = function () { return this.config.ignore_slot_pre_css }, e.isIgnoreSlotPreDrawFunc = function () { return this.config.ignore_slot_pre_js }, e.isIgnoreSlotPostDrawFunc = function () { return this.config.ignore_slot_post_js }, e.getCreativeConfig = function () { var t = this, e = {}; return Object.keys(this.config).forEach((function (r) { ns.indexOf(r) < 0 && (e[r] = t.config[r]) })), e }, t }(); const os = is; !function (t) { var e = i(t), r = n(t, e); if (!r.Config) { var o = new it(e); o.setLabel("CONFIG"); var a = new $a; r.Config = {}, r.Config.setGlobalConfig = function (t) { if (!a.getGlobalConfig()) { var r = new ts; r.checkPageVars(e), r.setConfig(t), a.setGlobalConfig(r), o.debug("Global Config set", r.getConfig()) } }, r.Config.getGlobalConfig = function () { var t = a.getGlobalConfig(), e = null; return t && (e = { getConfig: function () { return t.getConfig() }, checkPageVars: function (e) { return t.checkPageVars(e) }, isDebug: function () { return t.isDebug() }, isLatencyTracked: function () { return t.isLatencyTracked() }, getEnvironment: function () { return t.getEnvironment() }, getPublisherId: function () { return t.getPublisherId() }, getPropertyId: function () { return t.getPropertyId() }, getConditionalCheckFunc: function () { return t.getConditionalCheckFunc() }, getPreLoadCss: function () { return t.getPreLoadCss() }, getPreLoadFunc: function () { return t.getPreLoadFunc() }, getEnabledPlugins: function () { return t.getEnabledPlugins() }, isActiveViewRewriteEnabled: function () { return t.isActiveViewRewriteEnabled() }, isIasViewabilityEnabled: function () { return t.isIasViewabilityEnabled() }, isHoverHidingDisabled: function () { return t.isHoverHidingDisabled() }, shouldCheckOverlap: function () { return t.shouldCheckOverlap() } }), e }, r.Config.setSlotConfig = function (t) { var r = new rs; if (r.checkPageVars(e), r.setConfig(t), r.getId() && !a.getSlotConfig(r.getId())) { if (t.settings) if (t.settings.length) for (var n, i = 0; i < t.settings.length; i += 1)(n = new os).setConfig(t.settings[i]), r.setFormatConfig(n); else if (t.settings.format) { var s = new os; s.setConfig(t.settings), r.setFormatConfig(s) } a.setSlotConfig(r), o.debug("Slot Config '" + r.getId() + "' set", r.getConfig()) } }, r.Config.getSlotConfig = function (t) { var e = a.getSlotConfig(t), r = null; return e && (r = { getConfig: function () { return e.getConfig() }, getFormatConfig: function (t) { var r = e.getFormatConfig(t), n = null; return r && (n = { getConfig: function () { return r.getConfig() }, getFormat: function () { return r.getFormat() }, isApprovedForDirect: function () { return r.isApprovedForDirect() }, isApprovedForPMP: function () { return r.isApprovedForPMP() }, getCss: function () { return r.getCss() }, getPreDrawFunc: function () { return r.getPreDrawFunc() }, getPostDrawFunc: function () { return r.getPostDrawFunc() }, isIgnoreSlotCss: function () { return r.isIgnoreSlotCss() }, isIgnoreSlotPreDrawFunc: function () { return r.isIgnoreSlotPreDrawFunc() }, isIgnoreSlotPostDrawFunc: function () { return r.isIgnoreSlotPostDrawFunc() }, getCreativeConfig: function () { return r.getCreativeConfig() } }), n }, getAllFormatConfigs: function () { var t = e.getAllFormatConfigs(), n = {}; return t && Object.keys(t).forEach((function (t) { var e = r.getFormatConfig(t); r.getFormatConfig(t) && (n[t] = e) })), n }, getId: function () { return e.getId() }, getPlatform: function () { return e.getPlatform() }, getPosition: function () { return e.getPosition() }, getOverrideUrl: function () { return e.getOverrideUrl() }, getPassbackConfig: function () { return e.getPassbackConfig() }, isCallAutomatically: function () { return e.isCallAutomatically() }, getFailedRequestFunc: function () { return e.getFailedRequestFunc() }, getConditionalCheckFunc: function () { return e.getConditionalCheckFunc() }, getCss: function () { return e.getCss() }, getPreDrawFunc: function () { return e.getPreDrawFunc() }, getPostDrawFunc: function () { return e.getPostDrawFunc() }, allowsResponsiveCreatives: function () { return e.allowsResponsiveCreatives() } }), r }, r.Config.onGlobalReady = function (t) { return a.onGlobalReady(t) }, r.Config.onSlotReady = function (t, e) { return a.onSlotReady(t, e) }, r.setGlobalConfig = r.Config.setGlobalConfig, r.setAdConfig = r.Config.setSlotConfig } }(window), function () { var t = i(window), e = n(window, t); if (function (t) { var e = i(t), r = n(t, e); if (!r.CreativeRegister) { new it(e).setLabel("CREATIVE REGISTER"); var o = new bt; r.CreativeRegister = { add: function (t) { return o.add(t) }, get: function (t) { return o.get(t) }, getAll: function () { return o.getAll() }, getByLocalId: function (t) { return o.getByLocalId(t) }, getCreativesOfType: function (t) { return o.getCreativesOfType(t) }, getCreativesOfFormat: function (t) { return o.getCreativesOfFormat(t) }, getCreativesOfSlot: function (t) { return o.getCreativesOfSlot(t) }, report: function () { for (var t, r, n = o.getAnalytics(), i = [], a = 1; n[a];) { var s = null; n[a].timestamps.displayed && (s = n[a].timestamps.displayed - n[a].timestamps.start + " ms"); var l = null; n[a].timestamps.firstVisible && (l = n[a].timestamps.firstVisible - n[a].timestamps.start + " ms"); var u = null; n[a].timestamps.viewable && (u = n[a].timestamps.viewable - n[a].timestamps.start + " ms"); var h = null; n[a].timestamps.destroyed && (h = n[a].timestamps.destroyed - n[a].timestamps.start + " ms"), i.push({ ID: n[a].id, Type: n[a].type, Format: n[a].format, Execution: n[a].execution, "Kargo Creative": n[a].kargoCreativeId, "Started at": (t = n[a].timestamps.start, r = void 0, r = new Date(t), (0, c.PX)(r.getHours(), 2, "0") + ":" + (0, c.PX)(r.getMinutes(), 2, "0") + ":" + (0, c.PX)(r.getSeconds(), 2, "0") + "." + (0, c.PX)(r.getMilliseconds(), 3, "0")), "Displayed at": s, "First Visible at": l, "Viewable at": u, "Destroyed at": h }), a += 1 } e.console.log("Creatives"), e.console.table(i) } } } r.report = r.report || function () { for (var t = ["AdTag", "AmpTag", "LMT", "CreativeRegister"], e = 0; e < t.length; e += 1)r[t[e]] && r[t[e]].report && r[t[e]].report() } }(t), !e.AdTag) { var o = new it(t); o.setLabel("ADTAG"); var a = h(d(t), "module_env"), s = new ct(t, (function () { var t = r()(e, "Config.getGlobalConfig", (function () { })), n = Tn.PRODUCTION; return t.getEnvironment ? n = t.getEnvironment() : a && Object.entries(Tn).filter((function (t) { t[0].toLowerCase() === a.toLowerCase() && (n = a) })), n })), l = new Xa(t, o, s), u = new Rn(t, o, l), g = ""; if (window.document.currentScript && window.document.currentScript.getAttribute("src")) g = window.document.currentScript.getAttribute("src"); else for (var p = window.document.getElementsByTagName("script"), f = 0; f < p.length;) { if (p[f].src && p[f].src.indexOf("storage.cloud.kargo.com/ad/network/tag") > 0) { g = p[f].src; break } f += 1 } u.setSelfUrl(g), e.AdTag = u, e.getAd = u.getAd.bind(u), e.loadAds = u.loadAds.bind(u), e.loaded = !0, e.self_url = g, e.Config.onGlobalReady((function () { var e, r; r = function () { o.debug("v8.22.0"), u.loadAds(), u.init() }, "interactive" === (e = t).document.readyState || "complete" === e.document.readyState ? r() : e.document.addEventListener("DOMContentLoaded", r) })) } }() })() })();